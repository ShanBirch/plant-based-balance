<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>28-Day Plant Based Switch</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&amp;display=swap" rel="stylesheet"/>
<link href="manifest.json" rel="manifest"/>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
      .then(reg => console.log('SW Registered!', reg))
      .catch(err => console.log('SW Failed:', err));
  }
</script>
<style>
    :root {
        /* Premium Green & Gold Palette */
        --primary: #046A38; /* Forest Green */
        --primary-light: #06542f; /* Deep Green */
        --secondary: #d4af37; /* Gold */
        --accent-green: #f0fdf4; /* Light Green Tint */
        
        --bg: #f9f9f7;
        --surface: #ffffff;
        --text-main: #1a202c;
        --text-muted: #718096;
        
        --border-radius: 16px;
        --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --nav-height: 80px;
    }

    * { box-sizing: border-box; }

    body { 
        font-family: 'Inter', sans-serif; 
        background: var(--bg);
        color: var(--text-main); 
        margin: 0; 
        padding-bottom: calc(var(--nav-height) + 20px); /* Space for bottom nav */
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
    }

    /* Fixed Bottom Navigation */
    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: var(--nav-height);
        background: white;
        display: flex;
        justify-content: space-around;
        align-items: center;
        box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
        z-index: 9999; /* Always on top */
        border-top: 1px solid rgba(0,0,0,0.05);
        padding-bottom: env(safe-area-inset-bottom);
    }


    .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: var(--text-muted);
        text-decoration: none;
        font-size: 0.75rem;
        font-weight: 500;
        gap: 6px;
        width: 100%;
        height: 100%;
        transition: color 0.2s;
        border: none;
        background: transparent;
        cursor: pointer;
    }

    .nav-item.active {
        color: var(--secondary);
    }
    
    .nav-item svg {
        width: 24px;
        height: 24px;
        fill: currentColor;
    }

    /* Top Header for Views */
    .app-header {
        padding: 20px 25px;
        background: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 900;
        box-shadow: 0 2px 10px rgba(0,0,0,0.03);
    }
    .app-logo { font-family: 'Playfair Display'; font-weight: 700; font-size: 1.25rem; color: var(--primary); }
    /* Profile View Styles */
    .profile-header {
        text-align: center;
        padding: 40px 20px;
        background: white;
        border-bottom: 1px solid #f1f5f9;
        margin-bottom: 25px;
    }
    .profile-photo-container {
        position: relative;
        width: 120px;
        height: 120px;
        margin: 0 auto 20px auto;
        border-radius: 50%;
        border: 4px solid var(--accent-green);
        padding: 5px;
    }
    .profile-photo {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        object-fit: cover;
    }
    .photo-edit-btn {
        position: absolute;
        bottom: 5px;
        right: 5px;
        background: var(--secondary);
        color: white;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid white;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .profile-name-large {
        font-family: 'Playfair Display';
        font-size: 1.8rem;
        margin-bottom: 5px;
        color: var(--primary);
    }
    .profile-email {
        color: var(--text-muted);
        font-size: 0.95rem;
    }
    .profile-details-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        padding: 0 25px;
        margin-bottom: 30px;
    }
    .detail-item {
        background: white;
        padding: 15px;
        border-radius: 12px;
        border: 1px solid #f1f5f9;
        text-align: center;
    }
    .detail-label {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 5px;
    }
    .detail-val {
        font-weight: 700;
        color: var(--primary);
        font-size: 1.1rem;
    }
    .connected-apps-list {
        padding: 0 25px;
    }
    .app-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: white;
        padding: 15px 20px;
        border-radius: 16px;
        margin-bottom: 15px;
        border: 1px solid #f1f5f9;
    }
    .app-info {
        display: flex;
        align-items: center;
        gap: 15px;
    }
    .app-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }
    .app-btn {
        padding: 8px 20px;
        border-radius: 50px;
        border: 1px solid var(--primary);
        background: transparent;
        color: var(--primary);
        font-size: 0.85rem;
        font-weight: 600;
        cursor: pointer;
    }
    .app-btn.connected {
        background: #f0fdf4;
        color: #166534;
        border-color: #166534;
    }

    /* Subscription Management Styles */
    .subscription-menu {
        display: none;
        margin-top: 15px;
        padding: 15px;
        background: #f8fafc;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
    }
    .subscription-menu.active { display: block; }
    .sub-action-btn {
        width: 100%;
        padding: 12px;
        margin-bottom: 10px;
        border-radius: 8px;
        border: 1px solid #cbd5e1;
        background: white;
        color: var(--text-main);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        text-align: left;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .sub-action-btn:hover { background: #f1f5f9; }
    .sub-action-btn.cancel { color: #dc2626; border-color: #fecaca; }
    .sub-action-btn.cancel:hover { background: #fef2f2; }
    
    .pause-options {
        display: none;
        padding-top: 10px;
        grid-template-columns: repeat(3, 1fr);
        gap: 5px;
        margin-bottom: 8px;
    }
    .pause-options.active { display: grid; }
    .pause-btn {
        padding: 8px;
        border: 1px solid var(--primary);
        background: white;
        color: var(--primary);
        border-radius: 6px;
        font-size: 0.8rem;
        cursor: pointer;
    }
    .pause-btn:hover { background: #f0fdf4; }

    .profile-icon { 
        width: 35px; 
        height: 35px; 
        background: var(--accent-green); 
        border-radius: 50%; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        font-weight: bold; 
        color: var(--primary); 
        cursor: pointer;
        transition: transform 0.1s;
    }
    .profile-icon:active { transform: scale(0.95); }

    /* Week Sub-Navigation (Pills) */
    .week-scroller { 
        display: flex; 
        gap: 10px; 
        overflow-x: auto; 
        padding: 15px 25px; 
        background: var(--bg);
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }
    .week-scroller::-webkit-scrollbar { display: none; }

    .pill-btn {
        padding: 8px 16px;
        background: white;
        border: 1px solid rgba(0,0,0,0.08);
        border-radius: 20px;
        color: var(--text-muted);
        white-space: nowrap;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
    }
    .pill-btn.active {
        background: var(--secondary); /* Gold */
        color: white;
        border-color: var(--secondary);
        box-shadow: 0 4px 10px rgba(212, 175, 55, 0.3);
    }

    /* Dashboard Styles */
    .dashboard-welcome {
        padding: 25px;
        background: linear-gradient(135deg, var(--primary) 0%, #034f2a 100%); /* Forest Green to Deep Green */
        color: white;
        border-bottom-left-radius: 30px;
        border-bottom-right-radius: 30px;
        margin-bottom: 25px;
        box-shadow: 0 10px 30px -10px rgba(4, 106, 56, 0.4);
        border-bottom: 5px solid var(--secondary);
    }
    .dashboard-welcome h1, 
    .dashboard-welcome .user-name,
    .dashboard-welcome .stat-val,
    .dashboard-welcome h2,
    .dashboard-welcome h3,
    .dashboard-welcome h4,
    .dashboard-welcome p {
        color: white !important;
    }
    .welcome-text { opacity: 0.9; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; color: white; }
    .user-name { font-family: 'Playfair Display'; font-size: 2rem; margin: 5px 0 15px 0; }
    
    .stats-row { display: flex; gap: 15px; margin-top: 20px; }
    .stat-card {
        background: rgba(255,255,255,0.15);
        backdrop-filter: blur(5px);
        padding: 15px;
        border-radius: 12px;
        flex: 1;
        text-align: center;
    }
    .stat-val { font-size: 1.5rem; font-weight: 700; display: block; }
    .stat-label { font-size: 0.75rem; opacity: 0.9; }



    h1, h2, h3, h4 { 
        font-family: 'Playfair Display', serif; 
        color: var(--primary);
        margin-top: 0;
    }

    h1 { font-size: 2.5rem; letter-spacing: -0.5px; font-weight: 700; }
    h2 { font-size: 1.75rem; color: var(--primary-light); }
    
    /* Layout Container */
    .container { 
        max-width: 100%; 
        margin: 0 auto; 
        min-height: 100vh; 
        background: var(--bg); 
        display: flex; 
        flex-direction: column; 
        position: relative;
    }
    
    /* Sticky Navigation */
    .top-nav { 
        background: rgba(255, 255, 255, 0.95); 
        backdrop-filter: blur(10px);
        position: sticky; 
        top: 0; 
        z-index: 1000; 
        border-bottom: 1px solid rgba(0,0,0,0.05); 
        padding: 15px 30px; 
        display: flex; 
        gap: 12px; 
        overflow-x: auto; 
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none; /* Hide scrollbar Firefox */
        box-shadow: var(--nav-shadow);
    }
    .top-nav::-webkit-scrollbar { display: none; } /* Hide scrollbar Chrome/Safari */

    .nav-btn { 
        padding: 10px 24px; 
        border-radius: 50px; 
        border: 1px solid transparent; 
        background: transparent; 
        color: var(--text-muted); 
        font-weight: 500; 
        cursor: pointer; 
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
        font-family: 'Inter', sans-serif; 
        font-size: 0.95rem; 
        white-space: nowrap;
    }
    
    .nav-btn:hover { color: var(--primary); background: var(--accent-green); }
    
    .nav-btn.active { 
        background: var(--primary); 
        color: white; 
        box-shadow: 0 4px 12px rgba(30, 58, 95, 0.25); 
        transform: translateY(-1px);
    }

    /* Content Area */
    .view-section { 
        display: none; 
        padding: 40px 30px; 
        animation: fadeIn 0.4s ease-out; 
    }
    .view-section.active { display: block; }
    
    @keyframes fadeIn { 
        from { opacity: 0; transform: translateY(10px); } 
        to { opacity: 1; transform: translateY(0); } 
    }

    /* Hero Section (Cover) */
    .hero-card {
        text-align: center;
        padding: 100px 40px;
        background: linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7)), url('/assets/hero_image.webp');
        background-size: cover;
        background-position: center;
        border-radius: var(--border-radius);
        margin-bottom: 40px;
        border: 1px solid rgba(0,0,0,0.03);
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    .hero-title {
        font-size: 3rem;
        color: var(--primary);
        line-height: 1.1;
        margin-bottom: 15px;
    }
    .hero-subtitle {
        font-size: 1.25rem;
        color: var(--secondary);
        font-family: 'Inter', sans-serif;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-weight: 600;
        margin-bottom: 30px;
    }

    /* Sub Tabs (Week Days) */
    .sub-nav { 
        display: flex; 
        gap: 10px; 
        margin-bottom: 30px; 
        flex-wrap: wrap; 
        justify-content: center;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    .sub-btn { 
        padding: 8px 18px; 
        border-radius: 8px; 
        border: 1px solid rgba(0,0,0,0.1); 
        background: white; 
        color: var(--text-muted); 
        font-size: 0.9rem; 
        cursor: pointer; 
        transition: all 0.2s; 
        font-weight: 500;
    }
    .sub-btn.active { 
        background: var(--primary-light); 
        color: white; 
        border-color: var(--primary-light); 
    }
    
    .day-view { display: none; }
    .day-view.active { display: block; }

    /* Meal Cards */
    .card { 
        background: var(--surface); 
        border-radius: var(--border-radius); 
        box-shadow: var(--card-shadow); 
        margin-bottom: 24px; 
        border: 1px solid rgba(0,0,0,0.04); 
        overflow: hidden; 
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 35px -5px rgba(0, 0, 0, 0.08);
    }
    
    .card-header { 
        padding: 25px; 
        cursor: pointer; 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        background: white;
    }
    
    .meal-icon { font-size: 1.8rem; margin-right: 20px; filter: grayscale(0.2); }
    
    .meta { 
        font-size: 0.75rem; 
        color: var(--secondary); 
        font-weight: 700; 
        text-transform: uppercase; 
        letter-spacing: 1px; 
        margin-bottom: 6px; 
    }
    
    .meal-title {
        font-family: 'Playfair Display', serif;
        font-weight: 600;
        font-size: 1.25rem;
        color: var(--primary);
        line-height: 1.3;
    }

    .expand-icon {
        font-size: 1.5rem;
        color: var(--text-muted);
        transition: transform 0.3s ease;
        font-weight: 300;
    }
    .card.open .expand-icon { transform: rotate(45deg); }

    .card-body { 
        padding: 0 30px; 
        max-height: 0; 
        overflow: hidden; 
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
        background: #fdfdfd; 
        border-top: 1px solid rgba(0,0,0,0.03); 
        opacity: 0;
    }
    .card.open .card-body { 
        max-height: 2000px; /* Safe large number */
        padding: 30px; 
        opacity: 1;
    }

    /* Content Styling */
    .nutrition-pill {
        display: inline-block;
        padding: 6px 12px;
        background: var(--accent-green);
        color: #2d4a3e;
        border-radius: 6px;
        font-size: 0.85rem;
        font-weight: 500;
        margin-bottom: 20px;
    }

    h4 { 
        font-size: 0.95rem; 
        text-transform: uppercase; 
        letter-spacing: 0.5px; 
        color: var(--primary-light); 
        margin-bottom: 12px; 
        border-bottom: 2px solid rgba(0,0,0,0.05);
        padding-bottom: 6px;
        display: inline-block;
    }

    ul { padding-left: 20px; color: #4a5568; margin-bottom: 25px; }
    li { margin-bottom: 8px; }
    p { color: #4a5568; }

    /* Tables */
    table { width: 100%; border-collapse: separate; border-spacing: 0; margin: 20px 0; font-size: 0.95rem; border: 1px solid #eee; border-radius: 12px; overflow: hidden; }
    th { background: var(--primary); color: white; padding: 15px; text-align: left; font-weight: 500; font-family: 'Playfair Display'; letter-spacing: 0.5px; }
    td { border-bottom: 1px solid #eee; padding: 12px 15px; color: #444; }
    tr:last-child td { border-bottom: none; }
    tr:nth-child(even) { background: #fcfcfc; }

    /* Mobile Tweaks */
    @media (max-width: 600px) {
        .top-nav { padding: 15px; gap: 8px; }
        .nav-btn { padding: 8px 16px; font-size: 0.85rem; }
        .hero-title { font-size: 2.2rem; }
        .view-section { padding: 25px 15px; }
        .card-body { padding: 0 20px; }
        .card.open .card-body { padding: 20px; }
    }
    /* Image Modal */
    .image-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 2000;
        display: none;
        justify-content: center;
        align-items: center;
        opacity: 0;
        transition: opacity 0.3s ease;
        padding: 20px;
        backdrop-filter: blur(5px);
    }
    .image-modal-overlay.active {
        display: flex;
        opacity: 1;
    }
    .image-modal-content {
        max-width: 90vw;
        max-height: 90vh;
        border-radius: 8px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        object-fit: contain;
        transform: scale(0.95);
        transition: transform 0.3s ease;
    }
    .image-modal-overlay.active .image-modal-content {
        transform: scale(1);
    }
    .close-modal-btn {
        position: absolute;
        top: 20px;
        right: 30px;
        color: white;
        font-size: 2.5rem;
        cursor: pointer;
        z-index: 2001;
        background: rgba(255, 255, 255, 0.1);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: background 0.2s, transform 0.2s;
        line-height: 0;
        padding-bottom: 5px;
    }
    .close-modal-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: rotate(90deg);
    }
    
    /* Meal Image Cursor */
    .card-body img {
        cursor: zoom-in;
        transition: opacity 0.2s;
    }
    .card-body img:hover {
        opacity: 0.9;
    }
    /* Shopping List Improvements */
    .shopping-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        margin-top: 10px;
    }
    .shopping-category h4 {
        color: var(--primary);
        border-bottom: 2px solid var(--accent-green);
        padding-bottom: 8px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 1rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    .check-list {
        list-style: none; /* Remove default bullets */
        padding: 0;
        margin: 0;
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
    }
    .check-list li {
        position: relative;
        padding-left: 35px; /* Space for checkbox */
        line-height: 1.4;
        color: var(--text-main);
        cursor: pointer;
        transition: color 0.2s;
        display: flex; /* alignment */
        align-items: center;
    }
    .check-list li:hover {
        color: var(--primary);
    }
    /* Custom Checkbox */
    .check-list li::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 18px;
        height: 18px;
        border: 2px solid #cbd5e0;
        border-radius: 5px;
        transition: all 0.2s;
        background: white;
    }
    .check-list li.checked {
        text-decoration: line-through;
        color: var(--text-muted);
        opacity: 0.7;
    }
    .check-list li.checked::before {
        background-color: var(--secondary); /* Gold background */
        border-color: var(--secondary);
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white' width='14px' height='14px'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: center;
    }
    
    /* Sleep Guide Styles */
    .section-title {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 30px;
        margin-top: 50px;
    }
    .section-number {
        background: var(--secondary);
        color: white;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Playfair Display', serif;
        font-weight: 700;
        font-size: 1.2rem;
    }
    .timeline-item {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
        position: relative;
    }
    .timeline-item:last-child { margin-bottom: 0; }
    .timeline-time {
        min-width: 100px;
        text-align: right;
        font-weight: 600;
        color: var(--primary-light);
        padding-top: 2px;
    }
    .timeline-content {
        padding-bottom: 30px;
        border-left: 2px solid var(--accent-green);
        padding-left: 35px; /* More space for icon */
        position: relative;
    }
    .timeline-item:last-child .timeline-content { border-left: 2px solid transparent; }
    
    /* Icon Dot on Timeline */
    .timeline-content::before {
        content: '';
        position: absolute;
        left: -20px; /* Centered on line */
        top: 0;
        width: 40px;
        height: 40px;
        background: white;
        border: 2px solid var(--secondary);
        border-radius: 50%;
        z-index: 1;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    /* Simple CSS Icons using Emojis or content chars for simplicity/reliability without SVG bloat here */
    .timeline-item:nth-child(1) .timeline-content::after { content: '?'; position: absolute; left: -11px; top: 8px; font-size: 1.2rem; z-index: 2; }
    .timeline-item:nth-child(2) .timeline-content::after { content: '???'; position: absolute; left: -11px; top: 8px; font-size: 1.2rem; z-index: 2; }
    .timeline-item:nth-child(3) .timeline-content::after { content: '??'; position: absolute; left: -11px; top: 8px; font-size: 1.2rem; z-index: 2; }
    .timeline-item:nth-child(4) .timeline-content::after { content: '??'; position: absolute; left: -11px; top: 8px; font-size: 1.2rem; z-index: 2; }
    .timeline-item:nth-child(5) .timeline-content::after { content: '??'; position: absolute; left: -11px; top: 8px; font-size: 1.2rem; z-index: 2; }

    /* Sleep Hero */
    .sleep-hero {
        background: linear-gradient(135deg, #1a2a44 0%, #2d4a6d 100%);
        color: white;
        padding: 60px 40px;
        border-radius: 16px;
        text-align: center;
        margin-bottom: 50px;
        box-shadow: 0 10px 40px rgba(30, 58, 95, 0.2);
    }
    
    .recipe-card {
        background: #fffafa;
        border: 1px solid #ffecec;
        border-radius: 16px;
        padding: 30px;
        margin-bottom: 30px;
        display: flex;
        gap: 30px;
        align-items: center;
    }
    .rescue-card {
        background: #fdf6f6;
        border-left: 4px solid #e53e3e;
        padding: 25px;
        border-radius: 8px;
        margin-top: 20px;
    }
    .glass-effect {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        padding: 20px;
        border-radius: 12px;
        margin-top: 20px;
        border: 1px solid rgba(255,255,255,0.1);
    }
    @media (max-width: 700px) {
        .recipe-card { flex-direction: column; text-align: center; }
        .timeline-content::before { left: -15px; width: 30px; height: 30px; }
        .timeline-item:nth-child(n) .timeline-content::after { font-size: 1rem; left: -8px; top: 4px; }
        .timeline-content { padding-left: 25px; }
    }

    /* Today's Meals Redesign */
    .today-menu-header {
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    .today-menu-header h2 {
        font-size: 2rem;
        margin-bottom: 5px;
    }
    .today-menu-header p {
        color: var(--text-muted);
        font-weight: 500;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        font-size: 0.8rem;
    }
    #today .card {
        border-radius: 20px;
        margin-bottom: 20px;
        border: 1px solid rgba(0,0,0,0.03);
        box-shadow: 0 10px 25px rgba(0,0,0,0.03);
    }
    #today .card-header {
        padding: 20px 25px;
    }
    #today .meal-title {
        font-size: 1.15rem;
    }
    /* Onboarding Modal Styles */
    .onboarding-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(4, 106, 56, 0.6); /* Primary with opacity */
        backdrop-filter: blur(8px);
        z-index: 9999;
        display: none;
        justify-content: center;
        align-items: center;
        padding: 20px;
        opacity: 0;
        transition: opacity 0.4s ease;
    }
    .onboarding-overlay.active {
        display: flex;
        opacity: 1;
    }
    .onboarding-modal {
        background: white;
        width: 100%;
        max-width: 450px;
        border-radius: 20px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        overflow: hidden;
        animation: slideUp 0.5s ease-out;
    }
    @keyframes slideUp {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    .onboarding-header {
        background: linear-gradient(135deg, var(--primary) 0%, #034f2a 100%);
        padding: 30px;
        text-align: center;
        color: white;
    }
    .onboarding-content {
        padding: 30px;
    }
    .onboarding-step {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
        align-items: flex-start;
    }
    .step-icon {
        font-size: 1.5rem;
        background: var(--accent-green);
        width: 45px;
        height: 45px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }
    .step-text h4 {
        margin: 0 0 5px 0;
        color: var(--primary);
        font-size: 1rem;
        border: none;
    }
    .step-text p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--text-muted);
        line-height: 1.4;
    }
    .onboarding-btn {
        width: 100%;
        padding: 16px;
        background: var(--secondary);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: 700;
        letter-spacing: 0.5px;
        cursor: pointer;
        transition: transform 0.2s;
        margin-top: 10px;
    }
    .onboarding-btn:hover {
        transform: translateY(-2px);
        background: #bfa64d; /* Darker gold */
    }
    </style>
</head>
<body>
<div class="container">
<!-- DASHBOARD VIEW (HOME) -->
<div id="view-dashboard" class="app-view">
    <div class="dashboard-welcome">
        <div style="display:flex; justify-content:space-between; align-items:center;">
             <span id="daily-progress-counter" class="welcome-text" style="color: var(--secondary); font-weight: 700;">Day 1 of 28</span>
             <div class="profile-icon" onclick="switchAppTab('profile', this)">S</div> <!-- Placeholder User Initial -->
        </div>
        <h1 class="user-name">Hello, Shannon</h1>
    </div>

    <!-- PWA INSTALL BANNER (Only shown if not installed) -->
    <div id="pwa-install-banner" style="display:none; margin: 0 25px 20px 25px; background: linear-gradient(135deg, var(--primary) 0%, #034f2a 100%); padding: 20px; border-radius: 16px; box-shadow: 0 10px 30px rgba(4, 106, 56, 0.3); animation: slideDown 0.5s ease-out;">
        <div style="display: flex; align-items: center; justify-content: space-between; gap: 15px;">
            <div style="flex: 1;">
                <div style="font-weight: 700; font-size: 1.1rem; color: white; margin-bottom: 5px;">📲 Install Our App</div>
                <div style="font-size: 0.85rem; color: rgba(255,255,255,0.9);">Add to home screen for quick access</div>
            </div>
            <div style="display: flex; gap: 10px;">
                <button onclick="installPWA()" style="background: var(--secondary); color: white; border: none; padding: 10px 20px; border-radius: 50px; font-weight: 700; cursor: pointer; font-size: 0.9rem;">Install</button>
                <button onclick="dismissInstall()" style="background: transparent; color: white; border: 1px solid rgba(255,255,255,0.5); padding: 10px 15px; border-radius: 50px; cursor: pointer;">?</button>
            </div>
        </div>
    </div>
    <style>
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>

    <div style="padding: 0 25px;">
        <h3 style="margin-bottom: 15px;">Today's Priority</h3>
        <!-- Quick Action Card -->
         <div class="card" onclick="switchAppTab('meals', this);" style="cursor: pointer;">
            <div class="card-body" style="max-height: none; padding: 25px; opacity: 1; display: flex; align-items: center; gap: 20px;">
                <div style="background: var(--accent-green); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem;">🌿</div>
                <div>
                    <h4 style="margin: 0 0 5px 0; border: none; padding: 0;">Current Phase</h4>
                    <p style="margin: 0; font-weight: 500; color: var(--primary);">Week 1: The Flush</p>
                    <p style="margin: 0; font-size: 0.8rem; color: var(--text-muted);">View today's menu &rarr;</p>
                </div>
            </div>
         </div>

         <!-- Your Workout Actions -->
         <h3 style="margin: 30px 0 15px 0;">Your Workout</h3>
         <div class="card" style="border-left: 5px solid var(--secondary);">
            <div class="card-body" style="max-height: none; padding: 25px; opacity: 1; display: flex; align-items: center; gap: 20px;">
                <div style="background: var(--accent-green); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem;">🧘‍♀️</div>
                <div>
                    <h4 style="margin: 0 0 5px 0; border: none; padding: 0;">Today's Movement</h4>
                    <p style="margin: 0; font-weight: 500; color: var(--primary);">Somatic Yoga Flow</p>
                    <p style="margin: 0; font-size: 0.8rem; color: var(--text-muted);">20 Min  Restoration &rarr;</p>
                </div>
            </div>
         </div>

        <h3 style="margin: 30px 0 15px 0;">Coaching Insight</h3>
         <div class="card">
              <div class="card-body" style="max-height: none; padding: 20px; opacity: 1;">
                  <p id="daily-coaching-tip" style="margin:0;"><strong>Biology Tip:</strong> Eating within 30 minutes of waking stops the morning cortisol spike. Have you had your breakfast?</p>
              </div>
         </div>
    </div>
</div>

<!-- MEALS VIEW (Contains Week Tabs) -->
<div id="view-meals" class="app-view" style="display:none;">
    <div class="app-header">
        <div class="app-logo">Meals</div>
        <div class="profile-icon" onclick="switchAppTab('profile', this)">S</div>
    </div>
    
    <!-- Week Pills Navigation -->
    <div class="week-scroller" id="meals-nav-pills">
        <button class="pill-btn active" onclick="switchWeek('today', this)">Today</button>
        <button class="pill-btn" onclick="switchWeek('week1', this)">Week 1</button>
        <button class="pill-btn" onclick="switchWeek('week2', this)">Week 2</button>
        <button class="pill-btn" onclick="switchWeek('week3', this)">Week 3</button>
        <button class="pill-btn" onclick="switchWeek('week4', this)">Week 4</button>
        <button class="pill-btn" onclick="switchWeek('dining', this)">Dining Out</button>
        <button class="pill-btn" onclick="switchWeek('shopping', this)" style="background: var(--accent-green); color: var(--primary); font-weight: 600; border-color: rgba(4, 106, 56, 0.2);">🛒 Shopping List</button>
    </div>

    <!-- Container for Week Content -->
    <div id="meals-content-container">
        <!-- Today's Meals View -->
        <div class="view-section active" id="today">
            <div id="today-meals-content">
                <!-- Current day's meals will be injected here -->
                <div style="text-align:center; padding:40px; color:var(--text-muted);">
                    <p>Loading your meals for today...</p>
                </div>
            </div>
        </div>

        <!-- Week views will be injected/shown here -->

<!-- START HERE -->
<div class="view-section active" id="start">
    <div class="hero-card" id="hero-card-bg" style="background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 100%); color: var(--primary);">
        <div style="font-family:'Inter'; text-transform:uppercase; color:var(--secondary); font-weight:600; letter-spacing:1px; margin-bottom:10px;">28-Day Plant Based Switch</div>
        <div class="hero-title" id="hero-title" style="color: var(--primary); font-size: 3rem; margin-bottom: 20px;">Your Cortisol Recovery Protocol</div>
        <div class="hero-subtitle" id="hero-subtitle" style="color: var(--primary-light); font-weight: 500; font-size: 1.1rem; margin-bottom: 20px; max-width: 700px; margin-left: auto; margin-right: auto;">
            <strong>The "Survival Mode" Profile.</strong> Your body is stuck in fight-or-flight, holding onto belly fat. This plan powers down your adrenaline response to signal safety and shedding.
        </div>
    </div>

    <!-- Protocol Collapsible Section -->
    <div class="card">
        <div class="card-header" onclick="toggleCard(this)">
            <div class="meal-title">Your Cortisol Recovery Protocol</div>
            <div class="expand-icon">+</div>
        </div>
        <div class="card-body">
            <!-- DYNAMIC SYMPTOM SECTION -->
            <div id="dynamic-symptom-section" style="display: none; border-bottom: 2px dashed #e2e8f0; margin-bottom: 30px; padding-bottom: 30px;">
                <h3 style="color: var(--secondary); font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 20px;">Your Personalized Focus Areas</h3>
                <div id="symptom-content-container"></div>
            </div>
            <!-- Brain Consistency Box -->
             <div class="card" style="background: #f4f6f8; border-left: 4px solid var(--primary); margin-bottom: 30px;">
                <div class="card-body" style="max-height: none; padding: 30px; opacity: 1;">
                    <h3 style="display:flex; align-items:center; gap:10px;">??? Consistency is Safety</h3>
                    <p>Your brain constantly scans for threats. Erratic eating signals "famine", causing your brain to hoard fat stores and spike anxiety. <strong>We feed on a rhythm to lower adrenaline.</strong> By eating at the same times daily, we signal 'safety', allowing your body to relax and burn fat.</p>
                </div>
            </div>

            <!-- 4 Golden Rules -->
            <h2 style="margin: 0 0 20px 0; text-align: center;">The 4 Golden Rules</h2>
            <div id="golden-rules-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
                <div class="card" style="margin:0;">
                    <div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">1. Carbs at Night</div></div>
                    <div class="card-body" style="max-height:none; opacity:1; padding:20px;">
                        <p>Save starchy carbs (Sweet Potato/Rice) for <strong>dinner</strong>. This blunts the evening cortisol spike and boosts serotonin for deep sleep.</p>
                    </div>
                </div>
                <div class="card" style="margin:0;">
                    <div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">2. No Fasting</div></div>
                    <div class="card-body" style="max-height:none; opacity:1; padding:20px;">
                        <p>Eat within <strong>30 minutes</strong> of waking. Fasting spikes cortisol and keeps your body in emergency storage mode.</p>
                    </div>
                </div>
                 <div class="card" style="margin:0;">
                    <div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">3. Magnesium</div></div>
                    <div class="card-body" style="max-height:none; opacity:1; padding:20px;">
                        <p>Prioritize magnesium-rich foods (Spinach, Pumpkin Seeds, Dark Choc) to physically relax the nervous system.</p>
                    </div>
                </div>
                <div class="card" style="margin:0;">
                    <div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">4. 4-Hour Rhythm</div></div>
                    <div class="card-body" style="max-height:none; opacity:1; padding:20px;">
                        <p><strong>Never go >4 hours without food.</strong> Frequent protein feedings assure your ancient brain that you are safe from starvation.</p>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-bottom: 0;">
                <div class="card-body" id="spotlight-body" style="max-height:none; opacity:1; padding:30px; display:flex; gap:30px; align-items:center;">
                     <img src="protocols/cortisol/images/sweet_potato_spotlight.png" style="width:150px; height:150px; object-fit:cover; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1);">
                     <div>
                        <h3 style="color:var(--secondary);">Medicinal Power: The Sweet Potato</h3>
                        <p><strong>Why simple carbs?</strong> When eaten at night, the strategic insulin release helps lower cortisol and drives Tryptophan into the brain to create <strong>Serotonin</strong>. It is your biochemistry hack for sleep and calm.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Original How To Use (Collapsible) -->
    <div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">How to Use Your Meal Plan</div><div class="expand-icon">+</div></div>
    <div class="card-body">
    <div style="display: grid; grid-template-columns: 1fr; gap: 20px; margin-bottom: 30px;">
    <!-- Movement Pairing (Gold Bg) -->
    <div style="background: #fffdf0; padding: 20px; border-radius: 12px; border: 1px solid #efe5c0;">
    <h4 style="color: #9e7f28; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;">Movement Pairing</h4>
    <p style="font-size: 0.95rem;">Pair this with <strong>low impact</strong> strength training or walking. Avoid HIIT if you are feeling wired/tired.</p>
    </div>
    <!-- Batch Cooking (Sage Bg) -->
    <div style="background: #f4f8f5; padding: 20px; border-radius: 12px; border: 1px solid #dbece0;">
    <h4 style="color: #4a7a58; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;">Batch Cooking Strategy</h4>
    <p style="font-size: 0.95rem;">To save time: <strong>cook double portions of dinner</strong>. Eat the leftovers for lunch the next day.</p>
    </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
    <div>
        <h3>01 Daily Flow</h3>
        <p><strong>Morning:</strong> Hydration tonic.<br/><strong>Breakfast:</strong> Protein rich.<br/><strong>Lunch:</strong> Macro balanced.<br/><strong>Snack:</strong> Functional.<br/><strong>Dinner:</strong> Grounding.</p>
    </div>
    <div>
        <h3>02 Portion Guide</h3>
        <p>Focus on nutrient density and protein at every meal. Listen to your body's hunger signals.</p>
    </div>
    <div>
        <h3>03 Protein Anchor</h3>
        <p>At least 25g per main meal. Add one scoop (20g) plant protein if satiety dips.</p>
    </div>
    <div>
        <h3>04 Hydration</h3>
        <p>Target 2.5-3L per day. Add trace mineral drops and chlorophyll at midday to reduce hot flashes.</p>
    </div>
</div>
</div>
</div>

<!-- WHY THIS PLAN WORKS -->
    <div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">Why This Meal Plan Works For You</div><div class="expand-icon">+</div></div>
    <div class="card-body" id="why-works-body">
        <div style="margin-bottom: 20px;">
            <h4 style="color: var(--primary);">Calming Your Adrenals</h4>
            <p>This plan specifically excludes stimulants and high-glycemic spikes that trigger cortisol release. By stabilizing your blood sugar with complex carbs and protein, we tell your body it is "safe," allowing your adrenal glands to rest and recover.</p>
        </div>
        <div style="margin-bottom: 20px;">
            <h4 style="color: var(--primary);">Strategic Carb Timing</h4>
            <p>We include specific slow-releasing carbohydrates in the evening (like sweet potatoes). This naturally lowers cortisol levels and boosts serotonin production, helping you wind down and improving sleep qualitythe foundation of hormone repair.</p>
        </div>
        <div style="margin-bottom: 20px;">
            <h4 style="color: var(--primary);">Magnesium-Rich Ingredients</h4>
            <p>High-stress burns through magnesium. This menu is packed with magnesium-rich foods like leafy greens, seeds, and cacao to actively replenish your stores, relaxing your nervous system and reducing anxiety.</p>
        </div>
        <div style="margin-bottom: 20px;">
            <h4 style="color: var(--primary);">Anti-Inflammatory fats</h4>
            <p>Healthy fats from avocados, nuts, and seeds provide the raw materials for hormone production while damping down the systemic inflammation caused by chronic stress.</p>
        </div>


    </div></div>
</div>

<script>
    (function() {
        try {
            // 1. Get User Data
            const rawProfile = sessionStorage.getItem('userProfile');
            const data = rawProfile ? JSON.parse(rawProfile) : {};
            // 0. Unified App Content Configuration
            const APP_CONTENT = {
                CORTISOL: {
                    title: "Your Cortisol Recovery Protocol",
                    subtitle: "<strong>The \"Survival Mode\" Profile.</strong> Your body is stuck in fight-or-flight, holding onto belly fat. This plan powers down your adrenaline response to signal safety and shedding.",
                    goldenRules: `
                        <div class="card" style="margin:0;"><div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">1. Carbs at Night</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Save starchy carbs (Sweet Potato/Rice) for <strong>dinner</strong>. This blunts the evening cortisol spike and boosts serotonin for deep sleep.</p></div></div>
                        <div class="card" style="margin:0;"><div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">2. No Fasting</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Eat within <strong>30 minutes</strong> of waking. Fasting spikes cortisol and keeps your body in emergency storage mode.</p></div></div>
                        <div class="card" style="margin:0;"><div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">3. Magnesium</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Prioritize magnesium-rich foods (Spinach, Pumpkin Seeds, Dark Choc) to physically relax the nervous system.</p></div></div>
                        <div class="card" style="margin:0;"><div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">4. 4-Hour Rhythm</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p><strong>Never go >4 hours without food.</strong> Frequent protein feedings assure your ancient brain that you are safe from starvation.</p></div></div>
                    `,
                    spotlight: `
                        <img src="protocols/cortisol/images/sweet_potato_spotlight.png" style="width:150px; height:150px; object-fit:cover; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1);">
                        <div><h3 style="color:var(--secondary);">Medicinal Power: The Sweet Potato</h3><p><strong>Why simple carbs?</strong> When eaten at night, the strategic insulin release helps lower cortisol and drives Tryptophan into the brain to create <strong>Serotonin</strong>. It is your biochemistry hack for sleep and calm.</p></div>
                    `,
                    whyWorks: `
                        <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Calming Your Adrenals</h4><p>This plan specifically excludes stimulants and high-glycemic spikes that trigger cortisol release. By stabilizing your blood sugar with complex carbs and protein, we tell your body it is "safe," allowing your adrenal glands to rest and recover.</p></div>
                        <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Strategic Carb Timing</h4><p>We include specific slow-releasing carbohydrates in the evening (like sweet potatoes). This naturally lowers cortisol levels and boosts serotonin production, helping you wind down and improving sleep qualitythe foundation of hormone repair.</p></div>
                        <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Magnesium-Rich Ingredients</h4><p>High-stress burns through magnesium. This menu is packed with magnesium-rich foods like leafy greens, seeds, and cacao to actively replenish your stores, relaxing your nervous system and reducing anxiety.</p></div>
                        <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Anti-Inflammatory fats</h4><p>Healthy fats from avocados, nuts, and seeds provide the raw materials for hormone production while damping down the systemic inflammation caused by chronic stress.</p></div>
                    `,
                    welcomeText: "Your biochemical reset is active. Cortisol levels are stabilizing."
                },
                ESTROGEN: {
                    title: "Your Estrogen Detox Protocol",
                    subtitle: "<strong>The \"Dominance\" Profile.</strong> Heavy cycles, bloating, and mood swings. This plan amplifies fiber and liver support to safely flush excess hormones.",
                    goldenRules: `
                        <div class="card" style="margin:0;"><div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">1. Cruciferous Daily</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Eat Broccoli, Kale, or Brussels Sprouts <strong>daily</strong>. They contain compounds (DIM) that active the liver's detox pathways.</p></div></div>
                        <div class="card" style="margin:0;"><div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">2. Raw Carrot Salad</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Eat your raw carrot salad <strong>every day</strong>. Its unique fiber acts like a sponge for endotoxins and excess estrogen.</p></div></div>
                        <div class="card" style="margin:0;"><div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">3. Hydration</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Drink <strong>3 Liters</strong> of water. Your kidneys are a major detox organ; keep them flushed to reduce bloating.</p></div></div>
                        <div class="card" style="margin:0;"><div class="card-header" style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">4. Zero Alcohol</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p><strong>Strict No Alcohol.</strong> Ethanol pauses fat burning and liver detox for up to 48 hours. Give your liver a break.</p></div></div>
                    `,
                    spotlight: `
                        <img src="protocols/estrogen/images/raw_carrot_salad_spotlight.png" style="width:150px; height:150px; object-fit:cover; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1);">
                         <div><h3 style="color:var(--secondary);">Medicinal Power: Raw Carrot Salad</h3><p><strong>Not just a side dish.</strong> Raw carrots contain a unique fiber that binds to estrogen in the intestine, preventing reabsorption. Paired with coconut oil and vinegar, it is a powerful daily detox tool.</p></div>
                    `,
                    whyWorks: `
                        <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Supporting Liver Detoxification</h4><p>Your liver is responsible for clearing excess estrogen. This plan is rich in cruciferous vegetables (broccoli, kale, cauliflower) containing Indole-3-Carbinol, a compound that directly supports the liver's ability to safely metabolize and excrete used hormones.</p></div>
                        <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Fiber "Estrogen Trap"</h4><p>Once the liver processes estrogen, it needs to be eliminated. The high soluble fiber content in this plan (from oats, beans, flax) acts like a sponge in your gut, binding to this "old" estrogen and ensuring it leaves your body instead of being reabsorbed.</p></div>
                        <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Phytoestrogen Modulation</h4><p>We use specific plant foods like flaxseeds and legumes that contain phytoestrogens. These smart compounds help balance your levelsproviding a weak estrogenic effect if you're low, but competing with potent estrogens if you're high, creating a smoother ride.</p></div>
                        <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Gut Microbiome Support</h4><p>A healthy gut minimizes the enzyme beta-glucuronidase, which can recycle bad estrogen. This diverse, plant-based menu feeds the beneficial bacteria needed to keep this enzyme in check.</p></div>
                    `,
                    welcomeText: "Your biochemical reset is active. Estrogen detoxification is active."
                }
            };

            const selectedSymptoms = (data.symptoms || '').split(',').map(s => s.trim()).filter(Boolean);

            // 0.5. Apply Unified Content
            const resultType = sessionStorage.getItem('userResult') || 'CORTISOL';
            const profileKey = (resultType.toUpperCase().includes('ESTROGEN')) ? 'ESTROGEN' : 'CORTISOL';
            const content = APP_CONTENT[profileKey];

            if(content) {
                // Intro / Dashboard
                const heroTitle = document.getElementById('hero-title');
                if(heroTitle) heroTitle.innerHTML = content.title;

                const heroSubtitle = document.getElementById('hero-subtitle');
                if(heroSubtitle) heroSubtitle.innerHTML = content.subtitle;
                
                // Welcome Text (Day 1)
                const welcomeMsg = document.getElementById('welcome-message');
                if(welcomeMsg) welcomeMsg.textContent = content.welcomeText;

                // Golden Rules
                const rulesContainer = document.getElementById('golden-rules-container');
                if(rulesContainer) rulesContainer.innerHTML = content.goldenRules;

                // Spotlight
                const spotlightBody = document.getElementById('spotlight-body');
                if(spotlightBody) spotlightBody.innerHTML = content.spotlight;

                // Why Works
                const whyWorksBody = document.getElementById('why-works-body');
                if(whyWorksBody) whyWorksBody.innerHTML = content.whyWorks;
            }
            
            // 2. Symptom Data (Mirrored from Landing Page)
            const symptomData = {
                bloating: {
                    title: 'SYMPTOM: BLOATING & DIGESTION',
                    wrong: "Dwindling estrogen slows gastric emptying. Your digestion is literally moving slower, causing fermentation and that 'hard' belly feeling.",
                    fix: "We use the 'Flora-Flush' sequence. By rotating specific enzyme-active plants, we clear the digestive backlog and flatten the 'Endo-Belly' in days."
                },
                joint_pain: {
                    title: 'SYMPTOM: JOINTS & INFLAMMATION',
                    wrong: "Estrogen is nature's anti-inflammatory. As it drops, your joints lose hydration and fascia becomes sticky, causing that 'stiff and achy' feeling.",
                    fix: "We implement 'Structural Hydration.' We use specific mineral-dense liquids and collagen-protecting plants to re-lubricate your joints from the inside out."
                },
                mood: {
                    title: 'SYMPTOM: MOOD & IRRITABILITY',
                    wrong: "Estrogen protects your serotonin receptors. When it fluctuates, your emotional 'buffer' disappears, leading to sudden rage or weepiness.",
                    fix: "The 'Neuro-Buffering' Protocol. We use amino-acid rich plant pairings to stabilize your dopamine and serotonin pathways, giving you your patience back."
                },
                hair_skin: {
                    title: 'SYMPTOM: HAIR & SKIN CHANGES',
                    wrong: "As estrogen drops, your relative testosterone levels become dominant, attacking hair follicles and causing 'crepey' or dry skin.",
                    fix: "The 'Follicle-Fortress' Strategy. We block DHT naturally using specific plant sterols and re-hydrate the dermal layers with essential fatty acids."
                },
                hot_flashes: {
                    title: 'SYMPTOM: HOT FLASHES & SWEATS',
                    wrong: "Your hypothalamus is misreading low estrogen as 'overheating,' triggering a false panic-cooldown response that results in sweats.",
                    fix: "The 'Thermostat Reset.' We use cooling phytoestrogens and evening primrose timing to 'lie' to your brain's thermostat and keep your core temperature stable."
                },
                libido: {
                    title: 'SYMPTOM: LOW LIBIDO',
                    wrong: "Dopamine drives desire, but it needs estrogen to fire effectively. Without it, the 'spark' feels physically and mentally distant.",
                    fix: "The 'Spark-Ignition' Protocol. We clear neural pathways and use natural vasodilation plants to increase physical sensitivity and mental desire."
                },
                anxiety: {
                    title: 'SYMPTOM: ANXIETY & DREAD',
                    wrong: "Progesterone is your brain's natural 'chill-pill.' When it crashes, your GABA receptors are left unprotected, causing spikes of dread.",
                    fix: "The 'GABA-Guard' Sequence. We use magnesium-rich plant chelation and specific breathing windows to manually override the panic response."
                },
                weight_gain: {
                    title: 'SYMPTOM: UNEXPECTED WEIGHT GAIN',
                    wrong: "Your body is in 'Storage Mode.' It's hoarding fat to protect your bones and produce emergency estrogen, making standard dieting useless.",
                    fix: "The 'Metabolic Flip.' We switch your body from 'Storage' to 'Fuel' mode by hitting specific insulin triggers and using anti-inflammatory fats."
                }
            };

            // 3. Render Logic
            const container = document.getElementById('symptom-content-container');
            const wrapper = document.getElementById('dynamic-symptom-section');
            
            const activeSymptoms = selectedSymptoms
                .filter(s => symptomData[s])
                .map(s => symptomData[s]);

            if (activeSymptoms.length > 0) {
                wrapper.style.display = 'block';
                container.innerHTML = activeSymptoms.map(s => `
                    <div style="margin-bottom: 20px; background: #f8fafc; padding: 20px; border-radius: 12px; border: 1px solid #e2e8f0;">
                        <h4 style="color: #48864B; margin: 0 0 10px 0; font-size: 0.9rem;">${s.title}</h4>
                        <p style="font-size: 0.9rem; color: #475569; margin-bottom: 10px;"><strong>The Issue:</strong> ${s.wrong}</p>
                        <p style="font-size: 0.9rem; color: #1e293b; margin: 0;"><strong>The Fix:</strong> ${s.fix}</p>
                    </div>
                `).join('');

                // 4. Meal Card Badging Logic
                applyMealBadges(selectedSymptoms);
            }

            // Expose function globally for re-triggering
            window.applyMealBadges = function(symptomList) {
                const symptoms = symptomList || JSON.parse(sessionStorage.getItem('userProfile') || '{}').symptoms || [];

                // Map symptoms to keywords/meal types
                const mappings = {
                    'mood': { type: 'BREAKFAST', badge: '? Brain-Fat Focus', color: '#fef3c7', text: '#92400e' },
                    'bloating': { type: 'DINNER', badge: '?? Flora-Flush', color: '#dcfce7', text: '#166534' },
                    'joint_pain': { type: 'SMOOTHIE', badge: '?? Structural Hydration', color: '#dbeafe', text: '#1e40af' },
                    'anxiety': { type: 'SNACK', badge: '?? GABA-Guard', color: '#f3e8ff', text: '#6b21a8' },
                    'weight_gain': { type: 'LUNCH', badge: '?? Metabolic Spark', color: '#ffe4e6', text: '#9f1239' }
                };

                symptoms.forEach(s => {
                    const map = mappings[s];
                    if (map) {
                        document.querySelectorAll('.meta').forEach(meta => {
                            if (meta.textContent.toUpperCase().includes(map.type)) {
                                const titleInfoDiv = meta.parentElement;
                                const title = titleInfoDiv.querySelector('.meal-title');
                                
                                if (title && !title.querySelector('.dynamic-badge')) {
                                    const badge = document.createElement('span');
                                    badge.className = 'dynamic-badge';
                                    badge.textContent = map.badge;
                                    badge.style.cssText = `
                                        background: ${map.color}; 
                                        color: ${map.text}; 
                                        padding: 4px 8px; 
                                        border-radius: 4px; 
                                        font-size: 0.65rem; 
                                        font-weight: 700; 
                                        text-transform: uppercase; 
                                        margin-left: 10px;
                                        display: inline-block;
                                        vertical-align: middle;
                                        line-height: 1.2;
                                    `;
                                    title.appendChild(badge);
                                }
                            }
                        });
                    }
                });
            };

            // Run on load
            window.applyMealBadges();

        } catch(e) { console.error("Symptom Injection and Badging Error", e); }
    })();

    // --- NEW: Coach & Photo Logic ---
    window.addEventListener('DOMContentLoaded', () => {
        injectMealPhotoUploads();
        injectReflectionsIntoDays();
        loadChat();
        loadJournalHistory(); // Added for journal history
        loadGroupChat(); // Added for group chat history
    });

    function injectMealPhotoUploads() {
        // Target meal cards via the meal icon in header
        document.querySelectorAll('.card').forEach((card, index) => {
            const header = card.querySelector('.card-header');
            if (header && header.querySelector('.meal-icon')) {
                 const body = card.querySelector('.card-body');
                 // Avoid duplicating if already present
                 if (body && !body.querySelector('.meal-upload-section')) {
                     const uploadId = 'meal-photo-' + index;
                     const uploadDiv = document.createElement('div');
                     uploadDiv.className = 'meal-upload-section';
                     uploadDiv.style.cssText = 'margin-top: 20px; border-top: 1px dashed #e2e8f0; padding-top: 15px;';
                     
                     uploadDiv.innerHTML = `
                        <h4 style="color:var(--secondary); font-size:0.85rem; margin:0 0 10px 0; text-transform:uppercase; letter-spacing:0.5px;">?? Daily Meal Log</h4>
                        <div style="display:flex; gap:15px; align-items:center;">
                            <label style="cursor:pointer; background:var(--accent-green); padding:6px 12px; border-radius:6px; font-size:0.85rem; color:#2d4a3e; font-weight:600; display:flex; align-items:center; gap:6px; transition:all 0.2s;">
                                <span>Upload Photo</span>
                                <input type="file" accept="image/*" style="display:none;" onchange="handlePhotoUpload(this, '${uploadId}')">
                            </label>
                            <span class="status-text" style="font-size:0.8rem; color:#94a3b8;">No photo yet</span>
                        </div>
                        <div class="preview-area" style="margin-top:10px; display:none;">
                            <img src="" style="width:80px; height:80px; object-fit:cover; border-radius:8px; border:2px solid #e2e8f0;">
                        </div>
                     `;
                     body.appendChild(uploadDiv);
                     
                     // Load saved
                     const saved = localStorage.getItem(uploadId);
                     if (saved) {
                         const img = uploadDiv.querySelector('img');
                         img.src = saved;
                         uploadDiv.querySelector('.preview-area').style.display = 'block';
                         uploadDiv.querySelector('.status-text').textContent = 'Saved in your log';
                     }
                 }
            }
        });
    }

    function injectReflectionsIntoDays() {
        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        // Find all day views
        document.querySelectorAll('.day-view').forEach(view => {
            const id = view.id; // e.g., week1-Monday
            if (!id) return;
            
            // Check if it ends with a day name
            const isDay = days.some(day => id.endsWith(day));
            if (!isDay) return;

            // Check if already injected
            if (view.querySelector('.reflection-card')) return;

            const div = document.createElement('div');
            div.className = 'card reflection-card';
            div.innerHTML = `
                <div class="card-header" style="background: white; cursor: default;">
                    <div class="meal-title" style="color: var(--primary);">?? End of Day Reflection</div>
                </div>
                <div class="card-body" style="padding: 25px; max-height: none; opacity: 1;">
                    <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 20px;">How did you feel today? Any wins or challenges?</p>
                    <textarea id="ref-${id}" placeholder="Journal your thoughts here..." style="width: 100%; height: 120px; padding: 15px; border: 1px solid #cbd5e0; border-radius: 8px; font-family: 'Inter'; font-size: 0.95rem; resize: vertical; margin-bottom: 15px;"></textarea>
                    <button onclick="saveDayReflection('${id}')" style="background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 500;">Save Entry</button>
                    <span id="status-${id}" style="margin-left: 15px; font-size: 0.85rem; color: #166534;"></span>
                </div>
            `;
            view.appendChild(div);

            // Load saved reflection
            const saved = localStorage.getItem('reflection_' + id);
            if (saved) {
                div.querySelector('textarea').value = saved;
            }
        });
    }

    window.saveDayReflection = function(id) {
        const val = document.getElementById('ref-' + id).value;
        if (!val.trim()) return;
        
        // Save locally
        localStorage.setItem('reflection_' + id, val);
        
        const status = document.getElementById('status-' + id);
        status.textContent = "Saved to your journal.";
        setTimeout(() => { status.textContent = ""; }, 3000);

        // Re-render journal history
        loadJournalHistory();

        // Trigger Celebration
        // Parse "week1-Monday" to get "Day X" or just confirm "Day Complete"
        // For simplicity, we can map days to numbers or just say "You did it!"
        showDayCompletion(id);
    };

    window.showDayCompletion = function(dayId) {
        const modal = document.getElementById('day-completion-modal');
        const text = document.getElementById('completion-text');
        
        // Simple heuristic for day number
        // Assuming we are on Day 1 for demo if not strictly tracked elsewhere in this simpler version
        // Or extract from dayId if it was "day1" etc. 
        // dayId format: "week1-Monday"
        
        let displayDay = "Today";
        if(dayId.includes('Monday')) displayDay = "Day 1";
        if(dayId.includes('Tuesday')) displayDay = "Day 2";
        if(dayId.includes('Wednesday')) displayDay = "Day 3";
        if(dayId.includes('Thursday')) displayDay = "Day 4";
        if(dayId.includes('Friday')) displayDay = "Day 5";
        if(dayId.includes('Saturday')) displayDay = "Day 6";
        if(dayId.includes('Sunday')) displayDay = "Day 7";

        text.textContent = `You have successfully completed ${displayDay}.`;
        modal.style.display = 'flex';
        triggerConfetti();
    }

    window.closeCompletionModal = function() {
        document.getElementById('day-completion-modal').style.display = 'none';
    }

    window.triggerConfetti = function() {
        // Simple JS confetti
        const colors = ['#d4af37', '#046A38', '#ffffff', '#f0fdf4'];
        for(let i=0; i<50; i++) {
            const el = document.createElement('div');
            el.className = 'confetti-piece';
            el.style.left = Math.random() * 100 + 'vw';
            el.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            el.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 5000);
        }
    }
    
    // Inject confetti styles if not present
    const style = document.createElement('style');
    style.innerHTML = `
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    `;
    document.head.appendChild(style);

    window.handlePhotoUpload = function(input, id) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const container = input.closest('.meal-upload-section');
                const img = container.querySelector('img');
                img.src = e.target.result;
                container.querySelector('.preview-area').style.display = 'block';
                container.querySelector('.status-text').textContent = 'Saved in your log';
                try {
                    localStorage.setItem(id, e.target.result);
                } catch(err) {
                    alert("Local storage is full. Photo visible but may not persist.");
                }
            };
            reader.readAsDataURL(input.files[0]);
        }
    };

    // --- MOVEMENT STUDIO DB & LOGIC ---
    // --- WORKOUT TRACKER & DATABASE LOGIC ---
    
    // 1. Configuration
    const DEFAULT_WORKOUT = [
        { id: 'sq_01', name: 'Goblet Squat', thumb: 'https://images.unsplash.com/photo-1574680096145-d05b474e2155?w=150', video: 'MeIiIdhvOUg', sets: 3 },
        { id: 'dl_01', name: 'Romanian Deadlift', thumb: 'https://images.unsplash.com/photo-1517963879466-e9b5ce382d33?w=150', video: 'vI2jU4zFfK8', sets: 3 },
        { id: 'push_01', name: 'Kneeling Push Up', thumb: 'https://images.unsplash.com/photo-1599058945522-28d584b6f0ff?w=150', video: 'WPHG8tJ9bO0', sets: 3 }
    ];

    let myWorkout = JSON.parse(localStorage.getItem('myCurrentWorkout')) || DEFAULT_WORKOUT;
    let rapidApiKey = localStorage.getItem('rapidApiKey') || ''; // User needs to set this

    // 2. Initialize
    async function loadMovementStudio() {
        renderWorkoutList();
    }

    // 3. Render Workout List (Trainerize Style)
    function renderWorkoutList() {
        const container = document.getElementById('workout-list');
        if(!container) return;
        
        if(myWorkout.length === 0) {
            container.innerHTML = `<div style="text-align:center; padding:40px; color:#94a3b8;">No exercises added. Go to Library to add some!</div>`;
            return;
        }

        container.innerHTML = myWorkout.map((ex, index) => `
            <div class="card" style="margin-bottom:20px; border:1px solid #e2e8f0; overflow:hidden; box-shadow:0 2px 5px rgba(0,0,0,0.05);">
                <!-- Header -->
                <div style="padding:15px; background:#f8fafc; border-bottom:1px solid #e2e8f0; display:flex; justify-content:space-between; align-items:center;">
                    <div style="display:flex; align-items:center; gap:15px;">
                        <img src="${ex.thumb || 'https://via.placeholder.com/50'}" style="width:50px; height:50px; border-radius:8px; object-fit:cover; background:white;">
                        <div>
                            <h4 style="margin:0; color:var(--primary); font-size:1rem;">${ex.name}</h4>
                            ${ex.video ? `<button onclick="openExerciseModal('${ex.video}')" style="background:none; border:none; color:#3b82f6; font-size:0.75rem; cursor:pointer; padding:0; display:flex; align-items:center; gap:4px; margin-top:4px;">? Watch Demo</button>` : ''}
                        </div>
                    </div>
                     <button onclick="removeExercise(${index})" style="color:#ef4444; background:none; border:none; font-size:0.8rem; cursor:pointer;">Remove</button>
                </div>
                <!-- Sets -->
                <div style="padding:15px;">
                    <div style="display:grid; grid-template-columns: 40px 1fr 1fr 40px; gap:10px; margin-bottom:10px; font-size:0.7rem; color:#64748b; font-weight:700; text-transform:uppercase; text-align:center;">
                        <div>Set</div>
                        <div>kg / lbs</div>
                        <div>Reps</div>
                        <div>?</div>
                    </div>
                    ${Array(ex.sets || 3).fill(0).map((_, i) => `
                        <div style="display:grid; grid-template-columns: 40px 1fr 1fr 40px; gap:10px; margin-bottom:8px; align-items:center;">
                            <div style="text-align:center; color:#94a3b8; font-weight:600; font-size:0.9rem;">${i + 1}</div>
                            <input type="number" placeholder="0" style="width:100%; padding:8px; border:1px solid #cbd5e0; border-radius:6px; text-align:center; background:#f8fafc;">
                            <input type="number" placeholder="0" style="width:100%; padding:8px; border:1px solid #cbd5e0; border-radius:6px; text-align:center; background:#f8fafc;">
                            <div class="check-circle" onclick="this.classList.toggle('completed')" style="width:32px; height:32px; border:2px solid #e2e8f0; border-radius:50%; margin:0 auto; cursor:pointer; display:flex; align-items:center; justify-content:center; color:white; transition:all 0.2s;">?</div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `).join('');
    }

    // 4. ExerciseDB Integration (RapidAPI)
    window.searchRapidAPI = async function() {
        const query = document.getElementById('db-search-input').value.trim();
        const grid = document.getElementById('library-results');
        
        if(!rapidApiKey) {
            alert("Please set your RapidAPI Key first (click 'Update API Key'). Using Demo Data for now.");
            // Demo Fallback
            renderLibraryResults([
                { id: 'demo1', name: 'Barbell Squat', bodyPart: 'legs', gifUrl: 'https://v2.exercisedb.io/image/demo-squat.gif', target: 'glutes' },
                { id: 'demo2', name: 'Dumbbell Lunge', bodyPart: 'legs', gifUrl: 'https://v2.exercisedb.io/image/demo-lunge.gif', target: 'quads' },
                { id: 'demo3', name: 'Plank', bodyPart: 'core', gifUrl: 'https://v2.exercisedb.io/image/demo-plank.gif', target: 'abs' }
            ]); 
            return;
        }

        if(!query) return;

        grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:20px;">Searching ExerciseDB...</div>';

        try {
            const url = `https://exercisedb.p.rapidapi.com/exercises/name/${query}`;
            const options = {
                method: 'GET',
                headers: {
                    'X-RapidAPI-Key': rapidApiKey,
                    'X-RapidAPI-Host': 'exercisedb.p.rapidapi.com'
                }
            };

            const response = await fetch(url, options);
            const result = await response.json();
            
            if(Array.isArray(result)) {
                renderLibraryResults(result.slice(0, 20)); // Limit 20
            } else {
                grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:20px;">No results found.</div>';
            }

        } catch (error) {
            console.error(error);
            grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; color:red; padding:20px;">Error fetching data. Check Console.</div>';
        }
    }

    function renderLibraryResults(list) {
        const grid = document.getElementById('library-results');
        grid.innerHTML = list.map(item => `
            <div class="card" style="margin:0; text-align:center; padding:10px; cursor:pointer; transition:all 0.2s;" onclick="addToWorkout('${item.name.replace(/'/g, "\\'")}', '${item.gifUrl}')">
                <img src="${item.gifUrl}" style="width:100%; height:120px; object-fit:contain; mix-blend-mode:multiply; margin-bottom:10px;">
                <h5 style="margin:0 0 5px 0; font-size:0.85rem; color:var(--primary);">${item.name}</h5>
                <small style="color:#64748b; text-transform:uppercase; font-size:0.7rem;">${item.bodyPart || item.target}</small>
                <div style="margin-top:10px; color:var(--secondary); font-size:0.8rem; font-weight:600;">+ Add</div>
            </div>
        `).join('');
    }

    // Load exercise library from EXERCISE_VIDEOS (Google Drive)
    window.loadExerciseLibrary = function(searchQuery = '') {
        const grid = document.getElementById('library-results');

        // Safety check for library loading
        if (typeof EXERCISE_VIDEOS === 'undefined') {
            grid.innerHTML = `
                <div style="grid-column:1/-1; padding:20px; text-align:center; color:red; background:#fee2e2; border-radius:12px;">
                    <strong>Error: Exercise Library Not Loaded</strong><br>
                    <div style="font-size:0.8rem; margin-top:5px;">Please verify 'exercise_videos.js' file exists and is in the same folder.</div>
                </div>`;
            return;
        }

        const allExercises = Object.keys(EXERCISE_VIDEOS);

        if (allExercises.length === 0) {
            grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:40px; color:#94a3b8;">Exercise library is empty.</div>';
            return;
        }

        // Filter by search query if provided
        let filteredExercises = allExercises;
        if (searchQuery) {
            const terms = searchQuery.toLowerCase().split(' ');
            filteredExercises = allExercises.filter(name => {
                const nameLower = name.toLowerCase();
                return terms.every(term => nameLower.includes(term));
            });
        }

        if (filteredExercises.length === 0) {
            grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:40px; color:#94a3b8;">No exercises found matching your search.</div>';
            return;
        }

        // Limit to first 100 exercises for performance
        const displayExercises = filteredExercises.slice(0, 100);

        grid.innerHTML = displayExercises.map(name => {
            const videoUrl = EXERCISE_VIDEOS[name];
            const escapedName = name.replace(/'/g, "\\'");
            const escapedUrl = videoUrl.replace(/'/g, "\\'");

            return `
                <div class="card" style="margin:0; text-align:center; padding:12px; cursor:pointer; transition:all 0.2s; position:relative;" onclick="openExerciseVideo('${escapedUrl}', '${escapedName}')">
                    <div style="width:100%; height:120px; background:#f8fafc; border-radius:8px; display:flex; align-items:center; justify-content:center; margin-bottom:10px; position:relative; overflow:hidden;">
                        <svg style="width:48px; height:48px; color:#cbd5e0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div style="position:absolute; bottom:5px; right:5px; background:rgba(0,0,0,0.6); color:white; font-size:0.65rem; padding:2px 6px; border-radius:4px;">VIDEO</div>
                    </div>
                    <h5 style="margin:0 0 5px 0; font-size:0.85rem; color:var(--primary); line-height:1.3;">${name}</h5>
                    <div style="margin-top:8px; color:var(--secondary); font-size:0.75rem; font-weight:600;">▶ Watch</div>
                </div>
            `;
        }).join('');

        if (displayExercises.length < filteredExercises.length) {
            grid.innerHTML += `<div style="grid-column:1/-1; text-align:center; padding:20px; color:#94a3b8; font-size:0.9rem;">Showing first ${displayExercises.length} of ${filteredExercises.length} exercises. Use search to narrow down.</div>`;
        }
    }

    window.addToWorkout = function(name, gif) {
        myWorkout.push({
            id: 'ex_' + Date.now(),
            name: name,
            thumb: gif,
            video: null, // No YT video for API items
            sets: 3
        });
        localStorage.setItem('myCurrentWorkout', JSON.stringify(myWorkout));
        alert(`${name} added to workout!`);
        switchTrackerView('workout');
    }

    window.removeExercise = function(index) {
        if(confirm('Remove this exercise?')) {
            myWorkout.splice(index, 1);
            localStorage.setItem('myCurrentWorkout', JSON.stringify(myWorkout));
            renderWorkoutList();
        }
    }

    window.promptApiKey = function() {
        const key = prompt("Enter your RapidAPI Key for ExerciseDB:", rapidApiKey);
        if(key) {
            rapidApiKey = key;
            localStorage.setItem('rapidApiKey', key);
            alert("API Key Saved.");
        }
    }

    window.switchTrackerView = function(view) {
        document.getElementById('view-workout').style.display = view === 'workout' ? 'block' : 'none';
        document.getElementById('view-library').style.display = view === 'library' ? 'block' : 'none';

        const btnW = document.getElementById('btn-workout');
        const btnL = document.getElementById('btn-library');

        if(view === 'workout') {
            btnW.style.color = 'var(--primary)'; btnW.style.borderBottomColor = 'var(--primary)';
            btnL.style.color = '#94a3b8'; btnL.style.borderBottomColor = 'transparent';
            renderWorkoutList();
        } else {
            btnL.style.color = 'var(--primary)'; btnL.style.borderBottomColor = 'var(--primary)';
            btnW.style.color = '#94a3b8'; btnW.style.borderBottomColor = 'transparent';
            loadExerciseLibrary(); // Load exercise library with videos
        }
    }
    
    // Style check circles
    document.head.insertAdjacentHTML('beforeend', `<style>.check-circle.completed { background: #10b981 !important; border-color: #10b981 !important; }</style>`);

    // --- END TRACKER LOGIC ---

    // Call this on load
    window.addEventListener('DOMContentLoaded', () => {
         loadMovementStudio();
    });

    // Chat
    window.toggleFloatingChat = function() {
        const box = document.getElementById('floating-chat-box');
        if(box.style.display === 'none' || !box.style.display) {
            box.style.display = 'flex';
        } else {
            box.style.display = 'none';
        }
    }

    window.sendChatMessage = function(inputEl) {
        let input;
        if (inputEl) {
            input = inputEl;
        } else {
            input = document.getElementById('chat-input');
        }
        
        const txt = input.value.trim();
        if(!txt) return;

        // Add user msg to ALL containers
        addMessage(txt, 'user');
        
        // Clear inputs
        document.querySelectorAll('input[type="text"]').forEach(el => {
             if(el.id === 'chat-input' || el.classList.contains('chat-input-field')) el.value = '';
        });
        
        // Save
        saveChatToStorage(txt, 'user');

        // Simulate AI Pending
        setTimeout(() => {
        }, 1000);
    }
    
    function addMessage(text, sender) {
        document.querySelectorAll('.chat-history-container').forEach(container => {
            const div = document.createElement('div');
            const isUser = sender === 'user';
            
            div.style.cssText = isUser 
                ? "align-self: flex-end; background: var(--primary); color: white; padding: 12px 16px; border-radius: 12px 12px 0 12px; max-width: 85%;"
                : "align-self: flex-start; background: white; padding: 12px 16px; border-radius: 12px 12px 12px 0; border: 1px solid #e2e8f0; max-width: 85%;";
                
            div.innerHTML = `
                <p style="margin: 0; font-size: 0.95rem;">${text}</p>
                <span style="font-size: 0.75rem; color: ${isUser ? 'rgba(255,255,255,0.7)' : '#94a3b8'}; display: block; margin-top: 5px; text-align: right;">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
            `;
            
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        });
    }

    function saveChatToStorage(text, sender) {
        const chat = JSON.parse(localStorage.getItem('myChatStats') || '[]');
        chat.push({ text, sender, time: new Date().toISOString() });
        localStorage.setItem('myChatStats', JSON.stringify(chat));
    }

    function loadChat() {
        const chat = JSON.parse(localStorage.getItem('myChatStats') || '[]');
        chat.forEach(msg => addMessage(msg.text, msg.sender));
    }

    // Journal History
    function loadJournalHistory() {
        const journalContainer = document.getElementById('journal-history');
        if (!journalContainer) return;
        journalContainer.innerHTML = ''; // Clear previous entries

        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        const weeks = ['week1', 'week2', 'week3', 'week4'];
        
        let hasEntries = false;

        weeks.forEach(week => {
            days.forEach(day => {
                const id = `${week}-${day}`;
                const savedReflection = localStorage.getItem('reflection_' + id);
                if (savedReflection) {
                    hasEntries = true;
                    const entryDiv = document.createElement('div');
                    entryDiv.style.cssText = 'margin-bottom: 20px; padding: 15px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;';
                    entryDiv.innerHTML = `
                        <h5 style="margin: 0 0 8px 0; color: var(--primary-light); font-size: 0.95rem;">${week.charAt(0).toUpperCase() + week.slice(1)} - ${day}</h5>
                        <p style="margin: 0; font-size: 0.9rem; color: #4a5568;">${savedReflection}</p>
                    `;
                    journalContainer.appendChild(entryDiv);
                }
            });
        });

        if (!hasEntries) {
            journalContainer.innerHTML = '<p style="font-style: italic; color: var(--text-muted);">No journal entries yet. Start writing your daily reflections!</p>';
        }
    }



</script>

<!-- SMOOTHIE BOOKLOAD -->
<div class="view-section" id="smoothies">
    <div class="hero-card" style="padding: 40px; text-align: left; background: linear-gradient(to right, #fdfbfb, #ebedee);">
        <div style="font-family:'Inter'; text-transform:uppercase; color:var(--secondary); font-weight:600; letter-spacing:1px; margin-bottom:10px;">Adrenal Rescue</div>
        <h1 style="margin-bottom: 15px;">The 28-Day Smoothie Guide</h1>
        <p style="font-size: 1.1rem; color: #555;">Delicious, grounding recipes to stop the jitters and stabilize blood sugar.</p>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px;">
        <!-- Recipes (Extracted from old bonuses) -->
        <div style="background: #fffdf0; border:1px solid #efe5c0; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_berry_blast.png" alt="Berry Blast" style="width:100%; height:180px; object-fit:cover; background:#e0dbe9;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">1. Cortisol-Control Berry Blast</h4>
                <div style="display:inline-block; background:#e0dbe9; color:#4a3b69; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">Antioxidant Shield</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1 cup frozen wild blueberries</li>
                    <li>1 handful spinach</li>
                    <li>1/4 avocado</li>
                    <li>1 scoop vanilla pea protein</li>
                    <li>1 tbsp chia seeds</li>
                    <li>1.5 cups almond milk</li>
                </ul>
            </div>
        </div>

        <div style="background: #f4f8f5; border:1px solid #dbece0; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_zen_green.png" alt="Zen Green" style="width:100%; height:180px; object-fit:cover; background:#dbece0;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">2. The "Zen Green" Rescue</h4>
                <div style="display:inline-block; background:#dbece0; color:#2d4a3e; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">Cooling & Hydrating</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1/2 cucumber, 1/2 pear</li>
                    <li>1 inch fresh ginger</li>
                    <li>Squeeze of lime</li>
                    <li>1 tbsp hemp seeds</li>
                    <li>Coconut water base</li>
                </ul>
            </div>
        </div>

        <div style="background: #fdf6f6; border:1px solid #eadddd; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_cacao_calm.png" alt="Cacao Calm" style="width:100%; height:180px; object-fit:cover; background:#eadddd;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">3. Cacao "Night Calm"</h4>
                <div style="display:inline-block; background:#eadddd; color:#5c4242; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">Serotonin Boost</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1 frozen banana</li>
                    <li>1 tbsp raw cacao powder</li>
                    <li>1 tbsp almond butter</li>
                    <li>Pinch sea salt</li>
                    <li>Oat milk base</li>
                </ul>
            </div>
        </div>

        <div style="background: #fffbef; border:1px solid #efeac0; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_golden_turmeric.png" alt="Golden Turmeric" style="width:100%; height:180px; object-fit:cover; background:#efeac0;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">4. Golden Anti-Inflammatory</h4>
                <div style="display:inline-block; background:#efeac0; color:#7a6b28; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">Joint Relief</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1/2 cup frozen mango</li>
                    <li>1 tsp turmeric + pinch pepper</li>
                    <li>1 scoop unflavored protein</li>
                    <li>1 tsp flax oil</li>
                    <li>Coconut milk base</li>
                </ul>
            </div>
        </div>

        <!-- Additional recipes to reach 10+ -->
        <div style="background: #f0fdf4; border:1px solid #dcfce7; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_avocado_lime.png" alt="Avocado Lime" style="width:100%; height:180px; object-fit:cover; background:#dcfce7;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">5. Creamy Avocado Lime</h4>
                <div style="display:inline-block; background:#dcfce7; color:#166534; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">Healthy Fats</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1/2 ripe avocado</li>
                    <li>Zest & juice of 1 lime</li>
                    <li>1 serving vanilla protein</li>
                    <li>Handful of spinach</li>
                    <li>Unsweetened cashew milk</li>
                </ul>
            </div>
        </div>

        <div style="background: #fdf2f8; border:1px solid #fce7f3; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_cherry_sleep.png" alt="Cherry Sleep" style="width:100%; height:180px; object-fit:cover; background:#fce7f3;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">6. Cherry Chamomile Sleep</h4>
                <div style="display:inline-block; background:#fce7f3; color:#9d174d; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">Natural Melatonin</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1 cup frozen tart cherries</li>
                    <li>1/2 cup chamomile tea (chilled)</li>
                    <li>1 tbsp almond butter</li>
                    <li>1 tsp honey (optional)</li>
                    <li>Almond milk base</li>
                </ul>
            </div>
        </div>

        <div style="background: #fff7ed; border:1px solid #ffedd5; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_pumpkin_pie.png" alt="Pumpkin Pie" style="width:100%; height:180px; object-fit:cover; background:#ffedd5;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">7. Pumpkin Pie Protein</h4>
                <div style="display:inline-block; background:#ffedd5; color:#9a3412; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">Zinc & Magnesium</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1/2 cup pumpkin pure</li>
                    <li>1 frozen banana</li>
                    <li>1 tsp pumpkin spice</li>
                    <li>1 tbsp pumpkin seeds</li>
                    <li>Vanilla protein & oat milk</li>
                </ul>
            </div>
        </div>

        <div style="background: #f0fdfa; border:1px solid #ccfbf1; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_matcha_mint.png" alt="Matcha Mint" style="width:100%; height:180px; object-fit:cover; background:#ccfbf1;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">8. Matcha Mint Energy</h4>
                <div style="display:inline-block; background:#ccfbf1; color:#115e59; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">L-Theanine Focus</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1 tsp matcha powder</li>
                    <li>Fresh mint leaves</li>
                    <li>1/2 frozen banana</li>
                    <li>Vanilla protein</li>
                    <li>Coconut milk base</li>
                </ul>
            </div>
        </div>

        <div style="background: #fff1f2; border:1px solid #ffe4e6; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_beet_berry.png" alt="Beet Berry" style="width:100%; height:180px; object-fit:cover; background:#ffe4e6;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">9. Beet & Berry Detox</h4>
                <div style="display:inline-block; background:#ffe4e6; color:#be123c; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">Liver Support</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1/4 raw beet (peeled)</li>
                    <li>1 cup mixed berries</li>
                    <li>1/2 lemon (juiced)</li>
                    <li>1 tsp flax seeds</li>
                    <li>Coconut water base</li>
                </ul>
            </div>
        </div>

        <div style="background: #fffbeb; border:1px solid #fef3c7; border-radius:12px; overflow: hidden;">
            <img src="/assets/smoothie_banana_nut.png" alt="Banana Bread" style="width:100%; height:180px; object-fit:cover; background:#fef3c7;">
            <div style="padding:20px;">
                <h4 style="color:var(--primary); margin:0 0 10px 0; font-size:1.1rem;">10. Banana Nut Pre-Workout</h4>
                <div style="display:inline-block; background:#fef3c7; color:#92400e; padding:4px 10px; border-radius:4px; font-size:0.75rem; font-weight:700; margin-bottom:15px; text-transform:uppercase;">Sustained Fuel</div>
                <ul style="margin:0; padding-left:20px; font-size:0.9rem; color:#4a5568;">
                    <li>1 large frozen banana</li>
                    <li>1/4 cup rolled oats</li>
                    <li>1 tbsp walnut butter</li>
                    <li>Dash of cinnamon</li>
                    <li>Almond milk base</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Print Button -->
    <div style="margin-top: 50px; text-align: center;">
         <p style="color:var(--text-muted);">Prefer a printed copy?</p>
         <a href="adrenal_smoothie_guide.html" target="_blank" style="text-decoration:none;"><button style="background:var(--primary); color:white; border:none; padding:12px 25px; border-radius:50px; cursor:pointer; font-size:1rem; font-weight: 500; transition: all 0.2s;" onmouseover="this.style.background='var(--primary-light)'" onmouseout="this.style.background='var(--primary)'">Download Printable Guide</button></a>
    </div>
</div>

<!-- MOVEMENT STUDIO SECTION -->
<div class="view-section" id="movement-archive">
    <div class="hero-card" style="padding: 40px; text-align: left; background: linear-gradient(135deg, #0f766e 0%, #115e59 100%); color: white;">
        <div style="font-family:'Inter'; text-transform:uppercase; color:#99f6e4; font-weight:600; letter-spacing:1px; margin-bottom:10px;">Body & Mind Connection</div>
        <h1 style="margin-bottom: 15px; color: white;">Movement Studio</h1>
        <p style="font-size: 1.1rem; color: #ccfbf1;">Gentle exercises designed to support hormone balance without spiking cortisol.</p>
    </div>

    <!-- MAIN PLAYER STAGE -->
    <div id="video-stage" style="display:none; margin-bottom:30px; background:black; border-radius:15px; overflow:hidden; aspect-ratio:16/9; position:relative;">
        <div id="video-placeholder" style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; flex-direction:column; background:#1e293b;">
            <div style="font-size:3rem; margin-bottom:20px;">??</div>
            <div id="video-title-display" style="color:white; font-size:1.2rem; font-weight:600;">Select a Workout</div>
            <p id="video-desc-display" style="color:#94a3b8; margin-top:10px;">Duration: -- min</p>
        </div>
        <button onclick="closeVideoStage()" style="position:absolute; top:20px; right:20px; background:rgba(0,0,0,0.5); color:white; border:none; width:40px; height:40px; border-radius:50%; cursor:pointer; font-size:1.2rem;">&times;</button>
    </div>

    <!-- EXERCISE DATABASE GRID -->
    <h3 style="color:var(--primary); margin: 30px 0 20px 0;">Featured Sessions</h3>
    
    <!-- EXERCISE TRACKER & DATABASE (Trainerize Style) -->
    <div id="tracker-interface" style="max-width: 800px; margin: 0 auto;">
        
        <!-- Tab Switcher -->
        <div style="display:flex; justify-content:center; gap:20px; margin-bottom:30px; border-bottom:1px solid #e2e8f0; padding-bottom:15px;">
            <button onclick="switchTrackerView('workout')" id="btn-workout" style="border:none; background:none; font-weight:700; color:var(--primary); border-bottom:3px solid var(--primary); padding-bottom:5px; cursor:pointer;">Today's Workout</button>
            <button onclick="switchTrackerView('library')" id="btn-library" style="border:none; background:none; font-weight:600; color:#94a3b8; border-bottom:3px solid transparent; padding-bottom:5px; cursor:pointer;">Exercise Library</button>
        </div>

        <!-- VIEW 1: TODAY'S WORKOUT -->
        <div id="view-workout">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
               <h3 style="margin:0; color:var(--primary); display:flex; align-items:center; gap:10px;">
                   <span>??</span> Today's Session
               </h3>
               <button onclick="saveWorkout()" style="background:var(--secondary); color:white; border:none; padding:10px 25px; border-radius:30px; font-weight:600; cursor:pointer; box-shadow:0 4px 10px rgba(16, 185, 129, 0.2);">
                   ? Complete
               </button>
            </div>

            <!-- Dynamic Workout List -->
            <div id="workout-list">
                <!-- Exercises injected here -->
            </div>
            
            <button onclick="switchTrackerView('library')" style="width:100%; padding:15px; border:2px dashed #cbd5e0; color:#64748b; background:transparent; border-radius:12px; font-weight:600; cursor:pointer; margin-top:20px; transition:all 0.2s;" onmouseover="this.style.borderColor='var(--primary)'; this.style.color='var(--primary)'" onmouseout="this.style.borderColor='#cbd5e0'; this.style.color='#64748b'">
                + Add Exercise
            </button>
        </div>

        <!-- VIEW 2: EXERCISE LIBRARY (DB) -->
        <div id="view-library" style="display:none;">
            <div style="background:#f8fafc; padding:20px; border-radius:12px; margin-bottom:20px;">
                <h4 style="margin:0 0 10px 0; color:#334155;">Search Exercise Library</h4>
                <div style="display:flex; gap:10px;">
                    <input type="text" id="db-search-input" placeholder="e.g. Squat, Lunge, Plank..." style="flex:1; padding:12px; border:1px solid #cbd5e0; border-radius:8px; outline:none;" onkeyup="if(event.key === 'Enter') loadExerciseLibrary(this.value)">
                    <button onclick="loadExerciseLibrary(document.getElementById('db-search-input').value)" style="background:var(--primary); color:white; border:none; padding:0 25px; border-radius:8px; cursor:pointer; font-weight:600;">Search</button>
                </div>
                <div style="margin-top:10px; font-size:0.8rem; color:#64748b;">
                    Browse 1700+ exercise videos from our library. All videos hosted on Google Drive.
                </div>
            </div>

            <div id="library-results" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap:15px;">
                <!-- Search Results -->
                <div style="grid-column:1/-1; text-align:center; padding:40px; color:#94a3b8;">
                    Use the search bar above to browse 1300+ exercises.
                </div>
            </div>
        </div>
    </div>

    <!-- Video Modal -->
    <div id="exercise-video-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; align-items:center; justify-content:center;">
        <div style="background:black; width:90%; max-width:500px; aspect-ratio:16/9; position:relative; border-radius:12px; overflow:hidden;">
             <button onclick="closeExerciseModal()" style="position:absolute; top:10px; right:10px; z-index:10; background:rgba(0,0,0,0.5); color:white; border:none; width:30px; height:30px; border-radius:50%; cursor:pointer;">&times;</button>
             <iframe id="modal-video-frame" width="100%" height="100%" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>
</div>

<!-- DINING OUT GUIDE -->
<div class="view-section" id="dining">
    <div class="hero-card" style="padding: 40px; text-align: left; background: linear-gradient(to right, #fdfbfb, #ebedee);">
        <div style="font-family:'Inter'; text-transform:uppercase; color:var(--secondary); font-weight:600; letter-spacing:1px; margin-bottom:10px;">The Vegan Socialite</div>
        <h1 style="margin-bottom: 15px;">Restaurant Cheat Sheet</h1>
        <p style="font-size: 1.1rem; color: #555;">Never worry about what to order. Use these cheat codes to stay on track mentre dining out.</p>
    </div>

    <div class="card">
        <div class="card-body" style="opacity: 1; max-height: none; padding: 30px;">
            <h3 style="color:var(--secondary); text-transform:uppercase; letter-spacing:1px; font-size:1rem; margin-top:0;">General Dining Rules</h3>
            <ul style="margin-bottom:30px;">
                <li><strong>Protein First:</strong> Always scan for the protein options (Tofu, Beans, Lentils).</li>
                <li><strong>Sauce on Side:</strong> Most hidden oils and sugars are in the dressing.</li>
                <li><strong>Hydrate:</strong> Order sparkling water with lime immediately to settle in.</li>
            </ul>

            <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:25px;">
                <div style="border:1px solid #eee; padding:25px; border-radius:15px; background: #fff;">
                    <h4 style="margin-top:0; color: var(--primary);">???? Italian</h4>
                    <p><strong>Order:</strong> Grilled vegetable antipasto, Minestrone soup, or simple Marinara pasta with a side of steamed spinach.</p>
                    <p style="font-size: 0.9rem; color: #e53e3e;"><strong>Avoid:</strong> Heavy cream sauces (Alfredo) or excessive bread basket grazing.</p>
                </div>
                <div style="border:1px solid #eee; padding:25px; border-radius:15px; background: #fff;">
                    <h4 style="margin-top:0; color: var(--primary);">???? Mexican</h4>
                    <p><strong>Order:</strong> The Burrito Bowl. Base of black beans and lettuce. Load up on Guacamole (healthy fats!) and Salsa.</p>
                    <p style="font-size: 0.9rem; color: #e53e3e;"><strong>Avoid:</strong> Fried chips and heavy cheese quesadillas.</p>
                </div>
                <div style="border:1px solid #eee; padding:25px; border-radius:15px; background: #fff;">
                    <h4 style="margin-top:0; color: var(--primary);">???? Thai</h4>
                    <p><strong>Order:</strong> Green or Red Curry with Tofu (coconut milk is great for hormones). Papaya Salad (Som Tum).</p>
                    <p style="font-size: 0.9rem; color: #e53e3e;"><strong>Avoid:</strong> Pad Thai (sugar) and deep-fried spring rolls.</p>
                </div>
                <div style="border:1px solid #eee; padding:25px; border-radius:15px; background: #fff;">
                    <h4 style="margin-top:0; color: var(--primary);">???? Japanese</h4>
                    <p><strong>Order:</strong> Edamame, Miso Soup, Seaweed Salad, Avocado/Cucumber Rolls, Agedashi Tofu.</p>
                    <p style="font-size: 0.9rem; color: #e53e3e;"><strong>Avoid:</strong> Tempura (deep fried) and hidden mayo in "spicy" rolls.</p>
                </div>
                <div style="border:1px solid #eee; padding:25px; border-radius:15px; background: #fff;">
                    <h4 style="margin-top:0; color: var(--primary);">?? Middle Eastern</h4>
                    <p><strong>Order:</strong> Hummus, Baba Ganoush, Falafel (request baked), Tabbouleh, grilled veggie skewers.</p>
                    <p style="font-size: 0.9rem; color: #e53e3e;"><strong>Avoid:</strong> Deep-fried pita chips and heavy oil-based tahini swirls.</p>
                </div>
                <div style="border:1px solid #eee; padding:25px; border-radius:15px; background: #fff;">
                    <h4 style="margin-top:0; color: var(--primary);">?? Indian</h4>
                    <p><strong>Order:</strong> Dal Tadka, Chana Masala, Baingan Bharta (baked eggplant). High fiber and spices.</p>
                    <p style="font-size: 0.9rem; color: #e53e3e;"><strong>Avoid:</strong> Heavy cream curries (Korma) or excessive Naan bread.</p>
                </div>
                <div style="border:1px solid #eee; padding:25px; border-radius:15px; background: #fff;">
                    <h4 style="margin-top:0; color: var(--primary);">???? Greek</h4>
                    <p><strong>Order:</strong> Giant Beans (Gigantes), Greek Salad (no feta), Stuffed vine leaves (Dolmades).</p>
                    <p style="font-size: 0.9rem; color: #e53e3e;"><strong>Avoid:</strong> Feta-heavy dishes and phyllo pastries (Spanakopita).</p>
                </div>
                <div style="border:1px solid #eee; padding:25px; border-radius:15px; background: #fff;">
                    <h4 style="margin-top:0; color: var(--primary);">?? Fast Casual</h4>
                    <p><strong>Order:</strong> Portobello Mushroom Burger (lettuce wrap), Bean-based Veggie Bowl, sweet potato sides.</p>
                    <p style="font-size: 0.9rem; color: #e53e3e;"><strong>Avoid:</strong> Processed "fake meat" patties and white flour buns.</p>
                </div>
            </div>

            <!-- Print Button -->
            <div style="margin-top: 50px; text-align: center;">
                 <p style="color:var(--text-muted);">Want a pocket guide?</p>
                 <a href="adrenal_dining_guide.html" target="_blank" style="text-decoration:none;"><button style="background:var(--primary); color:white; border:none; padding:12px 25px; border-radius:50px; cursor:pointer; font-size:1rem; font-weight: 500; transition: all 0.2s;" onmouseover="this.style.background='var(--primary-light)'" onmouseout="this.style.background='var(--primary)'">Download Printable Guide</button></a>
            </div>
        </div>
    </div>
</div>








<div class="view-section" id="bonuses">
     <div class="hero-card" style="padding: 40px; text-align: left; background: linear-gradient(to right, #fdfbfb, #ebedee);">
        <div style="font-family:'Inter'; text-transform:uppercase; color:var(--secondary); font-weight:600; letter-spacing:1px; margin-bottom:10px;">Exclusive Extras</div>
        <h1 style="margin-bottom: 15px;">Your Protocol Bonuses</h1>
        <p style="font-size: 1.1rem; color: #555;">Tools to support your adrenal recovery journey.</p>
    </div>

    <!-- The content of the original bonuses section (Smoothie, Dining, Acupressure) has been moved to dedicated sections above. -->
    <!-- This section can now be used for other bonuses or removed if no other bonuses are planned. -->
</div>

<div class="view-section" id="week1">
<div class="sub-nav">
<button class="sub-btn active" onclick="switchDay('week1', 'overview')">Overview</button>
<button class="sub-btn" onclick="switchDay('week1', 'Monday')">Mon</button><button class="sub-btn" onclick="switchDay('week1', 'Tuesday')">Tue</button><button class="sub-btn" onclick="switchDay('week1', 'Wednesday')">Wed</button><button class="sub-btn" onclick="switchDay('week1', 'Thursday')">Thu</button><button class="sub-btn" onclick="switchDay('week1', 'Friday')">Fri</button><button class="sub-btn" onclick="switchDay('week1', 'Saturday')">Sat</button><button class="sub-btn" onclick="switchDay('week1', 'Sunday')">Sun</button>
</div>
<div class="day-view active" id="week1-overview">
<div class="hero-card" style="padding: 40px; text-align: left; background: linear-gradient(to right, #eef2f3, #ffffff);">
<div style="font-family:'Inter'; text-transform:uppercase; color:var(--secondary); font-weight:600; letter-spacing:1px; margin-bottom:10px;">Week 1</div>
<h1 style="margin-bottom: 15px;">Reset and Debloat</h1>
<p style="font-size: 1.1rem; color: #555;">Flush inflammation with mineral-rich hydration.</p>

</div>
<div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">Why It Works</div><div class="expand-icon">+</div></div>
<div class="card-body">
<p>This week reduces the inflammatory load on your adrenal glands. By removing common stressors and flooding your system with minerals (potassium/magnesium), we signal safety to your nervous system, allowing baseline cortisol levels to drop so true restoration can begin.</p>
</div></div>
</div>
<div class="day-view" id="week1-Monday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Ginger Pear Smoothie</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Ginger Pear Smoothie" src="/assets/ginger_pear_smoothie.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Pear 170g</li><li>Spinach 50g</li><li>Cucumber 80g</li><li>Pea protein powder 30g</li><li>Ground flaxseed 15g</li><li>Aloe vera juice 30ml</li><li>Almond butter 15g</li><li>Water 100ml</li></ul>
<h4>Preparation</h4>
<p>Blend all ingredients until smooth. Almond butter adds healthy fats.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Cranberry Chia Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cranberry Chia Pudding" src="/assets/cranberry_chia_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia seeds 15g</li><li>Pea protein 10g</li><li>Almond milk 100ml</li><li>Cranberries 10g</li><li>Berries 50g</li><li>Brazil nuts 5g</li></ul>
<h4>Preparation</h4>
<p>Soak chia. Top with berries/nuts.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Stuffed Sweet Potato</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Stuffed Sweet Potato" src="/assets/stuffed_sweet_potato.jpg" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Sweet potato 200g</li><li>Quinoa 150g</li><li>Black beans 150g</li><li>Kale 50g</li><li>Tahini 15g</li><li>Lemon juice</li><li>Pumpkin seeds 10g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Roast:</strong> Bake sweet potato (whole or cubed) until tender (approx 25-30 mins).<br/>
<strong>2. Stuff/Assemble:</strong> Mix cooked quinoa, rinsed black beans, and massaged kale. Stuff into the split potato or arrange in a bowl.<br/>
<strong>3. Serve:</strong> Drizzle with a dressing made of tahini and lemon juice. Top with pumpkin seeds.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Fennel Lime Tonic &amp; Nori</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fennel Lime Tonic &amp; Nori" src="/assets/fennel_lime_tonic_nori.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Fennel bulb 100g</li><li>Lime juice 20ml</li><li>Nori 2g</li></ul>
<h4>Preparation</h4>
<p>Juice fennel. Mix with lime water. Serve with toasted nori.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Miso Glazed Tempeh</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Miso Glazed Tempeh" src="/assets/miso_glazed_tempeh.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tempeh 200g</li><li>Miso 15g</li><li>Tamari 10ml</li><li>Maple 10ml</li><li>Bok choy 150g</li><li>Cauliflower rice 150g</li><li>Sesame oil</li><li>Tahini 20g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Marinate:</strong> Whisk miso, tamari, maple syrup, and sesame oil. Cube tempeh and toss in marinade. Let sit for 15-30 mins.<br/>
<strong>2. Cook Tempeh:</strong> Pan-fry tempeh over medium-high heat until golden and caramelized (approx 5-8 mins).<br/>
<strong>3. Sides:</strong> Steam bok choy (3-4 mins). Saut cauliflower rice with a splash of water or oil until tender.<br/>
<strong>4. Serve:</strong> Assemble in a bowl and drizzle with any remaining fresh tahini.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Chamomile Maca Moon Milk</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Chamomile Maca Moon Milk" src="/assets/chamomile_maca_moon_milk.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Maca 5g</li><li>Cinnamon</li><li>Magnesium</li><li>Chamomile tea</li></ul>
<h4>Preparation</h4>
<p>Steep tea in hot milk. Whisk powders.</p>
</div>
</div>
</div><div class="day-view" id="week1-Tuesday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Cucumber Mint Green Juice + Tofu Scramble</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cucumber Mint Green Juice + Tofu Scramble" src="/assets/cucumber_mint_juice_tofu_scramble.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cucumber 200g</li><li>Fresh mint 10g</li><li>Firm tofu 200g</li><li>Asparagus 100g</li><li>Dill 5g</li><li>Olive oil 10ml</li><li>Turmeric 2g</li><li>Black salt 1g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Juice:</strong> Juice cucumber and mint (or blend and strain).<br/>
<strong>2. Scramble:</strong> Crumble firm tofu. Saut in olive oil with turmeric and black salt for 5 mins.<br/>
<strong>3. Veggies:</strong> Steam asparagus until tender-crisp. Chop and mix with tofu and fresh dill.<br/>
<strong>4. Serve:</strong> Plate the scramble with the green juice on the side.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Fennel Lime Tonic &amp; Nori</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fennel Lime Tonic &amp; Nori" src="/assets/fennel_lime_tonic_nori.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Fennel bulb 100g</li><li>Lime juice 20ml</li><li>Nori 2g</li></ul>
<h4>Preparation</h4>
<p>Juice fennel. Mix with lime water. Serve with toasted nori.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Rainbow Collard Wraps</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Rainbow Collard Wraps" src="/assets/rainbow_collard_wraps.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Collard greens 6 leaves</li><li>Carrot 100g</li><li>Red lentils 250g</li><li>Avocado 100g</li><li>Bean sprouts 50g</li><li>Tahini 20g</li><li>Garlic 2g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Prepare Leaves:</strong> Blanch collard leaves in boiling water for 30 seconds, then plunge into ice water. Pat dry and trim the thick stem spine carefully.<br/>
<strong>2. Make Paste:</strong> Mash red lentils (cooked) with tahini, minced garlic, and a squeeze of lemon until spreadable.<br/>
<strong>3. Assemble:</strong> Spread lentil paste on each leaf. Top with shredded carrot, avocado slices, and bean sprouts.<br/>
<strong>4. Roll:</strong> Fold sides in and roll tightly like a burrito.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Mineral Broth &amp; Edamame</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Mineral Broth &amp; Edamame" src="/assets/mineral_broth_edamame.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Edamame 150g</li><li>Miso 15g</li><li>Veg broth 250ml</li><li>Wakame 5g</li><li>Scallions</li></ul>
<h4>Preparation</h4>
<p>Heat broth with miso/wakame. Add edamame.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Coconut Curry Red Lentil Soup</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Coconut Curry Red Lentil Soup" src="/assets/coconut_curry_red_lentil_soup.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Red lentils 250g</li><li>Light coconut milk 200ml</li><li>Curry paste 20g</li><li>Delicata squash 150g</li><li>Onion/Garlic/Ginger</li><li>Stock 300ml</li></ul>
<h4>Preparation</h4>
<p><strong>1. Roast Squash:</strong> Toss delicata squash cubes with oil and roast at 200C for 20-25 mins until tender.<br/>
<strong>2. Base:</strong> Saut diced onion, garlic, and ginger until fragrant. Stir in curry paste for 1 minute.<br/>
<strong>3. Simmer:</strong> Add red lentils, coconut milk, and stock. Simmer for 15-20 mins until lentils are soft.<br/>
<strong>4. Serve:</strong> Ladle soup into bowls and top with roasted squash.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Lemon Balm Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lemon Balm Tea" src="/assets/lemon_balm_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Lemon balm tea</li><li>Ground flax 5g</li></ul>
<h4>Preparation</h4>
<p>Steep tea. Stir in flax.</p>
</div>
</div>
</div><div class="day-view" id="week1-Wednesday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Ginger Pear Smoothie</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Ginger Pear Smoothie" src="/assets/ginger_pear_smoothie.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Pear 170g</li><li>Spinach 50g</li><li>Cucumber 80g</li><li>Pea protein powder 30g</li><li>Ground flaxseed 15g</li><li>Aloe vera juice 30ml</li><li>Almond butter 15g</li><li>Water 100ml</li></ul>
<h4>Preparation</h4>
<p>Blend all ingredients until smooth. Almond butter adds healthy fats.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Mineral Broth &amp; Edamame</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Mineral Broth &amp; Edamame" src="/assets/mineral_broth_edamame.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Edamame 150g</li><li>Miso 15g</li><li>Veg broth 250ml</li><li>Wakame 5g</li><li>Scallions</li></ul>
<h4>Preparation</h4>
<p>Heat broth with miso/wakame. Add edamame.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Glow Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Glow Bowl" src="/assets/glow_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Baby greens 100g</li><li>Fennel bulb 150g</li><li>White beans 200g</li><li>Artichoke hearts 100g</li><li>Pesto 25g</li><li>Lemon/Oil</li></ul>
<h4>Preparation</h4>
<p>Roast fennel. Arrange greens. Top with beans/artichokes/fennel. Drizzle with pesto.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Cranberry Chia Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cranberry Chia Pudding" src="/assets/cranberry_chia_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia seeds 15g</li><li>Pea protein 10g</li><li>Almond milk 100ml</li><li>Cranberries 10g</li><li>Berries 50g</li><li>Brazil nuts 5g</li></ul>
<h4>Preparation</h4>
<p>Soak chia. Top with berries/nuts.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Zucchini Noodle Pho</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Zucchini Noodle Pho" src="/assets/zucchini_noodle_pho.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Zoodles 250g</li><li>Veg broth 300ml</li><li>Star anise/Cinnamon</li><li>Tofu 200g</li><li>Edamame 50g</li><li>Shiitake 100g</li><li>Mung sprouts</li><li>Basil</li></ul>
<h4>Preparation</h4>
<p><strong>1. Infuse Broth:</strong> Simmer vegetable broth with star anise, cinnamon stick, ginger slices, and onion for 15 mins. Strain if desired.<br/>
<strong>2. Add Veggies:</strong> Add sliced shiitake mushrooms and simmer for 5 mins.<br/>
<strong>3. Finish:</strong> Add tofu cubes and zucchini noodles (zoodles) for just the last 1-2 minutes to warm through without overcooking.<br/>
<strong>4. Serve:</strong> Top with fresh basil, sprouts, and lime.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Golden Milk</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Golden Milk" src="/assets/golden_milk.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Turmeric</li><li>Ginger</li><li>Coconut oil 3g</li><li>Triphala</li><li>Magnesium</li></ul>
<h4>Preparation</h4>
<p>Whisk all ingredients in hot milk.</p>
</div>
</div>
</div><div class="day-view" id="week1-Thursday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Cucumber Mint Green Juice + Tofu Scramble</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cucumber Mint Green Juice + Tofu Scramble" src="/assets/cucumber_mint_juice_tofu_scramble.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>

<h4>Ingredients</h4>
<ul><li>Cucumber 200g</li><li>Fresh mint 10g</li><li>Firm tofu 200g</li><li>Asparagus 100g</li><li>Dill 5g</li><li>Olive oil 10ml</li><li>Turmeric 2g</li><li>Black salt 1g</li></ul>
<h4>Preparation</h4>
<p>Juice cucumber/mint. Saut crumbled tofu with spices. Steam asparagus. Mix tofu with dill/asparagus. Serve with juice.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Cranberry Chia Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cranberry Chia Pudding" src="/assets/cranberry_chia_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia seeds 15g</li><li>Pea protein 10g</li><li>Almond milk 100ml</li><li>Cranberries 10g</li><li>Berries 50g</li><li>Brazil nuts 5g</li></ul>
<h4>Preparation</h4>
<p>Soak chia. Top with berries/nuts.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Lemony Quinoa &amp; Chickpea Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lemony Quinoa &amp; Chickpea Bowl" src="/assets/lemony_quinoa_chickpea_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chickpeas 100g</li><li>Quinoa 150g</li><li>Pumpkin seeds 20g</li><li>Mint &amp; Parsley 10g</li><li>Lemon juice 15ml</li><li>Plant protein 20g</li></ul>
<h4>Preparation</h4>
<p>Assemble bowl. Whisk lemon juice/oil dressing. Drizzle over.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Fennel Lime Tonic &amp; Nori</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fennel Lime Tonic &amp; Nori" src="/assets/fennel_lime_tonic_nori.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Fennel bulb 100g</li><li>Lime juice 20ml</li><li>Nori 2g</li></ul>
<h4>Preparation</h4>
<p>Juice fennel. Mix with lime water. Serve with toasted nori.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Miso Glazed Tempeh</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Miso Glazed Tempeh" src="/assets/miso_glazed_tempeh.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tempeh 200g</li><li>Miso 15g</li><li>Tamari 10ml</li><li>Maple 10ml</li><li>Bok choy 150g</li><li>Cauliflower rice 150g</li><li>Sesame oil</li><li>Tahini 20g</li></ul>
<h4>Preparation</h4>
<p>Marinate/fry tempeh. Steam bok choy. Saut rice. Serve bowl style.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Chamomile Maca Moon Milk</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Chamomile Maca Moon Milk" src="/assets/chamomile_maca_moon_milk.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Maca 5g</li><li>Cinnamon</li><li>Magnesium</li><li>Chamomile tea</li></ul>
<h4>Preparation</h4>
<p>Steep tea in hot milk. Whisk powders.</p>
</div>
</div>
</div><div class="day-view" id="week1-Friday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Ginger Pear Smoothie</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Ginger Pear Smoothie" src="/assets/ginger_pear_smoothie.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Pear 170g</li><li>Spinach 50g</li><li>Cucumber 80g</li><li>Pea protein powder 30g</li><li>Ground flaxseed 15g</li><li>Aloe vera juice 30ml</li><li>Almond butter 15g</li><li>Water 100ml</li></ul>
<h4>Preparation</h4>
<p>Blend all ingredients until smooth. Almond butter adds healthy fats.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Fennel Lime Tonic &amp; Nori</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fennel Lime Tonic &amp; Nori" src="/assets/fennel_lime_tonic_nori.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Fennel bulb 100g</li><li>Lime juice 20ml</li><li>Nori 2g</li></ul>
<h4>Preparation</h4>
<p>Juice fennel. Mix with lime water. Serve with toasted nori.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Rainbow Collard Wraps</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Rainbow Collard Wraps" src="/assets/rainbow_collard_wraps.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Collard greens 6 leaves</li><li>Carrot 100g</li><li>Red lentils 250g</li><li>Avocado 100g</li><li>Bean sprouts 50g</li><li>Tahini 20g</li><li>Garlic 2g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Prepare Leaves:</strong> Blanch collard leaves in boiling water for 30 seconds, then plunge into ice water. Pat dry and trim the thick stem spine carefully.<br/>
<strong>2. Make Paste:</strong> Mash red lentils (cooked) with tahini, minced garlic, and a squeeze of lemon until spreadable.<br/>
<strong>3. Assemble:</strong> Spread lentil paste on each leaf. Top with shredded carrot, avocado slices, and bean sprouts.<br/>
<strong>4. Roll:</strong> Fold sides in and roll tightly like a burrito.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Mineral Broth &amp; Edamame</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Mineral Broth &amp; Edamame" src="/assets/mineral_broth_edamame.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Edamame 150g</li><li>Miso 15g</li><li>Veg broth 250ml</li><li>Wakame 5g</li><li>Scallions</li></ul>
<h4>Preparation</h4>
<p>Heat broth with miso/wakame. Add edamame.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Coconut Curry Red Lentil Soup</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Coconut Curry Red Lentil Soup" src="/assets/coconut_curry_red_lentil_soup.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Red lentils 250g</li><li>Light coconut milk 200ml</li><li>Curry paste 20g</li><li>Delicata squash 150g</li><li>Onion/Garlic/Ginger</li><li>Stock 300ml</li></ul>
<h4>Preparation</h4>
<p><strong>1. Roast Squash:</strong> Toss delicata squash cubes with oil and roast at 200C for 20-25 mins until tender.<br/>
<strong>2. Base:</strong> Saut diced onion, garlic, and ginger until fragrant. Stir in curry paste for 1 minute.<br/>
<strong>3. Simmer:</strong> Add red lentils, coconut milk, and stock. Simmer for 15-20 mins until lentils are soft.<br/>
<strong>4. Serve:</strong> Ladle soup into bowls and top with roasted squash.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Lemon Balm Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lemon Balm Tea" src="/assets/lemon_balm_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Lemon balm tea</li><li>Ground flax 5g</li></ul>
<h4>Preparation</h4>
<p>Steep tea. Stir in flax.</p>
</div>
</div>
</div><div class="day-view" id="week1-Saturday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Cucumber Mint Green Juice + Tofu Scramble</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cucumber Mint Green Juice + Tofu Scramble" src="/assets/cucumber_mint_juice_tofu_scramble.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>

<h4>Ingredients</h4>
<ul><li>Cucumber 200g</li><li>Fresh mint 10g</li><li>Firm tofu 200g</li><li>Asparagus 100g</li><li>Dill 5g</li><li>Olive oil 10ml</li><li>Turmeric 2g</li><li>Black salt 1g</li></ul>
<h4>Preparation</h4>
<p>Juice cucumber/mint. Saut crumbled tofu with spices. Steam asparagus. Mix tofu with dill/asparagus. Serve with juice.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Mineral Broth &amp; Edamame</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Mineral Broth &amp; Edamame" src="/assets/mineral_broth_edamame.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Edamame 150g</li><li>Miso 15g</li><li>Veg broth 250ml</li><li>Wakame 5g</li><li>Scallions</li></ul>
<h4>Preparation</h4>
<p>Heat broth with miso/wakame. Add edamame.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Glow Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Glow Bowl" src="/assets/glow_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Baby greens 100g</li><li>Fennel bulb 150g</li><li>White beans 200g</li><li>Artichoke hearts 100g</li><li>Pesto 25g</li><li>Lemon/Oil</li></ul>
<h4>Preparation</h4>
<p>Roast fennel. Arrange greens. Top with beans/artichokes/fennel. Drizzle with pesto.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Cranberry Chia Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cranberry Chia Pudding" src="/assets/cranberry_chia_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia seeds 15g</li><li>Pea protein 10g</li><li>Almond milk 100ml</li><li>Cranberries 10g</li><li>Berries 50g</li><li>Brazil nuts 5g</li></ul>
<h4>Preparation</h4>
<p>Soak chia. Top with berries/nuts.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Zucchini Noodle Pho</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Zucchini Noodle Pho" src="/assets/zucchini_noodle_pho.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Zoodles 250g</li><li>Veg broth 300ml</li><li>Star anise/Cinnamon</li><li>Tofu 200g</li><li>Shiitake 100g</li><li>Mung sprouts</li><li>Basil</li></ul>
<h4>Preparation</h4>
<p><strong>1. Infuse Broth:</strong> Simmer vegetable broth with star anise, cinnamon stick, ginger slices, and onion for 15 mins. Strain if desired.<br/>
<strong>2. Add Veggies:</strong> Add sliced shiitake mushrooms and simmer for 5 mins.<br/>
<strong>3. Finish:</strong> Add tofu cubes and zucchini noodles (zoodles) for just the last 1-2 minutes to warm through without overcooking.<br/>
<strong>4. Serve:</strong> Top with fresh basil, sprouts, and lime.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Golden Milk</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Golden Milk" src="/assets/golden_milk.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Turmeric</li><li>Ginger</li><li>Coconut oil 3g</li><li>Triphala</li><li>Magnesium</li></ul>
<h4>Preparation</h4>
<p>Whisk all ingredients in hot milk.</p>
</div>
</div>
</div><div class="day-view" id="week1-Sunday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Ginger Pear Smoothie</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Ginger Pear Smoothie" src="/assets/ginger_pear_smoothie.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Pear 170g</li><li>Spinach 50g</li><li>Cucumber 80g</li><li>Pea protein powder 30g</li><li>Ground flaxseed 15g</li><li>Aloe vera juice 30ml</li><li>Almond butter 15g</li><li>Water 100ml</li></ul>
<h4>Preparation</h4>
<p>Blend all ingredients until smooth. Almond butter adds healthy fats.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Cranberry Chia Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cranberry Chia Pudding" src="/assets/cranberry_chia_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia seeds 15g</li><li>Pea protein 10g</li><li>Almond milk 100ml</li><li>Cranberries 10g</li><li>Berries 50g</li><li>Brazil nuts 5g</li></ul>
<h4>Preparation</h4>
<p>Soak chia. Top with berries/nuts.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Lemony Quinoa &amp; Chickpea Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lemony Quinoa &amp; Chickpea Bowl" src="/assets/lemony_quinoa_chickpea_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chickpeas 100g</li><li>Quinoa 150g</li><li>Pumpkin seeds 20g</li><li>Mint &amp; Parsley 10g</li><li>Lemon juice 15ml</li><li>Plant protein 20g</li></ul>
<h4>Preparation</h4>
<p>Assemble bowl. Whisk lemon juice/oil dressing. Drizzle over.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Fennel Lime Tonic &amp; Nori</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fennel Lime Tonic &amp; Nori" src="/assets/fennel_lime_tonic_nori.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Fennel bulb 100g</li><li>Lime juice 20ml</li><li>Nori 2g</li></ul>
<h4>Preparation</h4>
<p>Juice fennel. Mix with lime water. Serve with toasted nori.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Miso Glazed Tempeh</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Miso Glazed Tempeh" src="/assets/miso_glazed_tempeh.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tempeh 200g</li><li>Miso 15g</li><li>Tamari 10ml</li><li>Maple 10ml</li><li>Bok choy 150g</li><li>Cauliflower rice 150g</li><li>Sesame oil</li><li>Tahini 20g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Marinate:</strong> Whisk miso, tamari, maple syrup, and sesame oil. Cube tempeh and toss in marinade. Let sit for 15-30 mins.<br/>
<strong>2. Cook Tempeh:</strong> Pan-fry tempeh over medium-high heat until golden and caramelized (approx 5-8 mins).<br/>
<strong>3. Sides:</strong> Steam bok choy (3-4 mins). Saut cauliflower rice with a splash of water or oil until tender.<br/>
<strong>4. Serve:</strong> Assemble in a bowl and drizzle with any remaining fresh tahini.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Chamomile Maca Moon Milk</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Chamomile Maca Moon Milk" src="/assets/chamomile_maca_moon_milk.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Maca 5g</li><li>Cinnamon</li><li>Magnesium</li><li>Chamomile tea</li></ul>
<h4>Preparation</h4>
<p>Steep tea in hot milk. Whisk powders.</p>
</div>
</div>
</div>
</div>
<div class="view-section" id="week2">
<div class="sub-nav">
<button class="sub-btn active" onclick="switchDay('week2', 'overview')">Overview</button>
<button class="sub-btn" onclick="switchDay('week2', 'Monday')">Mon</button><button class="sub-btn" onclick="switchDay('week2', 'Tuesday')">Tue</button><button class="sub-btn" onclick="switchDay('week2', 'Wednesday')">Wed</button><button class="sub-btn" onclick="switchDay('week2', 'Thursday')">Thu</button><button class="sub-btn" onclick="switchDay('week2', 'Friday')">Fri</button><button class="sub-btn" onclick="switchDay('week2', 'Saturday')">Sat</button><button class="sub-btn" onclick="switchDay('week2', 'Sunday')">Sun</button>
</div>
<div class="day-view active" id="week2-overview">
<div class="hero-card" style="padding: 40px; text-align: left; background: linear-gradient(to right, #fff5f5, #ffffff);">
<div style="font-family:'Inter'; text-transform:uppercase; color:var(--secondary); font-weight:600; letter-spacing:1px; margin-bottom:10px;">Week 2</div>
<h1 style="margin-bottom: 15px;">Strength &amp; Blood Sugar</h1>
<p style="font-size: 1.1rem; color: #555;">Higher protein and fiber dense carbs.</p>

</div>
<div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">Why It Works</div><div class="expand-icon">+</div></div>
<div class="card-body">
<p>Bio-availability is key. We pair protein with slow-burning complex carbs to prevent the blood sugar dips that trigger "panic" cortisol spikes. This steady energy supply keeps your mood stable and your adrenal output calm throughout the day.</p>
</div></div>
</div>
<div class="day-view" id="week2-Monday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Warm Apple Pie Oat Bake</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Warm Apple Pie Oat Bake" src="/assets/warm_apple_pie_oat_bake.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Oats 50g</li><li>Apple 120g</li><li>Cardamom</li><li>Hemp yogurt 80g</li><li>Pear 80g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Mix:</strong> Combine rolled oats, chopped apple, cardamom, and a splash of almond milk/water in a baking dish.<br/>
<strong>2. Bake:</strong> Bake at 180C for 20-25 minutes until oats are set and apples are soft.<br/>
<strong>3. Serve:</strong> Top with a dollop of hemp yogurt and fresh pear slices.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Cinnamon Maca Latte</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cinnamon Maca Latte" src="/assets/cinnamon_maca_latte.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Maca</li><li>Cinnamon</li><li>Edamame 50g (side)</li></ul>
<h4>Preparation</h4>
<p>Heat milk/spices. Serve with edamame.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Farro Power Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Farro Power Bowl" src="/assets/farro_power_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Farro 80g</li><li>Tempeh 150g</li><li>Brussels sprouts 100g</li><li>Pomegranate</li><li>Tahini</li></ul>
<h4>Preparation</h4>
<p><strong>1. Prep Components:</strong> Cook farro according to package instructions. Roast halved Brussels sprouts at 200C for 20 mins.<br/>
<strong>2. Tempeh:</strong> Pan-fry tempeh cubes with a splash of tamari until crispy.<br/>
<strong>3. Dressing:</strong> Whisk tahini, lemon juice, 1 tbsp water, and a drop of maple syrup until smooth.<br/>
<strong>4. Assemble:</strong> Combine farro, sprouts, and tempeh. Top with pomegranate seeds and dressing.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Cacao Chia Protein Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cacao Chia Protein Pudding" src="/assets/cacao_chia_protein_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia 15g</li><li>Cacao</li><li>Protein powder</li><li>Raspberries</li></ul>
<h4>Preparation</h4>
<p>Soak chia/powders. Top with raspberries.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Walnut Crusted Tofu</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Walnut Crusted Tofu" src="/assets/walnut_crusted_tofu.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tofu 200g</li><li>Walnuts 20g</li><li>Sweet potato 200g</li><li>Green beans</li></ul>
<h4>Preparation</h4>
<p><strong>1. Crust Tofu:</strong> Mix crushed walnuts with spices. Dip pressed tofu slabs in almond milk, then press into walnut mix.<br/>
<strong>2. Bake:</strong> Place tofu and sweet potato wedges on a baking sheet. Bake at 200C for 25-30 minutes until crispy.<br/>
<strong>3. Veggies:</strong> Briefly steam or saut green beans with garlic.<br/>
<strong>4. Serve:</strong> Plate tofu with fries and beans.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Reishi Hot Chocolate</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Reishi Hot Chocolate" src="/assets/reishi_hot_chocolate.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk</li><li>Cacao</li><li>Reishi</li><li>Monk fruit</li></ul>
<h4>Preparation</h4>
<p>Whisk heated ingredients.</p>
</div>
</div>
</div><div class="day-view" id="week2-Tuesday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Savory Chickpea Scramble</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Savory Chickpea Scramble" src="/assets/savory_chickpea_scramble.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chickpeas 100g</li><li>Tofu 200g</li><li>Spinach 100g</li><li>Pesto 10g</li><li>Tomatoes</li></ul>
<h4>Preparation</h4>
<p><strong>1. Scramble Base:</strong> Roughly mash chickpeas and tofu with a fork.<br/>
<strong>2. Saut:</strong> Saut chopped onion and tomatoes in a pan until soft. Add chickpea/tofu mix.<br/>
<strong>3. Season:</strong> Add turmeric, black salt (kala namak), and pepper. Cook 5-7 mins.<br/>
<strong>4. Finish:</strong> Stir in fresh spinach until wilted. Remove from heat and fold in pesto.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Cacao Chia Protein Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cacao Chia Protein Pudding" src="/assets/cacao_chia_protein_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia 15g</li><li>Cacao</li><li>Protein powder</li><li>Raspberries</li></ul>
<h4>Preparation</h4>
<p>Soak chia/powders. Top with raspberries.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Hearty Tempeh Chili</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Hearty Tempeh Chili" src="/assets/hearty_tempeh_chili.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tempeh 200g</li><li>Kidney beans 100g</li><li>Cacao</li><li>Tomatoes 200g</li><li>Chili spices</li></ul>
<h4>Preparation</h4>
<p><strong>1. Saut:</strong> Cook onions, garlic, and peppers until soft. Add crumbled tempeh and brown lightly.<br/>
<strong>2. Simmer:</strong> Add kidney beans, crushed tomatoes, chili powder, cumin, and vegetable broth. Simmer for 20-30 mins to thicken.<br/>
<strong>3. Finish:</strong> Stir in raw cacao powder right before serving for depth.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Lime Spiced Pepitas &amp; Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lime Spiced Pepitas &amp; Tea" src="/assets/lime_spiced_pepitas_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Pepitas 40g</li><li>Lime zest/juice</li><li>Chili</li></ul>
<h4>Preparation</h4>
<p>Roast pepitas with spices. Serve with tea.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Sheet Pan Lemon Seitan</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Sheet Pan Lemon Seitan" src="/assets/sheet_pan_lemon_seitan.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Seitan 150g</li><li>Asparagus 150g</li><li>Fennel 100g</li><li>Orange</li></ul>
<h4>Preparation</h4>
<p><strong>1. Toss:</strong> Combine seitan chunks, asparagus spears, and fennel wedges on a sheet pan. Toss with olive oil, lemon juice, dried oregano, and garlic powder.<br/>
<strong>2. Bake:</strong> Roast at 200C for 20 minutes until golden and veggies are tender.<br/>
<strong>3. Serve:</strong> Garnish with fresh orange zest or slices.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Tulsi Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Tulsi Tea" src="/assets/tulsi_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tulsi tea</li><li>Lemon</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week2-Wednesday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Blue Spirulina Smoothie Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Blue Spirulina Smoothie Bowl" src="/assets/blue_spirulina_smoothie_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>

<h4>Ingredients</h4>
<ul><li>Cauli rice 100g</li><li>Blueberries 150g</li><li>Pea protein</li><li>Spirulina</li><li>Tahini 20g</li></ul>
<h4>Preparation</h4>
<p>Blend all. Decoration optional.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Lime Spiced Pepitas &amp; Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lime Spiced Pepitas &amp; Tea" src="/assets/lime_spiced_pepitas_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Pepitas 40g</li><li>Lime zest/juice</li><li>Chili</li></ul>
<h4>Preparation</h4>
<p>Roast pepitas with spices. Serve with tea.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Mediterranean Lentil Salad</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Mediterranean Lentil Salad" src="/assets/mediterranean_lentil_salad.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Lentils 100g</li><li>Eggplant 200g</li><li>Tahini 15g</li><li>Parsley</li><li>Tomatoes</li></ul>
<h4>Preparation</h4>
<p><strong>1. Roast Eggplant:</strong> Cube eggplant, toss with oil and salt. Roast at 200C for 25 mins.<br/>
<strong>2. Salad Base:</strong> Combine cooked lentils, roasted eggplant, diced tomatoes, chopped parsley, and cucumber.<br/>
<strong>3. Dressing:</strong> Whisk tahini, lemon juice, garlic, and a splash of water.<br/>
<strong>4. Serve:</strong> Toss salad with dressing while warm or cold.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Cinnamon Maca Latte</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cinnamon Maca Latte" src="/assets/cinnamon_maca_latte.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Maca</li><li>Cinnamon</li><li>Edamame 50g (side)</li></ul>
<h4>Preparation</h4>
<p>Heat milk/spices. Serve with edamame.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Rainbow Sushi Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Rainbow Sushi Bowl" src="/assets/rainbow_sushi_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Black rice 150g</li><li>Smoked tofu 150g</li><li>Avocado</li><li>Cucumber</li><li>Nori</li></ul>
<h4>Preparation</h4>
<p><strong>1. Rice:</strong> Cook black rice according to package. Stir in a little rice vinegar when done.<br/>
<strong>2. Prep:</strong> Cube smoked tofu. Slice avocado and cucumber. Cut nori into small strips.<br/>
<strong>3. Assemble:</strong> Arrange everything in a bowl.<br/>
<strong>4. Dress:</strong> Drizzle with tamari and sesame oil.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Sage &amp; Lavender Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Sage &amp; Lavender Tea" src="/assets/sage_lavender_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Sage</li><li>Lavender</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week2-Thursday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Overnight Buckwheat Groats</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Overnight Buckwheat Groats" src="/assets/overnight_buckwheat_groats.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Buckwheat 60g</li><li>Almond milk 150ml</li><li>Cacao nibs</li><li>Cherries</li><li>Alhond yogurt</li></ul>
<h4>Preparation</h4>
<p>Soak overnight. Top with cherries/yogurt.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Cinnamon Maca Latte</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cinnamon Maca Latte" src="/assets/cinnamon_maca_latte.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Maca</li><li>Cinnamon</li><li>Edamame 50g (side)</li></ul>
<h4>Preparation</h4>
<p>Heat milk/spices. Serve with edamame.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Farro Power Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Farro Power Bowl" src="/assets/farro_power_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Farro 80g</li><li>Tempeh 150g</li><li>Brussels sprouts 100g</li><li>Pomegranate</li><li>Tahini</li></ul>
<h4>Preparation</h4>
<p><strong>1. Prep Components:</strong> Cook farro according to package instructions. Roast halved Brussels sprouts at 200C for 20 mins.<br/>
<strong>2. Tempeh:</strong> Pan-fry tempeh cubes with a splash of tamari until crispy.<br/>
<strong>3. Dressing:</strong> Whisk tahini, lemon juice, 1 tbsp water, and a drop of maple syrup until smooth.<br/>
<strong>4. Assemble:</strong> Combine farro, sprouts, and tempeh. Top with pomegranate seeds and dressing.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Cacao Chia Protein Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cacao Chia Protein Pudding" src="/assets/cacao_chia_protein_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia 15g</li><li>Cacao</li><li>Protein powder</li><li>Raspberries</li></ul>
<h4>Preparation</h4>
<p>Soak chia/powders. Top with raspberries.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Walnut Crusted Tofu</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Walnut Crusted Tofu" src="/assets/walnut_crusted_tofu.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tofu 200g</li><li>Walnuts 20g</li><li>Sweet potato 200g</li><li>Green beans</li></ul>
<h4>Preparation</h4>
<p><strong>1. Crust Tofu:</strong> Mix crushed walnuts with spices. Dip pressed tofu slabs in almond milk, then press into walnut mix.<br/>
<strong>2. Bake:</strong> Place tofu and sweet potato wedges on a baking sheet. Bake at 200C for 25-30 minutes until crispy.<br/>
<strong>3. Veggies:</strong> Briefly steam or saut green beans with garlic.<br/>
<strong>4. Serve:</strong> Plate tofu with fries and beans.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Reishi Hot Chocolate</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Reishi Hot Chocolate" src="/assets/reishi_hot_chocolate.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk</li><li>Cacao</li><li>Reishi</li><li>Monk fruit</li></ul>
<h4>Preparation</h4>
<p>Whisk heated ingredients.</p>
</div>
</div>
</div><div class="day-view" id="week2-Friday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Warm Apple Pie Oat Bake</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Warm Apple Pie Oat Bake" src="/assets/warm_apple_pie_oat_bake.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Oats 50g</li><li>Apple 120g</li><li>Cardamom</li><li>Hemp yogurt 80g</li><li>Pear 80g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Mix:</strong> Combine rolled oats, chopped apple, cardamom, and a splash of almond milk/water in a baking dish.<br/>
<strong>2. Bake:</strong> Bake at 180C for 20-25 minutes until oats are set and apples are soft.<br/>
<strong>3. Serve:</strong> Top with a dollop of hemp yogurt and fresh pear slices.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Cacao Chia Protein Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cacao Chia Protein Pudding" src="/assets/cacao_chia_protein_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia 15g</li><li>Cacao</li><li>Protein powder</li><li>Raspberries</li></ul>
<h4>Preparation</h4>
<p>Soak chia/powders. Top with raspberries.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Hearty Tempeh Chili</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Hearty Tempeh Chili" src="/assets/hearty_tempeh_chili.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tempeh 200g</li><li>Kidney beans 100g</li><li>Cacao</li><li>Tomatoes 200g</li><li>Chili spices</li></ul>
<h4>Preparation</h4>
<p><strong>1. Saut:</strong> Cook onions, garlic, and peppers until soft. Add crumbled tempeh and brown lightly.<br/>
<strong>2. Simmer:</strong> Add kidney beans, crushed tomatoes, chili powder, cumin, and vegetable broth. Simmer for 20-30 mins to thicken.<br/>
<strong>3. Finish:</strong> Stir in raw cacao powder right before serving for depth.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Lime Spiced Pepitas &amp; Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lime Spiced Pepitas &amp; Tea" src="/assets/lime_spiced_pepitas_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Pepitas 40g</li><li>Lime zest/juice</li><li>Chili</li></ul>
<h4>Preparation</h4>
<p>Roast pepitas with spices. Serve with tea.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Sheet Pan Lemon Seitan</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Sheet Pan Lemon Seitan" src="/assets/sheet_pan_lemon_seitan.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Seitan 150g</li><li>Asparagus 150g</li><li>Fennel 100g</li><li>Orange</li></ul>
<h4>Preparation</h4>
<p><strong>1. Toss:</strong> Combine seitan chunks, asparagus spears, and fennel wedges on a sheet pan. Toss with olive oil, lemon juice, dried oregano, and garlic powder.<br/>
<strong>2. Bake:</strong> Roast at 200C for 20 minutes until golden and veggies are tender.<br/>
<strong>3. Serve:</strong> Garnish with fresh orange zest or slices.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Tulsi Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Tulsi Tea" src="/assets/tulsi_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tulsi tea</li><li>Lemon</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week2-Saturday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Savory Chickpea Scramble</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Savory Chickpea Scramble" src="/assets/savory_chickpea_scramble.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chickpeas 100g</li><li>Tofu 200g</li><li>Spinach 100g</li><li>Pesto 10g</li><li>Tomatoes</li></ul>
<h4>Preparation</h4>
<p><strong>1. Scramble Base:</strong> Roughly mash chickpeas and tofu with a fork.<br/>
<strong>2. Saut:</strong> Saut chopped onion and tomatoes in a pan until soft. Add chickpea/tofu mix.<br/>
<strong>3. Season:</strong> Add turmeric, black salt (kala namak), and pepper. Cook 5-7 mins.<br/>
<strong>4. Finish:</strong> Stir in fresh spinach until wilted. Remove from heat and fold in pesto.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Lime Spiced Pepitas &amp; Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lime Spiced Pepitas &amp; Tea" src="/assets/lime_spiced_pepitas_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Pepitas 40g</li><li>Lime zest/juice</li><li>Chili</li></ul>
<h4>Preparation</h4>
<p>Roast pepitas with spices. Serve with tea.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Mediterranean Lentil Salad</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Mediterranean Lentil Salad" src="/assets/mediterranean_lentil_salad.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Lentils 100g</li><li>Eggplant 200g</li><li>Tahini 15g</li><li>Parsley</li><li>Tomatoes</li></ul>
<h4>Preparation</h4>
<p><strong>1. Roast Eggplant:</strong> Cube eggplant, toss with oil and salt. Roast at 200C for 25 mins.<br/>
<strong>2. Salad Base:</strong> Combine cooked lentils, roasted eggplant, diced tomatoes, chopped parsley, and cucumber.<br/>
<strong>3. Dressing:</strong> Whisk tahini, lemon juice, garlic, and a splash of water.<br/>
<strong>4. Serve:</strong> Toss salad with dressing while warm or cold.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Cinnamon Maca Latte</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cinnamon Maca Latte" src="/assets/cinnamon_maca_latte.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Maca</li><li>Cinnamon</li><li>Edamame 50g (side)</li></ul>
<h4>Preparation</h4>
<p>Heat milk/spices. Serve with edamame.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Rainbow Sushi Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Rainbow Sushi Bowl" src="/assets/rainbow_sushi_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Black rice 150g</li><li>Smoked tofu 150g</li><li>Avocado</li><li>Cucumber</li><li>Nori</li></ul>
<h4>Preparation</h4>
<p><strong>1. Rice:</strong> Cook black rice according to package. Stir in a little rice vinegar when done.<br/>
<strong>2. Prep:</strong> Cube smoked tofu. Slice avocado and cucumber. Cut nori into small strips.<br/>
<strong>3. Assemble:</strong> Arrange everything in a bowl.<br/>
<strong>4. Dress:</strong> Drizzle with tamari and sesame oil.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Sage &amp; Lavender Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Sage &amp; Lavender Tea" src="/assets/sage_lavender_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Sage</li><li>Lavender</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week2-Sunday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Blue Spirulina Smoothie Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Blue Spirulina Smoothie Bowl" src="/assets/blue_spirulina_smoothie_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>

<h4>Ingredients</h4>
<ul><li>Cauli rice 100g</li><li>Blueberries 150g</li><li>Pea protein</li><li>Spirulina</li><li>Tahini 20g</li></ul>
<h4>Preparation</h4>
<p>Blend all. Decoration optional.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Cinnamon Maca Latte</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cinnamon Maca Latte" src="/assets/cinnamon_maca_latte.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk 200ml</li><li>Maca</li><li>Cinnamon</li><li>Edamame 50g (side)</li></ul>
<h4>Preparation</h4>
<p>Heat milk/spices. Serve with edamame.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Farro Power Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Farro Power Bowl" src="/assets/farro_power_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Farro 80g</li><li>Tempeh 150g</li><li>Brussels sprouts 100g</li><li>Pomegranate</li><li>Tahini</li></ul>
<h4>Preparation</h4>
<p>Roast sprouts. Fry tempeh. Assemble bowl with tahini dressing.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Cacao Chia Protein Pudding</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cacao Chia Protein Pudding" src="/assets/cacao_chia_protein_pudding.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia 15g</li><li>Cacao</li><li>Protein powder</li><li>Raspberries</li></ul>
<h4>Preparation</h4>
<p>Soak chia/powders. Top with raspberries.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Walnut Crusted Tofu</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Walnut Crusted Tofu" src="/assets/walnut_crusted_tofu.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tofu 200g</li><li>Walnuts 20g</li><li>Sweet potato 200g</li><li>Green beans</li></ul>
<h4>Preparation</h4>
<p>Crust tofu/fry. Roast potato. Saut beans.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Reishi Hot Chocolate</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Reishi Hot Chocolate" src="/assets/reishi_hot_chocolate.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Almond milk</li><li>Cacao</li><li>Reishi</li><li>Monk fruit</li></ul>
<h4>Preparation</h4>
<p>Whisk heated ingredients.</p>
</div>
</div>
</div>
</div>
<div class="view-section" id="week3">
<div class="sub-nav">
<button class="sub-btn active" onclick="switchDay('week3', 'overview')">Overview</button>
<button class="sub-btn" onclick="switchDay('week3', 'Monday')">Mon</button><button class="sub-btn" onclick="switchDay('week3', 'Tuesday')">Tue</button><button class="sub-btn" onclick="switchDay('week3', 'Wednesday')">Wed</button><button class="sub-btn" onclick="switchDay('week3', 'Thursday')">Thu</button><button class="sub-btn" onclick="switchDay('week3', 'Friday')">Fri</button><button class="sub-btn" onclick="switchDay('week3', 'Saturday')">Sat</button><button class="sub-btn" onclick="switchDay('week3', 'Sunday')">Sun</button>
</div>
<div class="day-view active" id="week3-overview">
<div class="hero-card" style="padding: 40px; text-align: left; background: linear-gradient(to right, #fbfdef, #ffffff);">
<div style="font-family:'Inter'; text-transform:uppercase; color:var(--secondary); font-weight:600; letter-spacing:1px; margin-bottom:10px;">Week 3</div>
<h1 style="margin-bottom: 15px;">Metabolism Boost</h1>
<p style="font-size: 1.1rem; color: #555;">Thermogenic foods and spices.</p>

</div>
<div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">Why It Works</div><div class="expand-icon">+</div></div>
<div class="card-body">
<p>We gently support your metabolic rate with warming, nutrient-dense foods rather than stimulants. Selenium and Zinc nourish the thyroidyour adrenals' partner in energy productionensuring you feel energized without the "tired-wired" crash.</p>
</div></div>
</div>
<div class="day-view" id="week3-Monday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Fire Tonic &amp; Lentil Waffles</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fire Tonic &amp; Lentil Waffles" src="/assets/fire_tonic_lentil_waffles.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tonic: ACV, Ginger, Cayenne</li><li>Lentils 150g</li><li>Chickpea flour 50g</li><li>Kimchi</li><li>Avocado</li></ul>
<h4>Preparation</h4>
<p><strong>1. Tonic:</strong> Mix warm water, apple cider vinegar, grated ginger, and a pinch of cayenne.<br/>
<strong>2. Waffles:</strong> Blend soaked red lentils (or use flour), chickpea flour, water, baking powder, and salt. Cook in a greased waffle iron until crisp.<br/>
<strong>3. Serve:</strong> Drink tonic first. Top waffles with kimchi and sliced avocado.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Grapefruit &amp; Pumpkin Seed Brittle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Grapefruit &amp; Pumpkin Seed Brittle" src="/assets/grapefruit_pumpkin_seed_brittle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Grapefruit</li><li>Pumpkin seeds 20g</li><li>Maple</li><li>Chili</li></ul>
<h4>Preparation</h4>
<p>Bake seeds. Serve with grapefruit.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Thai Basil Zucchini Noodles</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Thai Basil Zucchini Noodles" src="/assets/thai_basil_zucchini_noodles.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Zoodles 300g</li><li>Tofu 200g</li><li>Almond butter</li><li>Coconut milk</li><li>Thai basil</li></ul>
<h4>Preparation</h4>
<p><strong>1. Tofu:</strong> Pan-fry tofu cubes with soy sauce until golden.<br/>
<strong>2. Sauce:</strong> Whisk almond butter, coconut milk, lime juice, ginger, and garlic until creamy.<br/>
<strong>3. Noodles:</strong> Spiralize zucchini. Toss zoodles in the sauce briefly to warm (don't cook too long).<br/>
<strong>4. Serve:</strong> Top with tofu and fresh Thai basil leaves.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Rosemary Cacao Truffle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Rosemary Cacao Truffle" src="/assets/rosemary_cacao_truffle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao</li><li>Protein</li><li>Coconut oil</li><li>Rosemary</li></ul>
<h4>Preparation</h4>
<p>Mix and chill.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Turmeric Cauliflower Steaks</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Turmeric Cauliflower Steaks" src="/assets/turmeric_cauliflower_steaks.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cauliflower 300g</li><li>Beluga lentils 150g</li><li>Kale</li><li>Tahini</li></ul>
<h4>Preparation</h4>
<p><strong>1. Steaks:</strong> Slice cauliflower into thick "steaks". Brush with oil, turmeric, cumin, and paprika.<br/>
<strong>2. Roast:</strong> Bake at 200C for 25-30 minutes, flipping halfway, until tender and charred.<br/>
<strong>3. Base:</strong> Warm the cooked beluga lentils and massage the kale with lemon.<br/>
<strong>4. Serve:</strong> Place steaks over lentils/kale and drizzle with tahini.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Dandelion Root Latte</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Dandelion Root Latte" src="/assets/dandelion_root_latte.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Dandelion root</li><li>Almond milk</li></ul>
<h4>Preparation</h4>
<p>Heat and whisk.</p>
</div>
</div>
</div><div class="day-view" id="week3-Tuesday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Carrot Cake Chia Parfait</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Carrot Cake Chia Parfait" src="/assets/carrot_cake_chia_parfait.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia 30g</li><li>Carrot 100g</li><li>Cashew butter</li><li>Coconut cream</li><li>Walnuts</li></ul>
<h4>Preparation</h4>
<p>Layer chia pudding with grated carrot/cream.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Rosemary Cacao Truffle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Rosemary Cacao Truffle" src="/assets/rosemary_cacao_truffle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao</li><li>Protein</li><li>Coconut oil</li><li>Rosemary</li></ul>
<h4>Preparation</h4>
<p>Mix and chill.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Moroccan Chickpea Stew</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Moroccan Chickpea Stew" src="/assets/moroccan_chickpea_stew.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chickpeas 200g</li><li>Millet 150g</li><li>Apricots</li><li>Tomatoes</li><li>Spinach</li></ul>
<h4>Preparation</h4>
<p><strong>1. Base:</strong> Saut onion, garlic, and ginger with cumin, cinnamon, and turmeric.<br/>
<strong>2. Simmer:</strong> Add chickpeas, chopped tomatoes, dried apricots, and broth. Simmer for 20 mins.<br/>
<strong>3. Greens:</strong> Stir in spinach at the end to wilt.<br/>
<strong>4. Serve:</strong> Spoon stew over fluffy cooked millet.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Green Apple &amp; Almond Butter</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Green Apple &amp; Almond Butter" src="/assets/green_apple_almond_butter.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Apple</li><li>Almond butter</li></ul>
<h4>Preparation</h4>
<p>Slice and dip.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Grilled Tofu Tikka</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Grilled Tofu Tikka" src="/assets/grilled_tofu_tikka.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tofu 200g</li><li>Cauli rice 150g</li><li>Cucumber/Mint salad</li><li>Coconut yogurt</li></ul>
<h4>Preparation</h4>
<p><strong>1. Marinate:</strong> Coat tofu in coconut yogurt mixed with tikka spices, lime, and ginger. Let sit for 20+ mins.<br/>
<strong>2. Grill/Bake:</strong> Grill skewers or bake tofu at 220C until edges are charred (approx 20 mins).<br/>
<strong>3. Sides:</strong> Serve with heated cauliflower rice and a cooling cucumber/mint salad.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Holy Basil Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Holy Basil Tea" src="/assets/tulsi_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Fresh basil</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week3-Wednesday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Metabolic Mocha Smoothie</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Metabolic Mocha Smoothie" src="/assets/metabolic_mocha_smoothie.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cold brew</li><li>Cacao</li><li>Chili</li><li>Pea protein</li><li>Banana</li></ul>
<h4>Preparation</h4>
<p>Blend.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Green Apple &amp; Almond Butter</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Green Apple &amp; Almond Butter" src="/assets/green_apple_almond_butter.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Apple</li><li>Almond butter</li></ul>
<h4>Preparation</h4>
<p>Slice and dip.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Charred Broccoli &amp; Bean Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Charred Broccoli &amp; Bean Bowl" src="/assets/charred_broccoli_bean_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Broccoli 200g</li><li>Cannellini beans 150g</li><li>Romesco sauce</li></ul>
<h4>Preparation</h4>
<p><strong>1. Char:</strong> Toss broccoli florets with oil and roast at high heat (220C) or pan-sear until charred/browned.<br/>
<strong>2. Combine:</strong> Mix warm broccoli with cannellini beans.<br/>
<strong>3. Serve:</strong> Toss generously with Romesco sauce (roasted red pepper &amp; almond sauce).</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Grapefruit &amp; Pumpkin Seed Brittle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Grapefruit &amp; Pumpkin Seed Brittle" src="/assets/grapefruit_pumpkin_seed_brittle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Grapefruit</li><li>Pumpkin seeds 20g</li><li>Maple</li><li>Chili</li></ul>
<h4>Preparation</h4>
<p>Bake seeds. Serve with grapefruit.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Turmeric Cauliflower Steaks</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Turmeric Cauliflower Steaks" src="/assets/turmeric_cauliflower_steaks.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cauliflower 300g</li><li>Beluga lentils 150g</li><li>Kale</li><li>Tahini</li></ul>
<h4>Preparation</h4>
<p>Roast cauliflower. Serve over lentils/kale.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Fennel Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fennel Tea" src="/assets/fennel_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Fennel seeds</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week3-Thursday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Fire Tonic &amp; Lentil Waffles</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fire Tonic &amp; Lentil Waffles" src="/assets/fire_tonic_lentil_waffles.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tonic: ACV, Ginger, Cayenne</li><li>Lentils 150g</li><li>Chickpea flour 50g</li><li>Kimchi</li><li>Avocado</li></ul>
<h4>Preparation</h4>
<p>Drink tonic. Blend/cook waffles. Top with kimchi/avo.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Grapefruit &amp; Pumpkin Seed Brittle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Grapefruit &amp; Pumpkin Seed Brittle" src="/assets/grapefruit_pumpkin_seed_brittle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Grapefruit</li><li>Pumpkin seeds 20g</li><li>Maple</li><li>Chili</li></ul>
<h4>Preparation</h4>
<p>Bake seeds. Serve with grapefruit.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Sweet Potato Nourish Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Sweet Potato Nourish Bowl" src="/assets/sweet_potato_nourish_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Sweet potato 200g</li><li>Kale</li><li>Quinoa</li><li>Maple Miso dressing</li></ul>
<h4>Preparation</h4>
<p><strong>1. Roast:</strong> Roast sweet potato wedges at 200C until tender.<br/>
<strong>2. Kale:</strong> Remove kale stems and massage leaves with a little olive oil and salt to soften.<br/>
<strong>3. Dressing:</strong> Whisk maple, miso, and apple cider vinegar.<br/>
<strong>4. Serve:</strong> Assemble bowl with quinoa, potato, kale, and drizzle with dressing.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Rosemary Cacao Truffle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Rosemary Cacao Truffle" src="/assets/rosemary_cacao_truffle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao</li><li>Protein</li><li>Coconut oil</li><li>Rosemary</li></ul>
<h4>Preparation</h4>
<p>Mix and chill.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Grilled Tofu Tikka</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Grilled Tofu Tikka" src="/assets/grilled_tofu_tikka.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tofu 200g</li><li>Cauli rice 150g</li><li>Cucumber/Mint salad</li><li>Coconut yogurt</li></ul>
<h4>Preparation</h4>
<p>Grill marinated tofu. Serve with rice/salad.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Dandelion Root Latte</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Dandelion Root Latte" src="/assets/dandelion_root_latte.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Dandelion root</li><li>Almond milk</li></ul>
<h4>Preparation</h4>
<p>Heat and whisk.</p>
</div>
</div>
</div><div class="day-view" id="week3-Friday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Carrot Cake Chia Parfait</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Carrot Cake Chia Parfait" src="/assets/carrot_cake_chia_parfait.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chia 30g</li><li>Carrot 100g</li><li>Cashew butter</li><li>Coconut cream</li><li>Walnuts</li></ul>
<h4>Preparation</h4>
<p>Layer chia pudding with grated carrot/cream.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Rosemary Cacao Truffle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Rosemary Cacao Truffle" src="/assets/rosemary_cacao_truffle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao</li><li>Protein</li><li>Coconut oil</li><li>Rosemary</li></ul>
<h4>Preparation</h4>
<p>Mix and chill.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Thai Basil Zucchini Noodles</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Thai Basil Zucchini Noodles" src="/assets/thai_basil_zucchini_noodles.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Zoodles 300g</li><li>Tofu 200g</li><li>Almond butter</li><li>Coconut milk</li><li>Thai basil</li></ul>
<h4>Preparation</h4>
<p><strong>1. Tofu:</strong> Pan-fry tofu cubes with soy sauce until golden.<br/>
<strong>2. Sauce:</strong> Whisk almond butter, coconut milk, lime juice, ginger, and garlic until creamy.<br/>
<strong>3. Noodles:</strong> Spiralize zucchini. Toss zoodles in the sauce briefly to warm (don't cook too long).<br/>
<strong>4. Serve:</strong> Top with tofu and fresh Thai basil leaves.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Green Apple &amp; Almond Butter</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Green Apple &amp; Almond Butter" src="/assets/green_apple_almond_butter.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Apple</li><li>Almond butter</li></ul>
<h4>Preparation</h4>
<p>Slice and dip.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Turmeric Cauliflower Steaks</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Turmeric Cauliflower Steaks" src="/assets/turmeric_cauliflower_steaks.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cauliflower 300g</li><li>Beluga lentils 150g</li><li>Kale</li><li>Tahini</li></ul>
<h4>Preparation</h4>
<p>Roast cauliflower. Serve over lentils/kale.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Holy Basil Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Holy Basil Tea" src="/assets/tulsi_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Fresh basil</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week3-Saturday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Metabolic Mocha Smoothie</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Metabolic Mocha Smoothie" src="/assets/metabolic_mocha_smoothie.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cold brew</li><li>Cacao</li><li>Chili</li><li>Pea protein</li><li>Banana</li></ul>
<h4>Preparation</h4>
<p>Blend.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Green Apple &amp; Almond Butter</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Green Apple &amp; Almond Butter" src="/assets/green_apple_almond_butter.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Apple</li><li>Almond butter</li></ul>
<h4>Preparation</h4>
<p>Slice and dip.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Moroccan Chickpea Stew</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Moroccan Chickpea Stew" src="/assets/moroccan_chickpea_stew.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Chickpeas 200g</li><li>Millet 150g</li><li>Apricots</li><li>Tomatoes</li><li>Spinach</li></ul>
<h4>Preparation</h4>
<p><strong>1. Base:</strong> Saut onion, garlic, and ginger with cumin, cinnamon, and turmeric.<br/>
<strong>2. Simmer:</strong> Add chickpeas, chopped tomatoes, dried apricots, and broth. Simmer for 20 mins.<br/>
<strong>3. Greens:</strong> Stir in spinach at the end to wilt.<br/>
<strong>4. Serve:</strong> Spoon stew over fluffy cooked millet.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Grapefruit &amp; Pumpkin Seed Brittle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Grapefruit &amp; Pumpkin Seed Brittle" src="/assets/grapefruit_pumpkin_seed_brittle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Grapefruit</li><li>Pumpkin seeds 20g</li><li>Maple</li><li>Chili</li></ul>
<h4>Preparation</h4>
<p>Bake seeds. Serve with grapefruit.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Grilled Tofu Tikka</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Grilled Tofu Tikka" src="/assets/grilled_tofu_tikka.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tofu 200g</li><li>Cauli rice 150g</li><li>Cucumber/Mint salad</li><li>Coconut yogurt</li></ul>
<h4>Preparation</h4>
<p><strong>1. Marinate:</strong> Coat tofu in coconut yogurt mixed with tikka spices, lime, and ginger. Let sit for 20+ mins.<br/>
<strong>2. Grill/Bake:</strong> Grill skewers or bake tofu at 220C until edges are charred (approx 20 mins).<br/>
<strong>3. Sides:</strong> Serve with heated cauliflower rice and a cooling cucumber/mint salad.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Fennel Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fennel Tea" src="/assets/fennel_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Fennel seeds</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week3-Sunday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Fire Tonic &amp; Lentil Waffles</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Fire Tonic &amp; Lentil Waffles" src="/assets/fire_tonic_lentil_waffles.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tonic: ACV, Ginger, Cayenne</li><li>Lentils 150g</li><li>Chickpea flour 50g</li><li>Kimchi</li><li>Avocado</li></ul>
<h4>Preparation</h4>
<p><strong>1. Tonic:</strong> Mix warm water, apple cider vinegar, grated ginger, and a pinch of cayenne.<br/>
<strong>2. Waffles:</strong> Blend soaked red lentils (or use flour), chickpea flour, water, baking powder, and salt. Cook in a greased waffle iron until crisp.<br/>
<strong>3. Serve:</strong> Drink tonic first. Top waffles with kimchi and sliced avocado.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Grapefruit &amp; Pumpkin Seed Brittle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Grapefruit &amp; Pumpkin Seed Brittle" src="/assets/grapefruit_pumpkin_seed_brittle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Grapefruit</li><li>Pumpkin seeds 20g</li><li>Maple</li><li>Chili</li></ul>
<h4>Preparation</h4>
<p>Bake seeds. Serve with grapefruit.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Charred Broccoli &amp; Bean Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Charred Broccoli &amp; Bean Bowl" src="/assets/charred_broccoli_bean_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Broccoli 200g</li><li>Cannellini beans 150g</li><li>Romesco sauce</li></ul>
<h4>Preparation</h4>
<p><strong>1. Char:</strong> Toss broccoli florets with oil and roast at high heat (220C) or pan-sear until charred/browned.<br/>
<strong>2. Combine:</strong> Mix warm broccoli with cannellini beans.<br/>
<strong>3. Serve:</strong> Toss generously with Romesco sauce (roasted red pepper &amp; almond sauce).</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Rosemary Cacao Truffle</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Rosemary Cacao Truffle" src="/assets/rosemary_cacao_truffle.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao</li><li>Protein</li><li>Coconut oil</li><li>Rosemary</li></ul>
<h4>Preparation</h4>
<p>Mix and chill.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Turmeric Cauliflower Steaks</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Turmeric Cauliflower Steaks" src="/assets/turmeric_cauliflower_steaks.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cauliflower 300g</li><li>Beluga lentils 150g</li><li>Kale</li><li>Tahini</li></ul>
<h4>Preparation</h4>
<p>Roast cauliflower. Serve over lentils/kale.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Dandelion Root Latte</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Dandelion Root Latte" src="/assets/dandelion_root_latte.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Dandelion root</li><li>Almond milk</li></ul>
<h4>Preparation</h4>
<p>Heat and whisk.</p>
</div>
</div>
</div>
</div>
<div class="view-section" id="week4">
<div class="sub-nav">
<button class="sub-btn active" onclick="switchDay('week4', 'overview')">Overview</button>
<button class="sub-btn" onclick="switchDay('week4', 'Monday')">Mon</button><button class="sub-btn" onclick="switchDay('week4', 'Tuesday')">Tue</button><button class="sub-btn" onclick="switchDay('week4', 'Wednesday')">Wed</button><button class="sub-btn" onclick="switchDay('week4', 'Thursday')">Thu</button><button class="sub-btn" onclick="switchDay('week4', 'Friday')">Fri</button><button class="sub-btn" onclick="switchDay('week4', 'Saturday')">Sat</button><button class="sub-btn" onclick="switchDay('week4', 'Sunday')">Sun</button>
</div>
<div class="day-view active" id="week4-overview">
<div class="hero-card" style="padding: 40px; text-align: left; background: linear-gradient(to right, #f7f9fc, #ffffff);">
<div style="font-family:'Inter'; text-transform:uppercase; color:var(--secondary); font-weight:600; letter-spacing:1px; margin-bottom:10px;">Week 4</div>
<h1 style="margin-bottom: 15px;">Hormone Harmony</h1>
<p style="font-size: 1.1rem; color: #555;">Mood stabilizing carbs and magnesium.</p>

</div>
<div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">Why It Works</div><div class="expand-icon">+</div></div>
<div class="card-body">
<p>Strategic carbohydrates in the evening boost serotonin production, your brain's natural "off switch." Combined with magnesium-rich ingredients, this week prepares your body for deep, restorative sleepthe only time your adrenals truly repair.</p>
</div></div>
</div>
<div class="day-view" id="week4-Monday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Baked Raspberry Almond Oats</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Baked Raspberry Almond Oats" src="/assets/baked_raspberry_almond_oats.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Oats 60g</li><li>Almonds</li><li>Raspberries</li><li>Coconut yogurt</li></ul>
<h4>Preparation</h4>
<p><strong>1. Mix:</strong> Combine oats, baking powder, cinnamon, and almonds.<br/>
<strong>2. Wet:</strong> Mix mashed banana (if using in base) or maple syrup with milk and melted coconut oil. Fold into dry mix.<br/>
<strong>3. Bake:</strong> Stir in raspberries. Pour into ramekin. Bake at 180C for 20-25 mins.<br/>
<strong>4. Serve:</strong> Drizzle with coconut yogurt.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Spiced Cacao &amp; Pepitas</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Spiced Cacao &amp; Pepitas" src="/assets/spiced_cacao_pepitas.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao drink</li><li>Pepitas</li></ul>
<h4>Preparation</h4>
<p>Warm drink + seeds.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Creamy White Bean Soup</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Creamy White Bean Soup" src="/assets/creamy_white_bean_soup.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>White beans 200g</li><li>Rosemary</li><li>Sourdough side</li></ul>
<h4>Preparation</h4>
<p><strong>1. Saut:</strong> Saut onion, garlic, and celery until soft.<br/>
<strong>2. Simmer:</strong> Add white beans (cannellini) and veggie stock. Add a sprig of rosemary. Simmer 15 mins.<br/>
<strong>3. Blend:</strong> Remove rosemary. Blend soup until creamy (add almond milk if needed).<br/>
<strong>4. Serve:</strong> Serve hot with a slice of sourdough.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Choc Dipped Orange</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Choc Dipped Orange" src="/assets/choc_dipped_orange.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Orange</li><li>Dark choc</li></ul>
<h4>Preparation</h4>
<p>Dip slices.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Smoky Tempeh Pot Pie</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Smoky Tempeh Pot Pie" src="/assets/smoky_tempeh_pot_pie.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tempeh</li><li>Root veg</li><li>Cassava crust</li></ul>
<h4>Preparation</h4>
<p><strong>1. Filling:</strong> Saut onion, carrots, celery. Add crumbled tempeh. Stir in flour or starch to coat, then pour in broth to create gravy.<br/>
<strong>2. Crust:</strong> Make a simple cassava flour dough (flour, oil, water) or top with mashed potato.<br/>
<strong>3. Bake:</strong> Place filling in dish, top with crust. Bake at 200C for 25-30 mins until bubbling and golden.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Tart Cherry Mocktail</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Tart Cherry Mocktail" src="/assets/tart_cherry_mocktail.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tart cherry</li><li>Magnesium</li></ul>
<h4>Preparation</h4>
<p>Mix.</p>
</div>
</div>
</div><div class="day-view" id="week4-Tuesday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Banana Buckwheat Muffins</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Banana Buckwheat Muffins" src="/assets/banana_buckwheat_muffins.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Buckwheat flour 60g</li><li>Banana</li><li>Walnuts</li><li>Almond milk</li></ul>
<h4>Preparation</h4>
<p><strong>1. Batter:</strong> Mash banana. Whisk with almond milk and a tsp of oil. Stir in buckwheat flour, baking powder, and cinnamon.<br/>
<strong>2. Bake:</strong> Fold in walnuts. Spoon into muffin tin.<br/>
<strong>3. Cook:</strong> Bake at 180C for 20-25 minutes. Let cool slightly.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Choc Dipped Orange</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Choc Dipped Orange" src="/assets/choc_dipped_orange.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Orange</li><li>Dark choc</li></ul>
<h4>Preparation</h4>
<p>Dip slices.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Cozy Miso Soba Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cozy Miso Soba Bowl" src="/assets/cozy_miso_soba_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Soba noodles</li><li>Miso</li><li>Shiitake</li><li>Tofu 200g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Broth:</strong> Simmer ginger slices, garlic, and shiitake mushrooms in vegetable stock for 10 mins.<br/>
<strong>2. Miso:</strong> Whisk miso with a little hot water separately. Turn off heat and stir into broth (don't boil miso).<br/>
<strong>3. Noodles:</strong> Cook soba noodles, rinse cold. Place in bowl.<br/>
<strong>4. Serve:</strong> Ladle soup over noodles. Top with tofu cubes and scallions.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Carrot Cake Energy Balls</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Carrot Cake Energy Balls" src="/assets/carrot_cake_energy_balls.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Dates</li><li>Carrot</li><li>Walnuts</li><li>Coconut flour</li></ul>
<h4>Preparation</h4>
<p>Blend &amp; roll. Serve with tea.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Gnocchi Sage Butter</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Gnocchi Sage Butter" src="/assets/gnocchi_sage_butter.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Gnocchi</li><li>White beans 150g</li><li>Sage</li><li>Walnuts</li><li>Rocket</li></ul>
<h4>Preparation</h4>
<p><strong>1. Cook Gnocchi:</strong> Boil gnocchi until they float. Drain.<br/>
<strong>2. Sage Sauce:</strong> Heat olive oil or vegan butter in a pan. Fry fresh sage leaves until crisp. Add walnuts.<br/>
<strong>3. Toss:</strong> Add gnocchi to the pan and saut for a few minutes to crisp the outside.<br/>
<strong>4. Serve:</strong> Pile over a bed of fresh rocket.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Lemon Balm Valerian</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lemon Balm Valerian" src="/assets/lemon_balm_valerian.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tea</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week4-Wednesday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Berry Chia Jam Toast</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Berry Chia Jam Toast" src="/assets/berry_chia_jam_toast.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Seeded bread</li><li>Chia jam</li><li>Tofu scramble side</li></ul>
<h4>Preparation</h4>
<p>Toast bread. Top with jam. Serve with tofu.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Carrot Cake Energy Balls</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Carrot Cake Energy Balls" src="/assets/carrot_cake_energy_balls.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Dates</li><li>Carrot</li><li>Walnuts</li><li>Coconut flour</li></ul>
<h4>Preparation</h4>
<p>Blend &amp; roll. Serve with tea.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Lentil Bolognese Squash</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lentil Bolognese Squash" src="/assets/lentil_bolognese_squash.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Lentils 200g</li><li>Tomato sauce</li><li>Spaghetti squash</li></ul>
<h4>Preparation</h4>
<p><strong>1. Squash:</strong> Cut squash in half lengthwise, remove seeds. Roast cut-side down at 200C for 40 mins. Scrape out strands.<br/>
<strong>2. Sauce:</strong> Saut onion, carrot, celery. Add lentils, crushed tomatoes, and dried herbs. Simmer 20 mins.<br/>
<strong>3. Serve:</strong> Top squash strands with heavy scoop of bolognese.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Spiced Cacao &amp; Pepitas</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Spiced Cacao &amp; Pepitas" src="/assets/spiced_cacao_pepitas.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao drink</li><li>Pepitas</li></ul>
<h4>Preparation</h4>
<p>Warm drink + seeds.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Creamy Mushroom Stroganoff</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Creamy Mushroom Stroganoff" src="/assets/creamy_mushroom_stroganoff.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Mushrooms</li><li>Smoked tofu 200g</li><li>Rice noodles</li><li>Cashew cream</li></ul>
<h4>Preparation</h4>
<p><strong>1. Saut:</strong> Saut sliced mushrooms in olive oil until browned. Add garlic and thyme.<br/>
<strong>2. Sauce:</strong> Stir in cashew cream (blended cashews + water), nutritional yeast, and mustard. Simmer to thicken.<br/>
<strong>3. Noodles:</strong> Cook rice noodles. Toss immediately with the sauce.<br/>
<strong>4. Serve:</strong> Top with parsley.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Kava Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Kava Tea" src="/assets/kava_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Kava</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week4-Thursday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Baked Raspberry Almond Oats</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Baked Raspberry Almond Oats" src="/assets/baked_raspberry_almond_oats.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Oats 60g</li><li>Almonds</li><li>Raspberries</li><li>Coconut yogurt</li></ul>
<h4>Preparation</h4>
<p><strong>1. Mix:</strong> Combine oats, baking powder, cinnamon, and almonds.<br/>
<strong>2. Wet:</strong> Mix mashed banana (if using in base) or maple syrup with milk and melted coconut oil. Fold into dry mix.<br/>
<strong>3. Bake:</strong> Stir in raspberries. Pour into ramekin. Bake at 180C for 20-25 mins.<br/>
<strong>4. Serve:</strong> Drizzle with coconut yogurt.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Spiced Cacao &amp; Pepitas</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Spiced Cacao &amp; Pepitas" src="/assets/spiced_cacao_pepitas.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao drink</li><li>Pepitas</li></ul>
<h4>Preparation</h4>
<p>Warm drink + seeds.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Creamy White Bean Soup</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Creamy White Bean Soup" src="/assets/creamy_white_bean_soup.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>White beans 200g</li><li>Rosemary</li><li>Sourdough side</li></ul>
<h4>Preparation</h4>
<p><strong>1. Saut:</strong> Saut onion, garlic, and celery until soft.<br/>
<strong>2. Simmer:</strong> Add white beans (cannellini) and veggie stock. Add a sprig of rosemary. Simmer 15 mins.<br/>
<strong>3. Blend:</strong> Remove rosemary. Blend soup until creamy (add almond milk if needed).<br/>
<strong>4. Serve:</strong> Serve hot with a slice of sourdough.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Choc Dipped Orange</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Choc Dipped Orange" src="/assets/choc_dipped_orange.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Orange</li><li>Dark choc</li></ul>
<h4>Preparation</h4>
<p>Dip slices.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Smoky Tempeh Pot Pie</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Smoky Tempeh Pot Pie" src="/assets/smoky_tempeh_pot_pie.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tempeh</li><li>Root veg</li><li>Cassava crust</li></ul>
<h4>Preparation</h4>
<p><strong>1. Filling:</strong> Saut onion, carrots, celery. Add crumbled tempeh. Stir in flour or starch to coat, then pour in broth to create gravy.<br/>
<strong>2. Crust:</strong> Make a simple cassava flour dough (flour, oil, water) or top with mashed potato.<br/>
<strong>3. Bake:</strong> Place filling in dish, top with crust. Bake at 200C for 25-30 mins until bubbling and golden.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Tart Cherry Mocktail</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Tart Cherry Mocktail" src="/assets/tart_cherry_mocktail.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tart cherry</li><li>Magnesium</li></ul>
<h4>Preparation</h4>
<p>Mix.</p>
</div>
</div>
</div><div class="day-view" id="week4-Friday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Banana Buckwheat Muffins</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Banana Buckwheat Muffins" src="/assets/banana_buckwheat_muffins.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Buckwheat flour 60g</li><li>Banana</li><li>Walnuts</li><li>Almond milk</li></ul>
<h4>Preparation</h4>
<p><strong>1. Batter:</strong> Mash banana. Whisk with almond milk and a tsp of oil. Stir in buckwheat flour, baking powder, and cinnamon.<br/>
<strong>2. Bake:</strong> Fold in walnuts. Spoon into muffin tin.<br/>
<strong>3. Cook:</strong> Bake at 180C for 20-25 minutes. Let cool slightly.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Choc Dipped Orange</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Choc Dipped Orange" src="/assets/choc_dipped_orange.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Orange</li><li>Dark choc</li></ul>
<h4>Preparation</h4>
<p>Dip slices.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Cozy Miso Soba Bowl</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Cozy Miso Soba Bowl" src="/assets/cozy_miso_soba_bowl.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Soba noodles</li><li>Miso</li><li>Shiitake</li><li>Tofu 200g</li></ul>
<h4>Preparation</h4>
<p><strong>1. Broth:</strong> Simmer ginger slices, garlic, and shiitake mushrooms in vegetable stock for 10 mins.<br/>
<strong>2. Miso:</strong> Whisk miso with a little hot water separately. Turn off heat and stir into broth (don't boil miso).<br/>
<strong>3. Noodles:</strong> Cook soba noodles, rinse cold. Place in bowl.<br/>
<strong>4. Serve:</strong> Ladle soup over noodles. Top with tofu cubes and scallions.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Carrot Cake Energy Balls</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Carrot Cake Energy Balls" src="/assets/carrot_cake_energy_balls.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Dates</li><li>Carrot</li><li>Walnuts</li><li>Coconut flour</li></ul>
<h4>Preparation</h4>
<p>Blend &amp; roll. Serve with tea.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Gnocchi Sage Butter</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Gnocchi Sage Butter" src="/assets/gnocchi_sage_butter.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Gnocchi</li><li>White beans 150g</li><li>Sage</li><li>Walnuts</li><li>Rocket</li></ul>
<h4>Preparation</h4>
<p><strong>1. Cook Gnocchi:</strong> Boil gnocchi until they float. Drain.<br/>
<strong>2. Sage Sauce:</strong> Heat olive oil or vegan butter in a pan. Fry fresh sage leaves until crisp. Add walnuts.<br/>
<strong>3. Toss:</strong> Add gnocchi to the pan and saut for a few minutes to crisp the outside.<br/>
<strong>4. Serve:</strong> Pile over a bed of fresh rocket.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Lemon Balm Valerian</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lemon Balm Valerian" src="/assets/lemon_balm_valerian.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tea</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week4-Saturday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Berry Chia Jam Toast</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Berry Chia Jam Toast" src="/assets/berry_chia_jam_toast.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Seeded bread</li><li>Chia jam</li><li>Tofu scramble side</li></ul>
<h4>Preparation</h4>
<p>Toast bread. Top with jam. Serve with tofu.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Carrot Cake Energy Balls</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Carrot Cake Energy Balls" src="/assets/carrot_cake_energy_balls.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Dates</li><li>Carrot</li><li>Walnuts</li><li>Coconut flour</li></ul>
<h4>Preparation</h4>
<p>Blend &amp; roll. Serve with tea.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Lentil Bolognese Squash</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Lentil Bolognese Squash" src="/assets/lentil_bolognese_squash.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Lentils 200g</li><li>Tomato sauce</li><li>Spaghetti squash</li></ul>
<h4>Preparation</h4>
<p><strong>1. Squash:</strong> Cut squash in half lengthwise, remove seeds. Roast cut-side down at 200C for 40 mins. Scrape out strands.<br/>
<strong>2. Sauce:</strong> Saut onion, carrot, celery. Add lentils, crushed tomatoes, and dried herbs. Simmer 20 mins.<br/>
<strong>3. Serve:</strong> Top squash strands with heavy scoop of bolognese.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Spiced Cacao &amp; Pepitas</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Spiced Cacao &amp; Pepitas" src="/assets/spiced_cacao_pepitas.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao drink</li><li>Pepitas</li></ul>
<h4>Preparation</h4>
<p>Warm drink + seeds.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Creamy Mushroom Stroganoff</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Creamy Mushroom Stroganoff" src="/assets/creamy_mushroom_stroganoff.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Mushrooms</li><li>Smoked tofu 200g</li><li>Rice noodles</li><li>Cashew cream</li></ul>
<h4>Preparation</h4>
<p><strong>1. Saut:</strong> Saut sliced mushrooms in olive oil until browned. Add garlic and thyme.<br/>
<strong>2. Sauce:</strong> Stir in cashew cream (blended cashews + water), nutritional yeast, and mustard. Simmer to thicken.<br/>
<strong>3. Noodles:</strong> Cook rice noodles. Toss immediately with the sauce.<br/>
<strong>4. Serve:</strong> Top with parsley.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Kava Tea</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Kava Tea" src="/assets/kava_tea.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Kava</li></ul>
<h4>Preparation</h4>
<p>Steep.</p>
</div>
</div>
</div><div class="day-view" id="week4-Sunday">
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Breakfast  7:30 AM</div>
<div class="meal-title">Baked Raspberry Almond Oats</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Baked Raspberry Almond Oats" src="/assets/baked_raspberry_almond_oats.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Oats 60g</li><li>Almonds</li><li>Raspberries</li><li>Coconut yogurt</li></ul>
<h4>Preparation</h4>
<p><strong>1. Mix:</strong> Combine oats, baking powder, cinnamon, and almonds.<br/>
<strong>2. Wet:</strong> Mix mashed banana (if using in base) or maple syrup with milk and melted coconut oil. Fold into dry mix.<br/>
<strong>3. Bake:</strong> Stir in raspberries. Pour into ramekin. Bake at 180C for 20-25 mins.<br/>
<strong>4. Serve:</strong> Drizzle with coconut yogurt.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">AM Snack  10:30 AM</div>
<div class="meal-title">Spiced Cacao &amp; Pepitas</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Spiced Cacao &amp; Pepitas" src="/assets/spiced_cacao_pepitas.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Cacao drink</li><li>Pepitas</li></ul>
<h4>Preparation</h4>
<p>Warm drink + seeds.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Lunch  12:30 PM</div>
<div class="meal-title">Creamy White Bean Soup</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Creamy White Bean Soup" src="/assets/creamy_white_bean_soup.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>White beans 200g</li><li>Rosemary</li><li>Sourdough side</li></ul>
<h4>Preparation</h4>
<p><strong>1. Saut:</strong> Saut onion, garlic, and celery until soft.<br/>
<strong>2. Simmer:</strong> Add white beans (cannellini) and veggie stock. Add a sprig of rosemary. Simmer 15 mins.<br/>
<strong>3. Blend:</strong> Remove rosemary. Blend soup until creamy (add almond milk if needed).<br/>
<strong>4. Serve:</strong> Serve hot with a slice of sourdough.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">PM Snack  3:30 PM</div>
<div class="meal-title">Choc Dipped Orange</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Choc Dipped Orange" src="/assets/choc_dipped_orange.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Orange</li><li>Dark choc</li></ul>
<h4>Preparation</h4>
<p>Dip slices.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Dinner  6:30 PM</div>
<div class="meal-title">Smoky Tempeh Pot Pie</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Smoky Tempeh Pot Pie" src="/assets/smoky_tempeh_pot_pie.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tempeh</li><li>Root veg</li><li>Cassava crust</li></ul>
<h4>Preparation</h4>
<p><strong>1. Filling:</strong> Saut onion, carrots, celery. Add crumbled tempeh. Stir in flour or starch to coat, then pour in broth to create gravy.<br/>
<strong>2. Crust:</strong> Make a simple cassava flour dough (flour, oil, water) or top with mashed potato.<br/>
<strong>3. Bake:</strong> Place filling in dish, top with crust. Bake at 200C for 25-30 mins until bubbling and golden.</p>
</div>
</div>
<div class="card">
<div class="card-header" onclick="toggleCard(this)">
<div style="display:flex; align-items:center;">
<div class="meal-icon">🍽️</div>
<div>
<div class="meta">Evening Ritual  8:30 PM</div>
<div class="meal-title">Tart Cherry Mocktail</div>
</div>
</div>
<div class="expand-icon">+</div>
</div>
<div class="card-body">
<img alt="Tart Cherry Mocktail" src="/assets/tart_cherry_mocktail.png" style="width:100%; height:200px; object-fit:cover; border-radius:8px; margin-bottom:20px;"/>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 10px;"><h4 style="margin-bottom: 0; border: none; padding-bottom: 0;">Ingredients</h4></div>
<ul><li>Tart cherry</li><li>Magnesium</li></ul>
<h4>Preparation</h4>
<p>Mix.</p>
</div>
</div>
</div>
</div>
<div class="view-section" id="supplements">
    <h1>Supplement Guide</h1>
    <div style="background: #fff3e0; padding: 20px; border-radius: 12px; border: 1px solid #ffe0b2; margin-bottom: 30px;">
        <h4 style="color: #e65100; margin-bottom: 5px; border: none;">Medical Disclaimer</h4>
        <p style="font-size: 0.9rem; margin: 0; color: #666;">Supplements should be taken under the guidance of a healthcare professional. Dosages listed are general guidelines.</p>
    </div>

    <h3 style="color:var(--secondary); margin-bottom:20px; border-bottom:2px solid #eee; padding-bottom:10px;">Cortisol Calm (Your Essentials)</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; margin-bottom: 50px;">
        <!-- Ashwagandha -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Ashwagandha" src="/assets/ashwagandha_spp.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Stress</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Ashwagandha</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">200mg evening. Lowers cortisol and helps manage stress.</p>
            </div>
        </div>
        <!-- Magnesium -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Magnesium Glycinate" src="/assets/magnesium_glycinate_supp.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Sleep</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Magnesium Glycinate</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">300-400mg nightly. Aids sleep, reduces cramps and anxiety.</p>
            </div>
        </div>
        <!-- Omega 3 -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Omega 3 DHA/EPA" src="/assets/omega_3_algae_supp.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Inflammation</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Omega 3 DHA/EPA</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">300-600mg DHA + 150mg EPA daily. Supports brain health &amp; reduces hot flashes.</p>
            </div>
        </div>
        <!-- B12 -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Vitamin B12" src="/assets/vitamin_b12_supp.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Essentials</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Vitamin B12</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">1,000 mcg 3x weekly. Supports energy levels and nerve function.</p>
            </div>
        </div>
    </div>


    <h3 style="color:var(--text-muted); margin-bottom:20px; border-bottom:2px solid #eee; padding-bottom:10px;">General Vitality (Optional)</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px;">
        <!-- Iron -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Iron Bisglycinate" src="/assets/iron_bisglycinate_supp.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Deficiency Only</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Iron Bisglycinate</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">18-25mg every other day (ONLY if deficient). Pair with Vit C for absorption.</p>
            </div>
        </div>
        <!-- Calcium -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Calcium Citrate" src="/assets/calcium_citrate_supp.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Bone Health</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Calcium Citrate</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">500mg Ca + 2000IU D3 + 90mcg K2. Critical for bone density protection.</p>
            </div>
        </div>
        <!-- Zinc -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Zinc" src="/assets/zinc_supp.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Immunity</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Zinc</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">15mg alternating days. Supports thyroid function. Take with food.</p>
            </div>
        </div>
        <!-- Selenium -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Selenium" src="/assets/selenium_brazil_nut.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Thyroid</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Selenium</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">100mcg (or 1 Brazil nut) alternating days. Key for thyroid conversion.</p>
            </div>
        </div>
        <!-- Iodine -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Iodine (Kelp)" src="/assets/iodine_kelp_granules.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Thyroid</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Iodine (Kelp)</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">150mcg kelp granules (ONLY if deficient). Supports thyroid hormones.</p>
            </div>
        </div>
        <!-- Maca -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Maca" src="/assets/maca_powder.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Hormone Balance</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Maca</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">1 tsp morning (Gelatinized). Adaptogen for mood, energy, and libido.</p>
            </div>
        </div>
        <!-- Flax -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Ground Flax" src="/assets/ground_flax_seeds.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Daily Essential</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Ground Flax</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">1-2 tbsp daily. Rich in lignans to help balance estrogen.</p>
            </div>
        </div>
        <!-- Creatine -->
        <div class="card" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%; transition: transform 0.2s;">
            <div style="height: 180px; overflow: hidden; position: relative;"><img alt="Creatine Monohydrate" src="/assets/creatine_monohydrate_supp.png" style="width: 100%; height: 100%; object-fit: cover;"/></div>
            <div class="card-body" style="padding: 20px; opacity: 1; max-height: none; flex-grow: 1; display: flex; flex-direction: column;">
                <span style="background: #f0f4f8; color: var(--primary-light); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; align-self: flex-start; margin-bottom: 10px; text-transform: uppercase;">Muscle & Brain</span>
                <h4 style="margin-bottom: 10px; color: var(--primary); font-size: 1.1rem;">Creatine Monohydrate</h4>
                <p style="font-size: 0.9rem; color: #555; line-height: 1.5; margin-bottom: 0;">3-5g daily. Vital for vegans: supports muscle retention, bone density, and cognitive function.</p>
            </div>
        </div>
    </div>
</div>
<div class="view-section" id="swaps">
<h1 style="text-align: center; margin-bottom: 20px;">Quick Swaps</h1>
<div class="card">
<div class="card-body active" style="max-height:2000px; padding:0; opacity:1; overflow:hidden;">
<div style="padding: 30px 30px 20px 30px; background: linear-gradient(to bottom, #fdfbf7, #ffffff); border-bottom: 1px solid rgba(0,0,0,0.03);">
<p style="margin: 0; text-align: center; color: var(--text-muted); font-size: 0.95rem;">Flexible options for allergies, dietary preferences, or pantry availability.</p>
</div>
<div style="overflow-x: auto;">
<table style="margin: 0; border: none; border-radius: 0;">
<thead>
<tr style="background: var(--primary);">
<th style="padding: 18px 30px; width: 40%; color: white; font-weight: 500; letter-spacing: 0.5px;">Original Item</th>
<th style="padding: 18px 30px; width: 60%; color: white; font-weight: 500; letter-spacing: 0.5px;">Alternative Options</th>
</tr>
</thead>
<tbody>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Almond Yogurt</td>
<td style="padding: 15px 30px;">Coconut or Oat yogurt</td>
</tr>
<tr style="background: #fafafa;">
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Ashwagandha</td>
<td style="padding: 15px 30px;">Maca powder or simply skip</td>
</tr>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Cassava Flour</td>
<td style="padding: 15px 30px;">Chickpea or Rice flour</td>
</tr>
<tr style="background: #fafafa;">
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Cauliflower <span style="font-size:0.8em; color:var(--text-muted); font-weight:400;">(Low FODMAP)</span></td>
<td style="padding: 15px 30px;">Zucchini</td>
</tr>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Chickpeas <span style="font-size:0.8em; color:var(--text-muted); font-weight:400;">(Low FODMAP)</span></td>
<td style="padding: 15px 30px;">Firm tofu</td>
</tr>
<tr style="background: #fafafa;">
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Coconut Aminos</td>
<td style="padding: 15px 30px;">Tamari or Soy sauce</td>
</tr>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Cooked Lunches</td>
<td style="padding: 15px 30px;">Raw wraps or salads</td>
</tr>
<tr style="background: #fafafa;">
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Dates</td>
<td style="padding: 15px 30px;">Ripe bananas</td>
</tr>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Farro / Barley</td>
<td style="padding: 15px 30px;">Quinoa or Millet</td>
</tr>
<tr style="background: #fafafa;">
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Garlic</td>
<td style="padding: 15px 30px;">Infused oil (adds flavor without fiber)</td>
</tr>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Hemp Hearts</td>
<td style="padding: 15px 30px;">Sunflower, Pumpkin, or Chia seeds</td>
</tr>
<tr style="background: #fafafa;">
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Jackfruit</td>
<td style="padding: 15px 30px;">Hearts of Palm or Tofu</td>
</tr>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Kelp Noodles</td>
<td style="padding: 15px 30px;">Soba, Rice, or Zucchini noodles</td>
</tr>
<tr style="background: #fafafa;">
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Lupini Beans</td>
<td style="padding: 15px 30px;">Chickpeas or Edamame</td>
</tr>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Miso</td>
<td style="padding: 15px 30px;">Vegetable stock cube or paste</td>
</tr>
<tr style="background: #fafafa;">
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Monk Fruit</td>
<td style="padding: 15px 30px;">Stevia, Maple syrup, or Coconut sugar</td>
</tr>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Nutritional Yeast</td>
<td style="padding: 15px 30px;">A small pinch of Miso</td>
</tr>
<tr style="background: #fafafa;">
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Tempeh</td>
<td style="padding: 15px 30px;">Tofu, Seitan, or Chickpeas</td>
</tr>
<tr>
<td style="padding: 15px 30px; font-weight: 600; color: var(--primary);">Tofu</td>
<td style="padding: 15px 30px;">Chickpea tofu, Lupini beans, or Seitan</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="view-section" id="shopping">
<h1>Shopping Lists</h1>
<div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">Week 1 List</div><div class="expand-icon">+</div></div>
<div class="card-body">
<div class="shopping-grid">
<div class="shopping-category">
<h4>Produce</h4>
<ul class="check-list"><li onclick="this.classList.toggle('checked')">Asparagus</li><li onclick="this.classList.toggle('checked')">Avocado</li><li onclick="this.classList.toggle('checked')">Baby Greens</li><li onclick="this.classList.toggle('checked')">Basil</li><li onclick="this.classList.toggle('checked')">Bean Sprouts</li><li onclick="this.classList.toggle('checked')">Bok Choy</li><li onclick="this.classList.toggle('checked')">Broccoli</li><li onclick="this.classList.toggle('checked')">Carrots</li><li onclick="this.classList.toggle('checked')">Cauliflower</li><li onclick="this.classList.toggle('checked')">Collard Greens</li><li onclick="this.classList.toggle('checked')">Cucumber</li><li onclick="this.classList.toggle('checked')">Delicata Squash</li><li onclick="this.classList.toggle('checked')">Dill</li><li onclick="this.classList.toggle('checked')">Fennel</li><li onclick="this.classList.toggle('checked')">Garlic</li><li onclick="this.classList.toggle('checked')">Ginger</li><li onclick="this.classList.toggle('checked')">Lemons</li><li onclick="this.classList.toggle('checked')">Limes</li><li onclick="this.classList.toggle('checked')">Mint</li><li onclick="this.classList.toggle('checked')">Mixed Berries</li><li onclick="this.classList.toggle('checked')">Mung Sprouts</li><li onclick="this.classList.toggle('checked')">Onion</li><li onclick="this.classList.toggle('checked')">Parsley</li><li onclick="this.classList.toggle('checked')">Pear</li><li onclick="this.classList.toggle('checked')">Scallions</li><li onclick="this.classList.toggle('checked')">Shiitake Mushrooms</li><li onclick="this.classList.toggle('checked')">Spinach</li><li onclick="this.classList.toggle('checked')">Zucchini</li></ul></div>
<div class="shopping-category">
<h4>Pantry & Protein</h4>
<ul class="check-list"><li onclick="this.classList.toggle('checked')">Almond Butter</li><li onclick="this.classList.toggle('checked')">Almond Milk</li><li onclick="this.classList.toggle('checked')">Aloe Vera Juice</li><li onclick="this.classList.toggle('checked')">Artichoke Hearts</li><li onclick="this.classList.toggle('checked')">Brazil Nuts</li><li onclick="this.classList.toggle('checked')">Chamomile Tea</li><li onclick="this.classList.toggle('checked')">Chia Seeds</li><li onclick="this.classList.toggle('checked')">Chickpeas</li><li onclick="this.classList.toggle('checked')">Cinnamon</li><li onclick="this.classList.toggle('checked')">Coconut Milk</li><li onclick="this.classList.toggle('checked')">Coconut Oil</li><li onclick="this.classList.toggle('checked')">Cranberries</li><li onclick="this.classList.toggle('checked')">Curry Paste</li><li onclick="this.classList.toggle('checked')">Edamame</li><li onclick="this.classList.toggle('checked')">Flaxseed</li><li onclick="this.classList.toggle('checked')">Lemon Balm Tea</li><li onclick="this.classList.toggle('checked')">Maca</li><li onclick="this.classList.toggle('checked')">Magnesium</li><li onclick="this.classList.toggle('checked')">Maple Syrup</li><li onclick="this.classList.toggle('checked')">Miso</li><li onclick="this.classList.toggle('checked')">Nori</li><li onclick="this.classList.toggle('checked')">Pea Protein</li><li onclick="this.classList.toggle('checked')">Pesto</li><li onclick="this.classList.toggle('checked')">Pumpkin Seeds</li><li onclick="this.classList.toggle('checked')">Quinoa</li><li onclick="this.classList.toggle('checked')">Red Lentils</li><li onclick="this.classList.toggle('checked')">Sesame Oil</li><li onclick="this.classList.toggle('checked')">Star Anise</li><li onclick="this.classList.toggle('checked')">Tamari</li><li onclick="this.classList.toggle('checked')">Tempeh</li><li onclick="this.classList.toggle('checked')">Tofu (Firm)</li><li onclick="this.classList.toggle('checked')">Triphala</li><li onclick="this.classList.toggle('checked')">Vegetable Broth</li><li onclick="this.classList.toggle('checked')">Wakame</li><li onclick="this.classList.toggle('checked')">White Beans</li></ul></div></div></div></div>
<div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">Week 2 List</div><div class="expand-icon">+</div></div>
<div class="card-body">
<div class="shopping-grid">
<div class="shopping-category">
<h4>Produce</h4>
<ul class="check-list"><li onclick="this.classList.toggle('checked')">Apples</li><li onclick="this.classList.toggle('checked')">Asparagus</li><li onclick="this.classList.toggle('checked')">Avocado</li><li onclick="this.classList.toggle('checked')">Blueberries</li><li onclick="this.classList.toggle('checked')">Brussels Sprouts</li><li onclick="this.classList.toggle('checked')">Cauliflower</li><li onclick="this.classList.toggle('checked')">Cherries</li><li onclick="this.classList.toggle('checked')">Cucumber</li><li onclick="this.classList.toggle('checked')">Eggplant</li><li onclick="this.classList.toggle('checked')">Fennel</li><li onclick="this.classList.toggle('checked')">Green Beans</li><li onclick="this.classList.toggle('checked')">Limes</li><li onclick="this.classList.toggle('checked')">Onion</li><li onclick="this.classList.toggle('checked')">Orange</li><li onclick="this.classList.toggle('checked')">Pears</li><li onclick="this.classList.toggle('checked')">Pomegranate</li><li onclick="this.classList.toggle('checked')">Raspberries</li><li onclick="this.classList.toggle('checked')">Spinach</li><li onclick="this.classList.toggle('checked')">Sweet Potato</li><li onclick="this.classList.toggle('checked')">Tomatoes</li></ul></div>
<div class="shopping-category">
<h4>Pantry & Protein</h4>
<ul class="check-list"><li onclick="this.classList.toggle('checked')">Almond Milk</li><li onclick="this.classList.toggle('checked')">Black Rice</li><li onclick="this.classList.toggle('checked')">Buckwheat</li><li onclick="this.classList.toggle('checked')">Cacao Powder</li><li onclick="this.classList.toggle('checked')">Cardamom</li><li onclick="this.classList.toggle('checked')">Chia Seeds</li><li onclick="this.classList.toggle('checked')">Chili Powder</li><li onclick="this.classList.toggle('checked')">Cinnamon</li><li onclick="this.classList.toggle('checked')">Edamame</li><li onclick="this.classList.toggle('checked')">Farro</li><li onclick="this.classList.toggle('checked')">Hemp Yogurt</li><li onclick="this.classList.toggle('checked')">Kidney Beans</li><li onclick="this.classList.toggle('checked')">Lavender Tea</li><li onclick="this.classList.toggle('checked')">Lentils</li><li onclick="this.classList.toggle('checked')">Maca</li><li onclick="this.classList.toggle('checked')">Monk Fruit</li><li onclick="this.classList.toggle('checked')">Nori</li><li onclick="this.classList.toggle('checked')">Oats</li><li onclick="this.classList.toggle('checked')">Pea Protein</li><li onclick="this.classList.toggle('checked')">Pepitas</li><li onclick="this.classList.toggle('checked')">Pesto</li><li onclick="this.classList.toggle('checked')">Reishi</li><li onclick="this.classList.toggle('checked')">Sage</li><li onclick="this.classList.toggle('checked')">Seitan</li><li onclick="this.classList.toggle('checked')">Sesame Oil</li><li onclick="this.classList.toggle('checked')">Smoked Tofu</li><li onclick="this.classList.toggle('checked')">Spirulina</li><li onclick="this.classList.toggle('checked')">Tahini</li><li onclick="this.classList.toggle('checked')">Tamari</li><li onclick="this.classList.toggle('checked')">Tempeh</li><li onclick="this.classList.toggle('checked')">Tulsi Tea</li><li onclick="this.classList.toggle('checked')">Walnuts</li></ul></div></div></div></div>
<div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">Week 3 List</div><div class="expand-icon">+</div></div>
<div class="card-body">
<div class="shopping-grid">
<div class="shopping-category">
<h4>Produce</h4>
<ul class="check-list"><li onclick="this.classList.toggle('checked')">Apple</li><li onclick="this.classList.toggle('checked')">Apricots</li><li onclick="this.classList.toggle('checked')">Avocado</li><li onclick="this.classList.toggle('checked')">Banana</li><li onclick="this.classList.toggle('checked')">Broccoli</li><li onclick="this.classList.toggle('checked')">Carrot</li><li onclick="this.classList.toggle('checked')">Cauliflower</li><li onclick="this.classList.toggle('checked')">Cucumber</li><li onclick="this.classList.toggle('checked')">Dandelion Root</li><li onclick="this.classList.toggle('checked')">Ginger</li><li onclick="this.classList.toggle('checked')">Grapefruit</li><li onclick="this.classList.toggle('checked')">Holy Basil</li><li onclick="this.classList.toggle('checked')">Kale</li><li onclick="this.classList.toggle('checked')">Mint</li><li onclick="this.classList.toggle('checked')">Rosemary</li><li onclick="this.classList.toggle('checked')">Sweet Potato</li><li onclick="this.classList.toggle('checked')">Thai Basil</li><li onclick="this.classList.toggle('checked')">Tomato</li><li onclick="this.classList.toggle('checked')">Zucchini</li></ul></div>
<div class="shopping-category">
<h4>Pantry & Protein</h4>
<ul class="check-list"><li onclick="this.classList.toggle('checked')">ACV</li><li onclick="this.classList.toggle('checked')">Almond Butter</li><li onclick="this.classList.toggle('checked')">Almond Milk</li><li onclick="this.classList.toggle('checked')">Beluga Lentils</li><li onclick="this.classList.toggle('checked')">Cacao Powder</li><li onclick="this.classList.toggle('checked')">Cannellini Beans</li><li onclick="this.classList.toggle('checked')">Cashews (Butter & Whole)</li><li onclick="this.classList.toggle('checked')">Cayenne</li><li onclick="this.classList.toggle('checked')">Chia Seeds</li><li onclick="this.classList.toggle('checked')">Chickpea Flour</li><li onclick="this.classList.toggle('checked')">Chickpeas</li><li onclick="this.classList.toggle('checked')">Chili Powder</li><li onclick="this.classList.toggle('checked')">Coconut Cream</li><li onclick="this.classList.toggle('checked')">Coconut Milk</li><li onclick="this.classList.toggle('checked')">Coconut Oil</li><li onclick="this.classList.toggle('checked')">Coconut Yogurt</li><li onclick="this.classList.toggle('checked')">Cold Brew Coffee</li><li onclick="this.classList.toggle('checked')">Dandelion Root Powder</li><li onclick="this.classList.toggle('checked')">Fennel Seeds/Tea</li><li onclick="this.classList.toggle('checked')">Kimchi</li><li onclick="this.classList.toggle('checked')">Maple Syrup</li><li onclick="this.classList.toggle('checked')">Millet</li><li onclick="this.classList.toggle('checked')">Miso</li><li onclick="this.classList.toggle('checked')">Pea Protein</li><li onclick="this.classList.toggle('checked')">Pumpkin Seeds</li><li onclick="this.classList.toggle('checked')">Quinoa</li><li onclick="this.classList.toggle('checked')">Romesco Sauce</li><li onclick="this.classList.toggle('checked')">Tahini</li><li onclick="this.classList.toggle('checked')">Tofu</li><li onclick="this.classList.toggle('checked')">Walnuts</li></ul></div></div></div></div>
<div class="card"><div class="card-header" onclick="toggleCard(this)"><div class="meal-title">Week 4 List</div><div class="expand-icon">+</div></div>
<div class="card-body">
<div class="shopping-grid">
<div class="shopping-category">
<h4>Produce</h4>
<ul class="check-list"><li onclick="this.classList.toggle('checked')">Banana</li><li onclick="this.classList.toggle('checked')">Carrots</li><li onclick="this.classList.toggle('checked')">Lemon Balm</li><li onclick="this.classList.toggle('checked')">Mushrooms (Shiitake/Button)</li><li onclick="this.classList.toggle('checked')">Orange</li><li onclick="this.classList.toggle('checked')">Raspberries</li><li onclick="this.classList.toggle('checked')">Rocket</li><li onclick="this.classList.toggle('checked')">Root Vegetables</li><li onclick="this.classList.toggle('checked')">Rosemary</li><li onclick="this.classList.toggle('checked')">Sage</li><li onclick="this.classList.toggle('checked')">Squash (Spaghetti)</li><li onclick="this.classList.toggle('checked')">Tart Cherry Juice</li></ul></div>
<div class="shopping-category">
<h4>Pantry & Protein</h4>
<ul class="check-list"><li onclick="this.classList.toggle('checked')">Almond Milk</li><li onclick="this.classList.toggle('checked')">Almonds</li><li onclick="this.classList.toggle('checked')">Buckwheat Flour</li><li onclick="this.classList.toggle('checked')">Cacao Powder</li><li onclick="this.classList.toggle('checked')">Cashews</li><li onclick="this.classList.toggle('checked')">Cassava Flour</li><li onclick="this.classList.toggle('checked')">Chia Seeds</li><li onclick="this.classList.toggle('checked')">Coconut Flour</li><li onclick="this.classList.toggle('checked')">Coconut Yogurt</li><li onclick="this.classList.toggle('checked')">Dark Chocolate</li><li onclick="this.classList.toggle('checked')">Dates</li><li onclick="this.classList.toggle('checked')">Gnocchi</li><li onclick="this.classList.toggle('checked')">Kava Tea</li><li onclick="this.classList.toggle('checked')">Lentils</li><li onclick="this.classList.toggle('checked')">Magnesium</li><li onclick="this.classList.toggle('checked')">Miso</li><li onclick="this.classList.toggle('checked')">Oats</li><li onclick="this.classList.toggle('checked')">Pepitas</li><li onclick="this.classList.toggle('checked')">Rice Noodles</li><li onclick="this.classList.toggle('checked')">Seeded Bread</li><li onclick="this.classList.toggle('checked')">Soba Noodles</li><li onclick="this.classList.toggle('checked')">Sourdough Bread</li><li onclick="this.classList.toggle('checked')">Tart Cherry</li><li onclick="this.classList.toggle('checked')">Tempeh</li><li onclick="this.classList.toggle('checked')">Tofu</li><li onclick="this.classList.toggle('checked')">Tomato Sauce</li><li onclick="this.classList.toggle('checked')">Valerian Tea</li><li onclick="this.classList.toggle('checked')">Walnuts</li><li onclick="this.classList.toggle('checked')">White Beans</li></ul></div></div></div></div>
</div>
<!-- Sleep Protocol Section -->
<div class="view-section" id="sleep">
    <div class="sleep-hero">
        <h1 style="color:white; margin-bottom:10px;">The Adrenal Sleep Architecture</h1>
        <p style="font-size:1.15rem; opacity:0.9; max-width:600px; margin:0 auto;">Use this specific sequence to lower your core body temperature and signal safety to your nervous system.</p>
        
        <div class="glass-effect">
            <span style="font-size:2rem; display:block; margin-bottom:10px;">???</span>
            <strong>Why Temperature Matters:</strong> Deep sleep only occurs when your core temperature drops by 2-3F. Cortisol keeps you hot. This routine forces the drop.
        </div>
    </div>

    <!-- Wind Down Routine -->
    <div class="section-title">
        <div class="section-number">1</div>
        <h2>The Wind Down Routine</h2>
    </div>

    <div style="margin-bottom: 60px;">
        <div class="timeline-item">
            <div class="timeline-time">12:00 PM</div>
            <div class="timeline-content">
                <span class="timeline-title">The Caffeine Hard Stop</span>
                Switch to herbal tea or water. Caffeine has a quarter-life of 12 hours. Drinking it at 2PM means 25% is still active in your brain at 2AM, blocking deep sleep.
            </div>
        </div>
        <div class="timeline-item">
            <div class="timeline-time">7:00 PM</div>
            <div class="timeline-content">
                <span class="timeline-title">Kitchen Closed</span>
                Finish your last meal 3 hours before bed. Digestion is a thermogenic (heat-producing) process. We need your body cool to initiate sleep.
            </div>
        </div>
        <div class="timeline-item">
            <div class="timeline-time">8:30 PM</div>
            <div class="timeline-content">
                <span class="timeline-title">The Blue Light Block</span>
                Laptops closed. Phone on 'Night Shift' or 'Eye Comfort' mode. Blue light stimulates the same cortisol receptors as sunlight.
            </div>
        </div>
        <div class="timeline-item">
            <div class="timeline-time">9:00 PM</div>
            <div class="timeline-content">
                <span class="timeline-title">Thermal Dump Shower</span>
                Take a <strong>warm</strong> shower or bath. When you step out into cool air, your body heat rapidly dissipates. This steep drop mimics the biological signal for sleep onset.
            </div>
        </div>
        <div class="timeline-item">
            <div class="timeline-time">9:45 PM</div>
            <div class="timeline-content">
                <span class="timeline-title">The Brain Dump</span>
                Write down your top 3 'Must Do' items for tomorrow on paper. Get them out of your head so your Reticular Activating System (brain's alarm) can stand down.
            </div>
        </div>
    </div>

    <!-- Adrenal Mocktail Feature -->
    <div class="section-title">
        <div class="section-number">2</div>
        <h2>Your Sleep Cocktail</h2>
    </div>

    <div class="recipe-card">
        <div style="font-size: 5rem; line-height: 1;">??</div>
        <div style="flex-grow:1;">
            <h3 style="color:var(--primary); margin-top:0;">The 'Adrenal Mocktail'</h3>
            <p>Drink this 1 hour before bed instead of wine. It provides the building blocks for melatonin without the blood sugar crash.</p>
            <ul style="margin-bottom:0;">
                <li><strong>1/2 cup Tart Cherry Juice</strong> (Natural source of Melatonin)</li>
                <li><strong>1 scoop Magnesium Glycinate</strong> (The relaxation mineral)</li>
                <li><strong>Pinch of Sea Salt</strong> (Lowers adrenaline)</li>
                <li><strong>Sparkling Water</strong></li>
            </ul>
        </div>
    </div>

    <!-- 3AM Protocol -->
     <div class="section-title">
        <div class="section-number">3</div>
        <h2>The 3 A.M. Emergency Protocol</h2>
    </div>
    
    <div class="rescue-card">
        <h4 style="color:#c53030; margin-top:0; display:flex; align-items:center; gap:10px;">? Woke up wired?</h4>
        <p>This is a liver glycogen crash causing an adrenaline spike. <strong>Do NOT look at the clock.</strong> Looking at the time engages your logical brain and wakefulness.</p>
        <p style="font-weight:600; margin-bottom:5px;">Try this:</p>
        <ol style="margin-top:0; padding-left:20px;">
            <li style="margin-bottom:5px;"><strong>Physiological Sigh:</strong> Two sharp inhales through nose, one long exhale through mouth. Repeat 3 times.</li>
            <li style="margin-bottom:5px;"><strong>Cool the Palm:</strong> Stick a foot or hand out from the covers to dump heat.</li>
            <li><strong>Last Resort:</strong> If awake >20 mins, get up and do a boring task (fold laundry) in dim light until tired.</li>
        </ol>
    </div>

    <!-- Bedroom Setup Checklist -->
    <div class="section-title" style="margin-top:60px;">
        <div class="section-number">4</div>
        <h2>Bedroom Sanctuary Checklist</h2>
    </div>

    <div class="checklist-grid">
        <div class="check-item">
            <div class="check-box"></div>
            <div>
                <strong>Temperature Drop</strong><br>
                <span style="font-size:0.9rem; color:var(--text-muted);">Set thermostat to 65-68F (18-20C). Cool rooms promote deeper REM cycles.</span>
            </div>
        </div>
        <div class="check-item">
            <div class="check-box"></div>
            <div>
                <strong>Total Blackout</strong><br>
                <span style="font-size:0.9rem; color:var(--text-muted);">Cover all LEDs (even the TV standby light). Use blackout curtains or a sleep mask.</span>
            </div>
        </div>
        <div class="check-item">
            <div class="check-box"></div>
            <div>
                <strong>Phone Quarantine</strong><br>
                <span style="font-size:0.9rem; color:var(--text-muted);">Charge your phone in the bathroom or hallway, not on the nightstand.</span>
            </div>
        </div>
        <div class="check-item">
            <div class="check-box"></div>
            <div>
                <strong>White Noise</strong><br>
                <span style="font-size:0.9rem; color:var(--text-muted);">Use a fan or sound machine to mask sudden noises that trigger 'light sleeper' wakeups.</span>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 50px; text-align: center;">
         <p style="color:var(--text-muted);">Prefer a printed copy?</p>
         <a href="adrenal_sleep_guide.html" target="_blank" style="text-decoration:none;"><button style="background:var(--primary); color:white; border:none; padding:12px 25px; border-radius:50px; cursor:pointer; font-size:1rem; font-weight: 500; transition: all 0.2s;" onmouseover="this.style.background='var(--primary-light)'" onmouseout="this.style.background='var(--primary)'">Download Printable Guide</button></a>
    </div>

        </div> <!-- End meals-content-container -->
    </div> <!-- End view-meals -->

    <!-- Placeholder for moved sections (Movement, Support) - they will be moved here by JS -->
    <!-- Duplicate movement view removed -->

    <!-- INSTALL APP BANNER (Hidden by default) -->
    <div id="pwa-install-banner" style="display:none; background: linear-gradient(135deg, #046A38 0%, #06542f 100%); color:white; padding: 12px 20px; margin: 0; box-shadow: 0 4px 10px rgba(4,106,56,0.25); align-items:center;">
        <div style="flex:1;">
            <div style="font-weight:700; font-size:1rem; margin-bottom:2px;">Install App</div>
            <div style="font-size:0.85rem; opacity:0.9;">Add to home screen</div>
        </div>
        <button onclick="installPWA()" style="background:white; color:var(--primary); border:none; padding:8px 16px; border-radius:30px; font-weight:700; cursor:pointer; margin-left:15px; white-space:nowrap; font-size: 0.9rem;">Install</button>
        <button onclick="dismissInstall()" style="background:transparent; color:white; border:none; padding:10px; cursor:pointer; margin-left:5px;">?</button>
    </div>


    <!-- SUPPORT VIEW (Coach & Community) -->
    <div id="view-support" class="app-view" style="display:none; padding-bottom: 80px;">
        <div class="app-header">
            <div class="app-logo">Support</div>
            <div class="profile-icon" onclick="switchAppTab('profile', this)">S</div>
        </div>
        
        <div style="padding: 20px; min-height: calc(100vh - 160px); display: flex; flex-direction: column;">
            
            <!-- Tab Switcher for Support -->
            <div style="display: flex; background: #f1f5f9; padding: 4px; border-radius: 12px; margin-bottom: 25px;">
                <button class="sub-btn active" style="flex:1; border:none; box-shadow:none; background:white; color:var(--primary); font-weight: 600;" onclick="showSupportTab('chat', this)">Coach Chat</button>
                <button class="sub-btn" style="flex:1; border:none; box-shadow:none; background:transparent; color:#64748b;" onclick="showSupportTab('community', this)">Community</button>
            </div>

            <!-- CHAT VIEW CONTAINER -->
            <!-- CHAT VIEW CONTAINER (Messenger Style Match) -->
            <div id="support-chat" style="display: flex; flex-direction: column; height: 100vh; background: #fff; position: relative; padding-bottom: 0;">
                
                <!-- Fixed Header (Matches Community) -->
                <div style="height: 60px; border-bottom: 1px solid #f1f5f9; display: flex; align-items: center; justify-content: center; position: sticky; top: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(5px); z-index: 50;">
                    <div style="text-align: center;">
                        <div style="font-weight: 700; font-size: 1.1rem; color: var(--text-main);">Coach Shannon</div>
                        <div id="coach-header-status-text" style="font-size: 0.75rem; color: var(--primary); font-weight: 600;">Active Now</div>
                    </div>
                </div>

                <!-- Chat Stream -->
                <div id="chat-messages-container" style="padding: 15px; padding-bottom: 140px; overflow-y: scroll; -webkit-overflow-scrolling: touch; height: calc(100vh - 130px); display: block;">
                    <!-- Intro Message (re-added here as static first item, or handled by JS history load) -->
                    <div style="display: flex; flex-direction: column; align-items: flex-start; margin-bottom: 20px; max-width: 85%;">
                        <div style="background: #f8fafc; padding: 15px 20px; border-radius: 0 16px 16px 16px; border: 1px solid #e2e8f0; color: var(--text-main);">
                        <p style="margin: 0; font-size: 0.95rem; line-height: 1.5;">Hey there! I'm Shannon, your reset coach. Leave a message here about your progress or any questions. I'll review it and get back to you with guidance!</p>
                        </div>
                        <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 5px; margin-left: 2px;">Shannon  Always here</div>
                    </div>
                </div>

                <!-- Input Area (Fixed above bottom nav) -->
                <div style="position: fixed; bottom: 70px; left: 0; width: 100%; background: white; padding: 10px 15px; border-top: 1px solid #f1f5f9; z-index: 60; box-shadow: 0 -2px 10px rgba(0,0,0,0.02);">
                    <form onsubmit="event.preventDefault(); submitCoachMessage();" style="display: flex; align-items: center; gap: 10px; width: 100%; margin: 0;">
                        <input type="text" id="coach-chat-input" placeholder="Ask your coach..." style="flex: 1; background: #f1f5f9; border: none; padding: 12px 15px; border-radius: 20px; font-size: 1rem; outline: none; color: var(--text-main);">
                        <div onclick="submitCoachMessage()" style="width: 40px; height: 40px; border: none; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.1s; flex-shrink: 0;">
                                <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: white; margin-left: 4px; pointer-events: none;"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                        </div>
                        <button type="submit" style="display:none;"></button>
                    </form>
                </div>
            </div>

            <!-- COMMUNITY INTERFACE (Hidden by default) -->
            <!-- COMMUNITY INTERFACE (Messenger Style) -->
            <div id="support-community" style="display: none; height: 100vh; background: #fff; position: relative; padding-bottom: 0;">
                <!-- Fixed Chat Header -->
                <div style="height: 60px; border-bottom: 1px solid #f1f5f9; display: flex; align-items: center; justify-content: center; position: sticky; top: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(5px); z-index: 50;">
                    <div style="text-align: center;">
                        <div style="font-weight: 700; font-size: 1.1rem; color: var(--text-main);">Inner Circle Group</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">20 members  Active now</div>
                    </div>
                </div>

                <!-- Chat Stream -->
                <div id="community-chat-stream" style="padding: 15px; padding-bottom: 140px; overflow-y: scroll; -webkit-overflow-scrolling: touch; height: calc(100vh - 130px);">
                    <!-- Messages injected here -->
                </div>

                <!-- Input Area (Fixed above bottom nav) -->
                <div style="position: fixed; bottom: 70px; left: 0; width: 100%; background: white; padding: 10px 15px; border-top: 1px solid #f1f5f9; z-index: 60; box-shadow: 0 -2px 10px rgba(0,0,0,0.02);">
                    <form onsubmit="event.preventDefault(); sendCommunityMessage();" style="display: flex; align-items: center; gap: 10px; width: 100%; margin: 0;">
                        <input type="text" id="community-chat-input" placeholder="Message..." style="flex: 1; background: #f1f5f9; border: none; padding: 12px 15px; border-radius: 20px; font-size: 1rem; outline: none; color: var(--text-main);">
                        <!-- Clickable container or specific button logic -->
                        <div onclick="sendCommunityMessage()" style="width: 40px; height: 40px; border: none; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.1s; flex-shrink: 0;">
                             <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: white; pointer-events: none;"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                        </div>
                        <button type="submit" style="display:none;"></button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ACTIVE WORKOUT PLAYER (Hidden by default) -->
    <div id="view-active-workout-stub" class="app-view" style="display:none; background: #fff; padding-bottom: 0;">
        <!-- Workout Header -->
        <div style="position: sticky; top:0; z-index:100; background:white; border-bottom:1px solid #eee; padding: 15px 20px; display:flex; justify-content:space-between; align-items:center;">
            <div onclick="quitWorkout()" style="cursor:pointer; color:var(--text-muted);">?</div>
            <div style="font-weight:700;" id="stub-workout-player-title">Workout</div>
            <div style="font-family:monospace; font-size:1.1rem; color:var(--primary);" id="stub-workout-timer">00:00</div>
        </div>

        <!-- Video Player Stub -->
        <div style="width:100%; height:220px; background:black; display:flex; align-items:center; justify-content:center; position:relative;">
            <div id="stub-workout-video-placeholder" style="color:white; text-align:center;">
                <div style="font-size:3rem;">?</div>
                <div>Play Video Tutorial</div>
            </div>
            <!-- In real app, proper video tag here -->
        </div>

        <!-- Exercise List -->
        <div id="stub-workout-exercises-list" style="padding: 20px; padding-bottom: 100px;">
            <!-- Dynamic Content Injected Here -->
        </div>

        <!-- Finish Bar -->
        <div style="position: fixed; bottom:0; left:0; width:100%; padding: 20px; background:white; border-top:1px solid #eee; box-shadow: 0 -5px 20px rgba(0,0,0,0.05);">
            <button onclick="finishWorkout()" class="btn-primary" style="width:100%; border-radius:30px;">FINISH WORKOUT</button>
        </div>
    </div>

    <!-- WORKOUT SUCCESS SCREEN -->
    <div id="view-workout-success-stub" class="app-view" style="display:none; background: var(--primary); color:white; text-align:center; flex-direction:column; align-items:center; justify-content:center; height:100%;">
        <div style="font-size: 5rem; margin-bottom: 20px;">?</div>
        <h1 style="font-family: 'Playfair Display'; font-size: 3rem; margin-bottom: 10px;">High Five!</h1>
        <p style="font-size: 1.2rem; opacity: 0.9;">Workout Complete</p>
        <div style="margin-top: 40px; background: rgba(255,255,255,0.1); padding: 20px; border-radius: 16px;">
            <div style="font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;">Duration</div>
            <div style="font-size: 2rem; font-weight: 700;" id="stub-success-duration">24:00</div>
        </div>
        <button onclick="closeSuccessScreen()" style="margin-top: 50px; background: white; color: var(--primary); border:none; padding: 15px 40px; border-radius: 30px; font-weight: 700; font-size: 1rem; cursor: pointer;">DONE</button>
    </div>

    <style>
        /* Workout Logger Styles */
        .exercise-logger-card {
            border: 1px solid #eee;
            border-radius: 12px;
            margin-bottom: 25px;
            overflow: hidden;
        }
        .exercise-header {
            background: #f8fafc;
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .set-row {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid #f1f5f9;
            gap: 10px;
        }
        .set-col-label {
            font-size: 0.75rem; color: #94a3b8; text-transform: uppercase; text-align: center;
        }
        .set-input {
            background: #f1f5f9;
            border: 1px solid transparent;
            border-radius: 6px;
            text-align: center;
            padding: 8px;
            width: 100%;
            font-weight: 600;
            color: var(--text-main);
        }
        .set-input:focus { background: white; border-color: var(--primary); outline: none; }
        .set-check {
            width: 35px; height: 35px;
            border-radius: 6px;
            border: 2px solid #e2e8f0;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            color: transparent;
            transition: all 0.2s;
        }
        .set-check.completed {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        /* Day Completion Modal */
        .completion-modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            backdrop-filter: blur(8px);
            animation: fadeIn 0.5s ease-out;
        }
        .completion-modal {
            background: white;
            padding: 40px;
            border-radius: 24px;
            text-align: center;
            max-width: 90%;
            width: 350px;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            animation: popUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 4px solid var(--secondary);
        }
        @keyframes popUp {
            from { opacity: 0; transform: scale(0.8) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        .confetti-piece {
            position: absolute;
            width: 10px; height: 10px;
            background: #ffd700;
            top: -10px;
            z-index: 10000;
        }
    </style>

    <!-- DAY COMPLETION MODAL -->
    <div id="day-completion-modal" class="completion-modal-overlay">
        <div class="completion-modal">
            <div style="font-size: 4rem; margin-bottom: 20px; animation: bounce 1s infinite;">??</div>
            <h2 style="color: var(--primary); font-size: 1.8rem; margin: 0 0 10px 0;">Day Complete!</h2>
            <p style="color: var(--text-muted); margin-bottom: 30px;" id="completion-text">You have successfully finished Day 1.</p>
            
            <div style="background: #f0fdf4; padding: 15px; border-radius: 12px; margin-bottom: 30px; border: 1px solid #bbf7d0;">
                <div style="font-size: 0.9rem; color: #166534; font-weight: 600;">Cortisol Level: Stabilizing ??</div>
            </div>

            <button onclick="closeCompletionModal()" style="background: var(--primary); color: white; border: none; padding: 15px 40px; border-radius: 50px; font-weight: 700; font-size: 1.1rem; cursor: pointer; box-shadow: 0 5px 15px rgba(4, 106, 56, 0.3);">
                CONTINUE
            </button>
        </div>
    </div>


<!-- MOVEMENT VIEW (Shared Main Tab) -->
<div id="movement-tab" class="app-view" style="display:none;">
    <div class="app-header">
        <div class="app-logo">Movement Studio</div>
        <div class="profile-icon" onclick="switchAppTab('profile', this)">S</div>
    </div>
    
    <div style="padding: 25px;">
        <div style="display:flex; justify-content:space-between; align-items:flex-end; margin-bottom:20px;">
            <div>
                <div style="color:var(--text-muted); font-size:0.85rem; font-weight:600; text-transform:uppercase; letter-spacing:1px; margin-bottom:5px;" id="movement-today-date">Day 1</div>
                <h1 style="color:var(--primary); margin:0; font-size:2rem; letter-spacing:-1px;">Today's Schedule</h1>
            </div>
            <button onclick="openCheckInModal()" style="background: white; border: 1px solid var(--primary); color: var(--primary); padding: 8px 16px; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">Regenerate Suggestion</button>
        </div>

        <!-- Dynamic Hero Container -->
        <div id="movement-hero-container"></div>

        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
    <h3 style="margin:0;">Other Options</h3>
    <button onclick="openWorkoutBuilder()" style="background:var(--primary); color:white; border:none; padding:8px 16px; border-radius:20px; font-weight:700; font-size:0.8rem; display:flex; align-items:center; gap:5px;">
        <span>+</span> Build Custom
    </button>
</div>

        <!-- Dynamic Grid Container -->
        <div id="movement-grid-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;"></div>
    </div>
</div>

<!-- MOVED CHECK-IN MODAL TO BODY ROOT -->

<style>
    .checkin-btn.selected {
        border-color: var(--primary) !important;
        background: #f0fdf4 !important;
        color: var(--primary);
    }
</style>





<script>
let customWorkoutSelection = [];

function openWorkoutBuilder() {
    customWorkoutSelection = []; // Reset on open
    document.getElementById('builder-search').value = '';
    filterExerciseLibrary('');
    updateBuilderUI();
    hideAllAppViews();
    document.getElementById('view-workout-builder').style.display = 'block';
    document.querySelector('.bottom-nav').style.display = 'none';
}

function filterExerciseLibrary(query) {
    const list = document.getElementById('builder-library-list');
    if (!list) {
        console.error("Builder library list element not found!");
        return;
    }
    list.innerHTML = '';
    
    // Safety check for library loading
    if (typeof EXERCISE_VIDEOS === 'undefined') {
        list.innerHTML = `
            <div style="padding:20px; text-align:center; color:red; background:#fee2e2; border-radius:12px;">
                <strong>Error: Exercise Library Not Loaded</strong><br>
                <div style="font-size:0.8rem; margin-top:5px;">Please verify 'exercise_videos.js' file exists and is in the same folder.</div>
            </div>`;
        return;
    }

    const terms = query.toLowerCase().split(' ');
    let matches = 0;
    const maxItems = 50; // Rendering limit
    
    const allKeys = Object.keys(EXERCISE_VIDEOS);
    
    // Debug: If empty, show count
    if (allKeys.length === 0) {
        list.innerHTML = '<div style="padding:20px; text-align:center;">Library is empty.</div>';
        return;
    }
    
    for (let key of allKeys) {
        let match = true;
        const keyLower = key.toLowerCase();
        for (let term of terms) {
            if (!keyLower.includes(term)) { match = false; break; }
        }
        
        if (match) {
            matches++;
            if (matches > maxItems && query.length < 2) break; // Optimization for empty search
            
            const isSelected = customWorkoutSelection.includes(key);
            
            const div = document.createElement('div');
            // Use inline flex to ensure visibility
            div.style.cssText = `background:white; border:1px solid ${isSelected ? 'var(--primary)' : '#f1f5f9'}; padding:15px; border-radius:16px; display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; min-height:60px;`;
            if(isSelected) div.style.background = '#f0fdf4';
            
            div.innerHTML = `
                <div style="font-weight:600; font-size:0.95rem; color:var(--text-main); flex:1; padding-right:10px;">${key}</div>
                <button onclick="toggleBuilderItem(this, '${key.replace(/'/g, "\\'")}')" style="width:32px; height:32px; border-radius:50%; border:none; background:${isSelected ? 'var(--primary)' : '#f1f5f9'}; color:${isSelected ? 'white' : '#94a3b8'}; display:flex; align-items:center; justify-content:center; cursor:pointer;">
                    ${isSelected ? '?' : '+'}
                </button>
            `;
            list.appendChild(div);
        }
    }
    
    if (matches === 0) {
        list.innerHTML = '<div style="text-align:center; padding:40px; color:var(--text-muted);">No exercises found</div>';
    }
}

function toggleBuilderItem(btn, key) {
    const index = customWorkoutSelection.indexOf(key);
    const parent = btn.parentElement;
    
    if (index > -1) {
        customWorkoutSelection.splice(index, 1);
        parent.style.borderColor = '#f1f5f9';
        parent.style.background = 'white';
        btn.style.background = '#f1f5f9';
        btn.style.color = '#94a3b8';
        btn.innerHTML = '+';
    } else {
        customWorkoutSelection.push(key);
        parent.style.borderColor = 'var(--primary)';
        parent.style.background = '#f0fdf4';
        btn.style.background = 'var(--primary)';
        btn.style.color = 'white';
        btn.innerHTML = '?';
    }
    updateBuilderUI();
}

function updateBuilderUI() {
    const floatAction = document.getElementById('builder-floating-action');
    const countSpan = document.getElementById('builder-count');
    
    if (customWorkoutSelection.length > 0) {
        floatAction.style.display = 'block';
        countSpan.innerText = customWorkoutSelection.length;
    } else {
        floatAction.style.display = 'none';
    }
}

function startCustomBuilderWorkout() {
    if (customWorkoutSelection.length === 0) return;
    
    // Construct a dynamic workout object
    const customWorkout = {
        title: 'Custom Session',
        name: 'Custom Builder',
        description: 'Your personalized session',
        exercises: customWorkoutSelection.map(key => ({
            name: key,
            sets: 3,
            reps: '12',
            videoUrl: '', // Will be looked up
            desc: ''
        }))
    };
    
    // Hijack the player
    document.getElementById('workout-player-title').innerText = customWorkout.title;
    document.getElementById('workout-player-goal').innerText = customWorkout.description;
    
    const list = document.getElementById('workout-exercises-list');
    list.innerHTML = '';
    
    customWorkout.exercises.forEach((ex, idx) => {
        const card = document.createElement('div');
        card.style.cssText = "background:white; border-radius:24px; box-shadow:0 10px 30px rgba(0,0,0,0.05); margin-bottom:25px; overflow:hidden; border:1px solid #f1f5f9;";
        
        let setsHtml = '';
        for(let s=1; s<=ex.sets; s++) {
            setsHtml += getSetRowHtml(ex.name, s, false);
        }

        const videoUrl = getExerciseVideoUrl(ex.name);

        card.innerHTML = `
            <div style="padding:20px; display:flex; gap:15px; align-items:center;">
                <div onclick="openExerciseVideo('${videoUrl}', '${ex.name.replace(/'/g, "\\'")}')" style="width:60px; height:60px; border-radius:14px; background:#f1f5f9; overflow:hidden; flex-shrink:0; position:relative; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.05); border:1px solid #e2e8f0;">
                    ${videoUrl.includes('youtube') || videoUrl.includes('youtu.be') ? 
                        `<img src="https://img.youtube.com/vi/${videoUrl.includes('embed/') ? videoUrl.split('embed/')[1].split('?')[0] : videoUrl.split('v=')[1]?.split('&')[0]}/0.jpg" style="width:100%; height:100%; object-fit:cover; opacity:0.8;">` : 
                        `<div style="width:100%; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; background:linear-gradient(135deg, #1e293b, #0f172a);">
                            <div style="width:24px; height:24px; background:white; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom:2px; box-shadow:0 4px 6px rgba(0,0,0,0.2);">
                                <svg viewBox="0 0 24 24" style="width:12px; height:12px; fill:black; margin-left:2px;"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                            <span style="color:rgba(255,255,255,0.9); font-size:0.55rem; font-weight:700; text-transform:uppercase;">Watch</span>
                        </div>`
                    }

                </div>
                <div style="flex:1;">
                    <h3 style="margin:0 0 4px 0; font-size:1.1rem; font-weight:700; color:var(--text-main); line-height:1.2;">${ex.name}</h3>
                    <p style="margin:0; font-size:0.8rem; color:var(--text-muted); line-height:1.3;">Custom Set</p>
                </div>
            </div>
            <div style="display:grid; grid-template-columns: 30px 1fr 1fr 1fr 1fr; gap:12px; padding:0 15px 10px 15px; font-size:0.65rem; color:#94a3b8; font-weight:800; text-transform:uppercase; letter-spacing:0.5px; text-align:center;">
                <div>Set</div><div>Prev</div><div>Time</div><div>Reps</div><div>Kg</div>
            </div>
            <div class="sets-list-container">
                ${setsHtml}
            </div>
            <div style="padding:15px; border-top:1px solid #f8fafc;">
                <button onclick="addWorkoutSet(this, '${ex.name.replace(/'/g, "\\'")}', false)" style="width:100%; background:transparent; border:2px dashed #e2e8f0; color:#94a3b8; font-weight:700; font-size:0.8rem; padding:12px; border-radius:12px; cursor:pointer;">+ ADD SET</button>
            </div>
        `;
        list.appendChild(card);
    });

    hideAllAppViews();
    document.getElementById('view-active-workout').style.display = 'block';
    startWorkoutTimer();
}
</script>

<!-- WORKOUT OVERVIEW VIEW -->
<div id="view-workout-overview" class="app-view" style="display:none; height: 100vh; background: white; z-index: 1500; position: fixed; top: 0; left: 0; width: 100%; overflow-y: auto;">
    <div style="position: sticky; top: 0; z-index: 100; background: white; padding: 15px 20px; display: flex; align-items: center; justify-content: space-between;">
        <div onclick="switchAppTab('movement-tab')" style="width: 40px; height: 40px; border-radius: 50%; background: #f8fafc; display: flex; align-items: center; justify-content: center; cursor: pointer;">
             <svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: var(--text-main);"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </div>
        <div id="overview-header-title" style="font-weight: 700; color: var(--text-main);">Workout Overview</div>
        <div style="width: 40px;"></div>
    </div>

    <div style="padding: 20px;">
        <div id="overview-hero-card" style="border-radius: 20px; overflow: hidden; margin-bottom: 25px; position: relative; height: 200px; background: #f1f5f9;">
            <img id="overview-img" src="" style="width: 100%; height: 100%; object-fit: cover;">
            <div style="position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);"></div>
            <div style="position: absolute; bottom: 20px; left: 20px; color: white;">
                <h1 id="overview-title" style="margin: 0; font-size: 1.8rem;">Workout Name</h1>
                <div id="overview-meta" style="opacity: 0.9; font-size: 0.9rem;">22 mins  6 Exercises</div>
            </div>
        </div>

        <div style="margin-bottom: 30px;">
            <h3 style="margin: 0 0 10px 0; font-size: 1.1rem;">Equipment Needed</h3>
            <div id="overview-equipment" style="display: flex; gap: 10px; flex-wrap: wrap;">
                <!-- Equipment Badges -->
            </div>
        </div>

        <div style="margin-bottom: 30px;">
            <h3 style="margin: 0 0 10px 0; font-size: 1.1rem;">Instructions</h3>
            <p id="overview-instructions" style="color: var(--text-muted); line-height: 1.5; font-size: 0.95rem;"></p>
        </div>

        <div>
            <h3 style="margin: 0 0 15px 0; font-size: 1.1rem;">Exercise List</h3>
            <div id="overview-exercise-list">
                <!-- Exercises List -->
            </div>
        </div>
        
        <div style="height: 100px;"></div>
    </div>

    <!-- Floating Start Button -->
    <div style="position: fixed; bottom: 20px; left: 20px; right: 20px; z-index: 101;">
        <button id="btn-start-now" style="width: 100%; padding: 18px; background: #FFC107; color: black; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: 800; box-shadow: 0 10px 25px rgba(255, 193, 7, 0.4);">
            START WORKOUT
        </button>
    </div>
</div>

<!-- ACTIVE WORKOUT PLAYER VIEW -->
<div id="view-active-workout" class="app-view" style="display:none; height: 100vh; background: #f8fafc; z-index: 2000; position: fixed; top: 0; left: 0; width: 100%; overflow-y: auto;">
    
    <!-- Top Nav Bar -->
    <div style="position: sticky; top: 0; z-index: 100; background: black; color: white; padding: 15px 20px; display: flex; align-items: center; justify-content: space-between;">
        <div onclick="quitWorkout()" style="font-weight: 600; cursor: pointer; color: #FF4444;">Cancel</div>
        <div style="text-align: center;">
            <div id="workout-timer" style="font-family: monospace; font-size: 1.2rem; font-weight: 700; color: white;">00:00</div>
        </div>
        <div onclick="finishWorkout()" style="font-weight: 600; cursor: pointer; color: #44FF44;">Save</div>
    </div>

    <div style="padding: 15px; padding-bottom: 120px;">
        <h1 id="workout-player-title" style="margin: 0 0 5px 0; font-size: 1.3rem; line-height: 1.2;">Workout Title</h1>
        <p id="workout-player-goal" style="font-size: 0.85rem; color: var(--text-muted); margin: 0 0 20px 0; line-height: 1.4;"></p>

        <div id="workout-exercises-list">
            <!-- Dynamic Content Injected Here via JS -->
        </div>
    </div>
</div>

</div>




<!-- WORKOUT SUCCESS VIEW -->
<div id="view-workout-success" class="app-view" style="display:none; height: 100vh; position: fixed; top: 0; left: 0; width: 100%; z-index: 2000; background: var(--primary); color: white; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 40px;">
    
    <div style="font-size: 5rem; margin-bottom: 20px;">?</div> 
    <!-- High Five Emoji or similar graphic -->
    
    <h1 style="font-family: 'Playfair Display'; font-size: 3rem; margin: 0; color: white;">High Five!</h1>
    <p style="font-size: 1.2rem; opacity: 0.9; margin-top: 10px;">Workout Completed</p>
    
    <div style="margin: 40px 0; background: rgba(255,255,255,0.1); padding: 20px 40px; border-radius: 16px; backdrop-filter: blur(10px);">
        <div style="font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.8;">Duration</div>
        <div id="success-duration" style="font-size: 3rem; font-weight: 700; font-family: monospace;">00:00</div>
    </div>
    
    <p style="max-width: 300px; margin-bottom: 40px; line-height: 1.6; opacity: 0.9;">Great job signaling safety to your body. Your cortisol levels are thanking you.</p>
    
    <button onclick="closeSuccessScreen()" style="background: white; color: var(--primary); border: none; padding: 15px 50px; border-radius: 50px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.2);">
        DONE
    </button>
</div>

<style>
.exercise-logger-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    margin-bottom: 20px;
    border: 1px solid rgba(0,0,0,0.05);
    overflow: hidden;
}
</style>

</div> <!-- End Main Container -->

    <!-- Bottom Navigation (Moved Outside Container) -->
    <nav class="bottom-nav" style="z-index: 9999 !important; position: fixed; bottom: 0; left: 0; width: 100%;">
        <button class="nav-item active" onclick="switchAppTab('dashboard', this)">
            <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            <span>Home</span>
        </button>
        <button class="nav-item" onclick="switchAppTab('meals', this)">
            <svg viewBox="0 0 24 24"><path d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"/></svg>
            <span>Meals</span>
        </button>
        <button class="nav-item" onclick="switchAppTab('movement-tab', this)">
            <svg viewBox="0 0 24 24"><path d="M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22 14.86 20.57 16.29 22 18.43 19.86 19.86 21.29 21.29 19.86l-1.43-1.43L21.29 17l-1.43-1.43L18.43 17l-3.57-3.57z"/></svg>
            <span>Movement</span>
        </button>
        <button class="nav-item" onclick="switchAppTab('support', this)">
            <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/></svg>
            <span>Support</span>
        </button>
     </nav>

    <!-- PROFILE VIEW -->
    <div id="view-profile" class="app-view" style="display:none; padding-bottom: 80px;">
        <div class="app-header">
            <div class="app-logo">Your Profile</div>
            <div style="width:35px;"></div> <!-- Spacer -->
        </div>

        <div class="profile-header">
            <!-- Robust Profile Photo: Text S is background, IMG overlays it -->
            <div class="profile-photo-container" style="display:flex; align-items:center; justify-content:center; background:var(--accent-green); overflow:hidden;">
                <span id="profile-default-initial" style="font-size:3rem; font-weight:700; color:var(--primary);">S</span>
                <img src="" class="profile-photo" id="profile-photo-img" style="position:absolute; top:0; left:0; width:100%; height:100%; border-radius:50%; object-fit:cover;" onerror="this.style.opacity=0" onload="this.style.opacity=1">
                
                <label for="profile-photo-input" class="photo-edit-btn">
                    <svg viewBox="0 0 24 24" style="width:18px; height:18px; fill:white;"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                </label>
                <input type="file" id="profile-photo-input" style="display:none;" onchange="handlePhotoUpload(this)">
            </div>
            <h2 class="profile-name-large" id="profile-name-display" onclick="editProfileDetail('name', 'Name')" style="cursor:pointer; text-decoration-line:underline; text-decoration-style:dotted; text-underline-offset:4px;">Shannon</h2>
            <div class="profile-email" id="profile-email-display" onclick="editProfileDetail('email', 'Email')" style="cursor:pointer; text-decoration-line:underline; text-decoration-style:dotted; text-underline-offset:4px;">shannon@example.com</div>
        </div>

        <div class="profile-details-grid">
            <div class="detail-item" onclick="editProfileDetail('age', 'Age')" style="cursor:pointer; position:relative;">
                <div class="detail-label">Age</div>
                <div class="detail-val" id="profile-age-display">34</div>
                <div style="font-size:0.65rem; color:var(--secondary); margin-top:4px;">?? Edit</div>
            </div>
            <div class="detail-item" onclick="editProfileDetail('weight', 'Weight')" style="cursor:pointer; position:relative;">
                <div class="detail-label">Weight</div>
                <div class="detail-val" id="profile-weight-display">68 kg</div>
                <div style="font-size:0.65rem; color:var(--secondary); margin-top:4px;">?? Edit</div>
            </div>
            <div class="detail-item" onclick="editProfileDetail('goal', 'Goal')" style="cursor:pointer; position:relative;">
                <div class="detail-label">Goal</div>
                <div class="detail-val" id="profile-goal-display">Fat Loss</div>
                <div style="font-size:0.65rem; color:var(--secondary); margin-top:4px;">?? Edit</div>
            </div>
            <div class="detail-item" onclick="editProfileDetail('profile', 'Profile Type')" style="cursor:pointer; position:relative;">
                <div class="detail-label">Profile</div>
                <div class="detail-val" id="profile-type-display">Cortisol</div>
                <div style="font-size:0.65rem; color:var(--secondary); margin-top:4px;">?? Edit</div>
            </div>
        </div>

    <!-- EDIT PROFILE MODAL -->
    <div id="edit-profile-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:9999; align-items:center; justify-content:center; backdrop-filter:blur(5px);">
        <div style="background:white; width:90%; max-width:350px; border-radius:24px; padding:30px; position:relative; animation: slideUp 0.3s ease-out;">
            <h3 id="epm-title" style="color:var(--primary); margin:0 0 15px 0; text-align:center;">Edit</h3>
            
            <input type="text" id="epm-input" style="width:100%; box-sizing:border-box; padding:15px; border:1px solid #ddd; border-radius:12px; font-size:1.1rem; margin-bottom:20px; text-align:center;">
            
            <div style="display:flex; gap:10px;">
                <button onclick="document.getElementById('edit-profile-modal').style.display='none'" style="flex:1; background:#f1f5f9; color:var(--text-main); border:none; padding:12px; border-radius:50px; font-weight:600; cursor:pointer;">Cancel</button>
                <button onclick="saveProfileEdit()" style="flex:1; background:var(--primary); color:white; border:none; padding:12px; border-radius:50px; font-weight:600; cursor:pointer;">Save</button>
            </div>
        </div>
    </div>
    <script>
    let currentEditField = null;
    function editProfileDetail(field, label) {
        currentEditField = field;
        const displayId = field === 'profile' ? 'profile-type-display' : 'profile-' + field + '-display';
        let currentVal = document.getElementById(displayId).innerText;
        
        // Strip ' kg' if weight
        if(field === 'weight') currentVal = currentVal.replace(' kg', '').trim();
        
        document.getElementById('epm-title').innerText = "Edit " + label;
        document.getElementById('epm-input').value = currentVal;
        document.getElementById('edit-profile-modal').style.display = 'flex';
        document.getElementById('epm-input').focus();
    }
    
    function saveProfileEdit() {
        const newVal = document.getElementById('epm-input').value;
        if(!newVal) return;
        
        // Update DOM
        const displayId = currentEditField === 'profile' ? 'profile-type-display' : 'profile-' + currentEditField + '-display';
        let displayVal = newVal;
        if(currentEditField === 'weight' && !newVal.toLowerCase().includes('k') && !newVal.toLowerCase().includes('l')) {
             displayVal += " kg";
        }
        document.getElementById(displayId).innerText = displayVal;
        
        // Update Session Storage
        let quizData = {};
        try { quizData = JSON.parse(sessionStorage.getItem('userProfile') || '{}'); } catch(e){}
        
        if (currentEditField === 'goal') quizData.goal_weight = newVal;
        else if (currentEditField === 'name') {
            quizData.name = newVal;
            sessionStorage.setItem('userName', newVal); // Priority Update
        }
        else if (currentEditField === 'email') {
            quizData.email = newVal;
            sessionStorage.setItem('userEmail', newVal); // Priority Update
        }
        else quizData[currentEditField] = newVal;
        
        sessionStorage.setItem('userProfile', JSON.stringify(quizData));
        
        // Hide Modal
        document.getElementById('edit-profile-modal').style.display = 'none';
    }
    </script>
    
    <!-- APP SETTINGS -->
    <h3 style="padding: 0 25px; margin-bottom: 20px;">Settings</h3>
    <div style="padding: 0 25px; margin-bottom: 30px;">
        <div style="background:white; border-radius:12px; border:1px solid #f1f5f9; overflow:hidden;">
             <div style="padding:15px; border-bottom:1px solid #f1f5f9; display:flex; justify-content:space-between; align-items:center;">
                 <div>Color Theme</div>
                 <select id="theme-selector" onchange="applyAppTheme(this.value)" style="border:1px solid #e2e8f0; padding:5px 10px; border-radius:8px; color:var(--primary); font-weight:600; outline:none; background:transparent; font-family: 'Inter', sans-serif; cursor: pointer;">
                     <option value="default">Forest (Default)</option>
                     <option value="antigravity-dark">Antigravity Dark</option>
                     <option value="antigravity-light">Antigravity Light</option>
                     <option value="ocean">Ocean Calm</option>
                     <option value="sunset">Sunset Glow</option>
                 </select>
             </div>
             <div style="padding:15px; border-bottom:1px solid #f1f5f9; display:flex; justify-content:space-between; align-items:center;">
                 <div>Units</div>
                 <div style="font-size:0.9rem; font-weight:700; color:var(--primary); cursor:pointer;" onclick="alert('Units toggled (Simulation)')">Metric (kg) ?</div>
             </div>
             <div style="padding:15px; border-bottom:1px solid #f1f5f9; display:flex; justify-content:space-between; align-items:center;">
                 <div>Notifications</div>
                 <label class="toggle-switch" style="display:inline-block; width:40px; height:24px; position:relative;">
                     <input type="checkbox" checked onchange="console.log('Notifs toggled')">
                     <span style="position:absolute; inset:0; background:#ccc; border-radius:24px; transition:0.3s;" class="slider"></span>
                     <span style="position:absolute; top:2px; left:2px; width:20px; height:20px; background:white; border-radius:50%; transition:0.3s;" class="knob"></span>
                 </label>
                 <!-- Inline style for slider knob behavior needs css, will add simple mock -->
                 <style> input:checked + .slider { background: var(--primary) !important; } input:checked + .slider + .knob { transform: translateX(16px); } </style>
             </div>
              <div style="padding:15px; display:flex; justify-content:space-between; align-items:center;">
                 <div>Hide Weight</div>
                 <label class="toggle-switch" style="display:inline-block; width:40px; height:24px; position:relative;">
                     <input type="checkbox" onchange="alert('Dashboard tiles Updated (Simulation)')">
                     <span style="position:absolute; inset:0; background:#ccc; border-radius:24px; transition:0.3s;"></span>
                     <span style="position:absolute; top:2px; left:2px; width:20px; height:20px; background:white; border-radius:50%; transition:0.3s; transform: translateX(0);"></span>
                 </label>
             </div>
        </div>
    </div>

        <h3 style="padding: 0 25px; margin-bottom: 20px;">Connected Apps</h3>
        <div class="connected-apps-list">
            <div class="app-item">
                <div class="app-info">
                    <div class="app-icon" style="background:#fee2e2; color:#dc2626;">??</div>
                    <div>
                        <div style="font-weight:700;">Apple Health</div>
                        <div style="font-size:0.75rem; color:var(--text-muted);">Activity Rings</div>
                    </div>
                </div>
                <button class="app-btn connected" disabled>Connected</button>
            </div>
            <div class="app-item">
                <div class="app-info">
                    <div class="app-icon" style="background:#dbeafe; color:#2563eb;">??</div>
                    <div>
                        <div style="font-weight:700;">MyFitnessPal</div>
                        <div style="font-size:0.75rem; color:var(--text-muted);">Calorie Sync</div>
                    </div>
                </div>
                <button class="app-btn" onclick="connectApp('MyFitnessPal')">Connect</button>
            </div>
            <div class="app-item">
                <div class="app-info">
                    <div class="app-icon" style="background:#f1f5f9; color:#0f172a;">?</div>
                    <div>
                        <div style="font-weight:700;">Fitbit</div>
                        <div style="font-size:0.75rem; color:var(--text-muted);">Steps & Sleep</div>
                    </div>
                </div>
                <button class="app-btn" onclick="connectApp('Fitbit')">Connect</button>
            </div>
            <div class="app-item">
                <div class="app-info">
                    <div class="app-icon" style="background:#1a202c; color:white;">?</div>
                    <div>
                        <div style="font-weight:700;">Garmin</div>
                        <div style="font-size:0.75rem; color:var(--text-muted);">Workouts & Recovery</div>
                    </div>
                </div>
                <button class="app-btn" onclick="connectApp('Garmin')">Connect</button>
            </div>
        </div>



        <div style="padding: 0 25px; margin-top: 30px;">
            <button class="btn-primary" style="width:100%; padding:15px; border-radius:12px; font-weight:700; background:var(--primary);" onclick="toggleSubscriptionMenu()">
                MANAGE SUBSCRIPTION
            </button>
            
            <div id="subscription-management-menu" class="subscription-menu">
                <button class="sub-action-btn" onclick="togglePauseOptions()">
                    <span>??</span> Pause Subscription
                </button>
                <div id="pause-duration-options" class="pause-options">
                    <button class="pause-btn" onclick="handlePause(1)">1 Month</button>
                    <button class="pause-btn" onclick="handlePause(2)">2 Months</button>
                    <button class="pause-btn" onclick="handlePause(3)">3 Months</button>
                </div>

                <button id="btn-cancel-sub" class="sub-action-btn cancel" onclick="handleSubscriptionAction('cancel')">
                    <span>?</span> Cancel Subscription
                </button>
                <div id="sub-status-msg" style="font-size: 0.75rem; color: var(--text-muted); text-align: center; margin-top: 10px;">
                    Managed securely via Stripe
                </div>
            </div>
        </div>
    </div>

<script>
// PWA & Navigation Logic
document.addEventListener('DOMContentLoaded', () => {
    // 0. Load Chat History
    loadChatHistory();

    // 1. Move Sections out of Meals Container
    // We want Movement and Support to be top-level app views, not sub-views of Meals
    const moveIds = ['movement-tab', 'group', 'view-support', 'sleep', 'view-active-workout', 'view-workout-success', 'view-profile'];
    const container = document.querySelector('.container');
    const bottomNav = document.querySelector('.bottom-nav');
    
    moveIds.forEach(id => {
        const el = document.getElementById(id);
        if (el) {
            el.classList.remove('active');
            el.classList.add('app-view'); // Treat as top level view
            el.style.display = 'none'; // Hide initially
            // Move to main container
            container.appendChild(el);
        }
    });

    // 2. Initialize
    initProgramDate();
    switchAppTab('dashboard', document.querySelector('.nav-item')); // Default to Home
});

// --- DAILY CONTENT LOGIC ---
const COACHING_TIPS = [
    "Eating within 30 minutes of waking stops the morning cortisol spike. Have you had your breakfast?",
    "High cortisol blocks fat burning. Use the 'Somatic Flow' in Movement to signal safety to your body.",
    "Your biology is not your destiny. By changing your input (food/light/movement), you change your output (mood/weight/sleep).",
    "Feeling bloated? Your gut-brain axis is reset today. Sip warm lemon water to keep things moving.",
    "The 3PM slump is a blood sugar signal. Try the 'Adrenal Rescue Smoothie' instead of a third coffee.",
    "Sleep is when you shed. 70% of fat loss happens during deep REM sleep. Prioritize an early bedtime.",
    "Box breathing for 2 minutes can lower salivary cortisol by 20%. Try it before your next meal.",
    "Vitamin D3 is actually a pro-hormone. Are you taking your daily drop? It's key for mood stability.",
    "Alcohol blocks the liver's ability to detox estrogen for 24 hours. Stick to sparkling water tonight!",
    "Muscle is metabolic currency. Even the gentle resistance in our Pilates core sessions helps you burn at rest.",
    "Magnesium glycinate is the 'relaxation mineral.' Take it 1 hour before bed for deeper sleep architecture.",
    "Raw carrot salad helps bind excess estrogen. Have you had your crunch today?",
    "Caffeine on an empty stomach spikes cortisol by 50%. Always eat your P+F+F (Protein, Fat, Fiber) first.",
    "You are halfway through your 28-day reset. Your skin should be starting to glow as inflammation drops.",
    "Nature is a nervous system hack. 10 minutes of morning sunlight sets your circadian rhythm for tonight.",
    "Dandelion tea supports liver phase II detox. Perfect for this stage of the flush.",
    "Consistency over perfection. If you missed a meal, don't worry. Just make the next choice a green one.",
    "Your thyroid needs selenium. 1-2 Brazil nuts daily is all you need for this metabolic kickstart.",
    "Gut dysbiosis causes brain fog. The fermented foods in this week's plan are feeding your 'good' bugs.",
    "Hydration is not just water. Add a pinch of sea salt to your bottle to help your cells actually absorb it.",
    "Ashwagandha is an adaptogen that 'adopts' your needs. If you're wired, it calms. If you're tired, it lifts.",
    "The 'Stress Belly' is often just persistent inflammation. Notice if your waist feels looser this morning.",
    "Digital detox! Screens after 8 PM block melatonin. Read a physical book tonight instead.",
    "Omega-3s are anti-inflammatory gold. The algae-based DHA in your protocol supports brain and heart.",
    "You're in the final stretch. Your body is now efficient at using fat for fuel instead of just glucose.",
    "Lowering your core temperature by 1 degree helps you fall asleep. Try the warm-to-cool shower trick.",
    "Zinc is critical for hormone conversion. Ensure you're hitting those pumpkin seeds today.",
    "You have successfully reset your biochemistry. This is not a diet, it's a signal of safety to your body. Well done!"
];

function initProgramDate() {
    let startDate = localStorage.getItem('pbb_start_date');
    if (!startDate) {
        startDate = new Date().toISOString();
        localStorage.setItem('pbb_start_date', startDate);
    }

    const start = new Date(startDate);
    const now = new Date();
    const diffTime = Math.abs(now - start);
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    let currentDay = diffDays;
    if (currentDay < 1) currentDay = 1;

    updateDailyContent(currentDay);
}

function updateDailyContent(day) {
    let tipIndex = (day - 1) % COACHING_TIPS.length;
    
    const counterEl = document.getElementById('daily-progress-counter');
    if (counterEl) {
        counterEl.innerText = `Day ${day} of 28`;
        if (day > 28) counterEl.innerText = `Day ${day} (Maintenance)`;
    }

    const tipEl = document.getElementById('daily-coaching-tip');
    if (tipEl) {
        tipEl.innerHTML = `<strong>Day ${day} Insight:</strong> ${COACHING_TIPS[tipIndex]}`;
    }

    // Update Movement Tab Header
    const moveDate = document.getElementById('movement-today-date');
    if (moveDate) {
        moveDate.innerText = `Day ${day}`;
    }

    // --- NEW: Render Today's Meals Logic ---
    const todayContainer = document.getElementById('today-meals-content');
    if (todayContainer) {
        const weekNum = Math.ceil(day / 7);
        const dayIndex = (day - 1) % 7;
        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        const dayName = days[dayIndex];
        const sourceId = `week${weekNum}-${dayName}`;
        
        const sourceCard = document.getElementById(sourceId);
        
        if (sourceCard) {
            // Clone content but keep it generic/clean
            todayContainer.innerHTML = ''; // Clear loading
            const clone = sourceCard.cloneNode(true);
            
            // Adjust styling for 'Today' view if needed, or just append
            // We want it open by default
            clone.classList.add('open');
            clone.style.marginBottom = '20px';
            
            // Remove the ID to avoid duplicates in DOM
            clone.removeAttribute('id');
            
            // Fix onclick to toggle THIS clone, not the original ID
            const header = clone.querySelector('.card-header');
            if(header) header.setAttribute('onclick', 'toggleCard(this.parentElement)');
            
            todayContainer.appendChild(clone);
        } else {
            // Fallback if content not found
            todayContainer.innerHTML = `
                <div style="text-align:center; padding:40px; color:var(--text-muted);">
                    <p>Meals for Day ${day} (${dayName}, Week ${weekNum}) are loading...</p>
                    <button onclick="switchWeek('week${weekNum}', this)" style="margin-top:10px; padding:10px 20px; border-radius:30px; border:1px solid var(--primary); background:transparent; color:var(--primary); cursor:pointer;">View Week ${weekNum} Plan</button>
                    <!-- Debug: Looked for #${sourceId} -->
                </div>
            `;
        }
    }
}

function loadProfileData() {
    let quizData = {};
    try {
        quizData = JSON.parse(sessionStorage.getItem('userProfile') || '{}');
    } catch (e) {
        console.warn("Profile data parse error", e);
    }
    
    const context = {
        name: sessionStorage.getItem('userName') || quizData.name || "Shannon",
        email: sessionStorage.getItem('userEmail') || quizData.email || "shannonrhysbirch@gmail.com",
        age: quizData.age || "34",
        weight: quizData.weight || "68 kg",
        // Prioritize goal weight as requested
        goal: quizData.goal_weight || quizData.goal_body_type || quizData.goalBodyType || "Fat Loss",
        profile: (sessionStorage.getItem('userResult') || 'Cortisol').toUpperCase()
    };

    if(document.getElementById('profile-name-display')) document.getElementById('profile-name-display').innerText = context.name;
    if(document.getElementById('profile-email-display')) document.getElementById('profile-email-display').innerText = context.email;
    if(document.getElementById('profile-age-display')) document.getElementById('profile-age-display').innerText = context.age;
    
    // Handle weight display (avoid double units if stored with unit)
    // Convert to string safely to prevent crashes if weight is a number
    const wStr = String(context.weight).toLowerCase();
    const weightDisplay = wStr.includes('k') || wStr.includes('l') 
        ? context.weight 
        : context.weight + " kg";

    if(document.getElementById('profile-weight-display')) document.getElementById('profile-weight-display').innerText = weightDisplay;
    if(document.getElementById('profile-goal-display')) document.getElementById('profile-goal-display').innerText = context.goal;
    if(document.getElementById('profile-type-display')) document.getElementById('profile-type-display').innerText = context.profile;

    // Load saved avatar if exists
    const savedPhoto = localStorage.getItem('profile_photo');
    if(savedPhoto) {
        const mainImg = document.getElementById('profile-photo-img');
        if(mainImg) mainImg.src = savedPhoto;
        // Also update all small profile icons
        document.querySelectorAll('.profile-icon').forEach(el => {
            el.innerHTML = `<img src="${savedPhoto}" style="width:100%; height:100%; border-radius:50%; object-fit:cover;">`;
            el.style.background = 'transparent';
        });
    }
}

function handlePhotoUpload(input) {
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const photoData = e.target.result;
            document.getElementById('profile-photo-img').src = photoData;
            localStorage.setItem('profile_photo', photoData);
            
            // Update all small icons
            document.querySelectorAll('.profile-icon').forEach(el => {
                el.innerHTML = `<img src="${photoData}" style="width:100%; height:100%; border-radius:50%; object-fit:cover;">`;
                el.style.background = 'transparent';
            });
        };
        reader.readAsDataURL(input.files[0]);
    }
}

function connectApp(appName) {
    const btn = event.target;
    btn.innerText = "Connecting...";
    btn.disabled = true;
    
    setTimeout(() => {
        btn.innerText = "Connected";
        btn.classList.add('connected');
        alert(`${appName} connected successfully! (Simulation)`);
    }, 1500);
}

function toggleSubscriptionMenu() {
    const menu = document.getElementById('subscription-management-menu');
    menu.classList.toggle('active');
}

function togglePauseOptions() {
    const opts = document.getElementById('pause-duration-options');
    opts.classList.toggle('active');
}

async function handlePause(months) {
    if (!confirm(`Pause your subscription for ${months} month(s)? Your access will resume automatically.`)) return;

    const msgEl = document.getElementById('sub-status-msg');
    msgEl.innerText = "Processing pause request...";
    
    try {
        const email = sessionStorage.getItem('userEmail') || "shannon@example.com"; 
        
        const response = await fetch('/.netlify/functions/pause-subscription', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email: email, durationMonths: months })
        });

        const data = await response.json();

        if (response.ok) {
            msgEl.innerText = `? Paused for ${months} months.`;
            msgEl.style.color = "var(--primary)";
            alert(data.message);
            togglePauseOptions(); // Hide options
        } else {
            throw new Error(data.error || "Pause failed");
        }
    } catch (err) {
        console.error(err);
        msgEl.innerText = "Error pausing subscription.";
        msgEl.style.color = "red";
        alert("Error: " + err.message);
    }
}

async function handleSubscriptionAction(action) {
    if (action === 'cancel') {
        if (!confirm("Are you sure you want to cancel? You will lose access to new content at the end of your billing cycle.")) {
            return;
        }

        const btn = document.getElementById('btn-cancel-sub');
        const originalText = btn.innerHTML;
        btn.innerHTML = "Processing...";
        btn.disabled = true;

        try {
            const email = sessionStorage.getItem('userEmail') || "shannon@example.com"; // Fallback for dev
            
            const response = await fetch('/.netlify/functions/cancel-subscription', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email: email })
            });

            const data = await response.json();

            if (response.ok) {
                btn.innerHTML = "<span>?</span> Cancelled";
                btn.classList.remove('cancel');
                document.getElementById('sub-status-msg').innerText = "Subscription cancelled. Access remains until period end.";
                document.getElementById('sub-status-msg').style.color = "var(--primary)";
                alert(data.message);
            } else {
                throw new Error(data.error || "Cancellation failed");
            }

        } catch (err) {
            console.error(err);
            btn.innerHTML = originalText;
            btn.disabled = false;
            alert("Error cancelling subscription: " + err.message + ". Please try again or contact support.");
        }
    }
}



function switchAppTab(tabName, btn) {
    // 1. Update Bottom Nav UI
    document.querySelectorAll('.bottom-nav .nav-item').forEach(b => b.classList.remove('active'));
    if(btn) btn.classList.add('active');
    else {
        // simple fallback
    }

    // 2. Clear All Views
    hideAllAppViews();

    // 3. Show Target View
    if (tabName === 'dashboard') {
        document.getElementById('view-dashboard').style.display = 'block';
    } else if (tabName === 'meals') {
        document.getElementById('view-meals').style.display = 'block';
        if (!document.querySelector('#meals-content-container .view-section.active')) {
            switchWeek('today');
        } else if (document.getElementById('today').classList.contains('active')) {
            renderTodayMeals(); // Refresh today view if active
        }
    } else if (tabName === 'movement-tab') {
        const el = document.getElementById('movement-tab');
        if(el) { 
            el.classList.add('active'); 
            el.style.display='block'; 
            renderMovementView();
            
            // Auto-Check-in Logic (Once per day)
            const todayStr = new Date().toDateString();
            const lastAuto = localStorage.getItem('last_auto_checkin_date');
            
            if (lastAuto !== todayStr) {
                setTimeout(() => {
                    openCheckInModal();
                    localStorage.setItem('last_auto_checkin_date', todayStr);
                }, 500); // Small delay for smooth transition
            }
        }
    } else if (tabName === 'support') {
        const el = document.getElementById('view-support'); // Default to Coach/Chat logic
        if(el) { el.classList.add('active'); el.style.display='block'; }
    } else if (tabName === 'profile') {
        const el = document.getElementById('view-profile');
        if(el) { 
            el.classList.add('active'); 
            el.style.display='block'; 
            // Decouple data loading so errors don't stop view from showing
            setTimeout(loadProfileData, 10);
        }
    }
    
    window.scrollTo(0,0);
}


function switchWeek(id, btn) {
    // Hide all internal meal sections
    document.querySelectorAll('#meals-content-container .view-section').forEach(el => el.classList.remove('active'));
    
    // Show target
    const target = document.getElementById(id);
    if(target) {
        target.classList.add('active');
        if (id === 'today') {
            renderTodayMeals();
        }
    }
    
    // Update Pills
    if(btn) {
        document.querySelectorAll('.pill-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    } else if (id === 'today') {
        // Find today pill if no btn passed
        const pills = document.querySelectorAll('.pill-btn');
        pills.forEach(p => {
            if (p.textContent.toLowerCase() === 'today') {
                pills.forEach(b => b.classList.remove('active'));
                p.classList.add('active');
            }
        });
    }
}

function renderTodayMeals() {
    const container = document.getElementById('today-meals-content');
    if (!container) return;

    // 1. Calculate Day
    const startDate = localStorage.getItem('pbb_start_date');
    if (!startDate) return;

    const start = new Date(startDate);
    const now = new Date();
    const diffTime = Math.abs(now - start);
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    let currentDayNum = diffDays || 1;
    if (currentDayNum > 28) currentDayNum = 28; // Cap at 28

    const weekNum = Math.ceil(currentDayNum / 7);
    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    const dayName = days[now.getDay()];
    
    const targetDayId = `week${weekNum}-${dayName}`;
    const sourceSection = document.getElementById(targetDayId);

    if (!sourceSection) {
        container.innerHTML = `<div style="text-align:center; padding:40px; color:var(--text-muted);">
            <p>Your meal plan for ${dayName} (Week ${weekNum}) couldn't be found. Please check the full plan.</p>
        </div>`;
        return;
    }

    // 2. Clone and Clean Cards
    container.innerHTML = ''; // Clear loading state
    
    // Add Header
    const header = document.createElement('div');
    header.className = 'today-menu-header';
    header.innerHTML = `<h2>Today's Menu</h2>
                       <p>Week ${weekNum}  ${dayName}</p>`;
    container.appendChild(header);

    const cards = sourceSection.querySelectorAll('.card');
    cards.forEach(card => {
        if (card.classList.contains('reflection-card')) return;
        
        const clone = card.cloneNode(true);
        // Ensure images open the modal
        clone.querySelectorAll('img').forEach(img => {
            img.onclick = function() {
                // Check if openImageModal or similar exists
                if (typeof openImageModal === 'function') {
                    openImageModal(this.src);
                } else {
                    // Fallback to simple alert or nothing if not found
                    console.log("Image modal function not found");
                }
            };
        });
        container.appendChild(clone);
    });

    // 3. Add Reflection at the bottom
    const reflection = sourceSection.querySelector('.reflection-card');
    if (reflection) {
        const rfClone = reflection.cloneNode(true);
        const textarea = rfClone.querySelector('textarea');
        if (textarea) {
            const originalId = textarea.id; // e.g., ref-week1-Monday
            
            // Ensure the clone's save button works correctly
            const btn = rfClone.querySelector('button');
            const idParts = originalId.split('-');
            if (idParts.length >= 3) {
                const weekDayId = idParts[1] + '-' + idParts[2];
                if (btn) {
                    btn.onclick = function() {
                        saveDayReflection(weekDayId);
                    };
                }
            }
            
            // Mirror textarea value
            textarea.id = 'today-' + originalId;
            textarea.oninput = function() {
                const originalTextarea = document.getElementById(originalId);
                if (originalTextarea) originalTextarea.value = this.value;
            };
        }

        container.appendChild(rfClone);
    }
}

function switchDay(weekId, dayId) {
    const context = document.getElementById(weekId);
    if(!context) return;
    
    context.querySelectorAll('.day-view').forEach(el => el.classList.remove('active'));
    context.querySelectorAll('.sub-nav .sub-btn').forEach(el => el.classList.remove('active'));
    
    // Activating
    const targetId = weekId + '-' + dayId;
    const targetEl = document.getElementById(targetId);
    if(targetEl) targetEl.classList.add('active');
    
    // Highlight sub btn
    const btns = context.querySelectorAll('.sub-nav .sub-btn');
    for(let b of btns) {
        const btnText = b.innerText.toLowerCase();
        const dId = dayId.toLowerCase();
        
        if (btnText === dId || 
           (dId === 'overview' && btnText === 'overview') || 
           (dId !== 'overview' && btnText.startsWith(dId.substring(0,3)))) {
            b.classList.add('active');
        }
    }
    
    // Re-apply badges if available
    if (window.applyMealBadges) window.applyMealBadges();
}

// Backward compatibility if internal links use switchView
function switchView(id) {
    switchWeek(id);
}

function toggleCard(header) {
    // Toggle card expansion
    const card = header.parentElement;
    card.classList.toggle('open');
}

// --- TRAINERIZE WORKOUT LOGIC ---
// --- TRAINERIZE WORKOUT LOGIC ---
const WORKOUT_DB = {
    'yoga': {
        name: 'Somatic Yoga',
        id: 'yoga',
        description: 'Goal: To release the Psoas (fight/flight muscle) and switch the nervous system from "Sympathetic" (Stress) to "Parasympathetic" (Rest).',
        estimatedTime: '22',
        equipment: ['Body Weight', 'Mat'],
        schedule: [
             { 
                title: 'Somatic Hormone Reset (Cortisol & Psoas Release)', 
                exercises: [
                    { name: 'Adductor Stretch with Thoracic Twist', sets: 1, reps: '3 min', videoUrl: '', desc: 'Instantly signals safety to the pelvic floor. Similar to Supta Baddha Konasana.' },
                    { name: 'Cat to Cow', sets: 1, reps: '1 min', videoUrl: '', desc: 'Flushes the spinal fluid and regulates the nervous system.' },
                    { name: 'Passive Lizard Stretch', sets: 2, reps: '1m 30s', videoUrl: '', desc: 'The #1 move for releasing the Psoas (the "Fight or Flight" muscle) 1 set each side' },
                    { name: 'Happy Baby Pose', sets: 3, reps: '2 min', videoUrl: '', desc: 'True somatic reset' },
                    { name: 'Supine Twist', sets: 2, reps: '2 min', videoUrl: '', desc: 'Wrings out tension from the adrenal area (mid-back). 1 minute per side' },
                    { name: 'Corpse Pose', sets: 1, reps: '5 min', videoUrl: '', desc: 'Essential for memory integration and lowering cortisol.' }
                ]
            },
            { 
                title: 'The "Heart Opener" (For Anxiety & Grief)', 
                exercises: [
                    { name: 'Prone Chest Stretch', sets: 1, reps: '5 min', videoUrl: '', desc: 'Opens the chest and releases stored emotional tension.' },
                    { name: 'Puppy Pose', sets: 2, reps: '2 min', videoUrl: '', desc: 'Stretches the shoulders and calms the heart rate.' },
                    { name: "Child's Pose", sets: 1, reps: '3 min', videoUrl: '', desc: 'Grounding and safe.' }
                ]
            },
            { 
                title: 'The "Vagus Nerve Reset" (For Overwhelm & Focus)', 
                exercises: [
                    { name: 'Ear Massage & Pull', sets: 1, reps: '2 min', videoUrl: '', desc: 'Directly stimulates the Vagus nerve.' },
                    { name: 'Salami Breathing', sets: 3, reps: '1 min', videoUrl: '', desc: 'Forces a physiological sigh to calm the brain.' },
                    { name: 'Gentle Neck Circles', sets: 2, reps: '2 min', videoUrl: '', desc: 'Releases the upper cervical spine.' }
                ]
            }
        ]
    },
    'bodyweight': {
        name: 'Bodyweight Sculpt',
        id: 'bodyweight',
        description: 'Focus on toning and metabolism without equipment.',
        estimatedTime: '30',
        equipment: ['None'],
        schedule: [
            { title: 'Full Body Hormone Tone', exercises: [
                { name: 'Body Weight Squat', sets: 3, reps: '15', videoUrl: '' },
                { name: 'Bench Push Up', sets: 3, reps: '10', videoUrl: '' },
                { name: 'Body Weight Reverse Lunge', sets: 3, reps: '12/leg', videoUrl: '' },
                { name: 'Glute Bridge', sets: 3, reps: '45s', videoUrl: '' }
            ]},
            { title: 'Metabolic Flow', exercises: [
                { name: 'Mountain Climber', sets: 3, reps: '20', videoUrl: '' },
                { name: 'Bird Dog', sets: 3, reps: '12/side', videoUrl: '' },
                { name: 'Side Plank', sets: 3, reps: '30s/side', videoUrl: '' }
            ]}
        ]
    },
    'home': {
        name: 'Dumbbell Strength',
        id: 'home',
        description: 'Building lean muscle mass at home.',
        estimatedTime: '40',
        equipment: ['Dumbbells', 'Mat'],
        schedule: [
            { title: 'Posterior Power', exercises: [
                { name: 'Dumbbell Goblet Squat', sets: 3, reps: '12', videoUrl: '' },
                { name: 'Dumbbell Deadlift', sets: 3, reps: '12', videoUrl: '' },
                { name: 'Dumbbell Single Arm Bent Over Row', sets: 3, reps: '10/side', videoUrl: '' }
            ]}
        ]
    },
    'gym': {
        name: 'Full Gym Protocol',
        id: 'gym',
        description: 'Maximizing strength and hormonal balance in a gym environment.',
        estimatedTime: '55',
        equipment: ['Full Gym'],
        schedule: [
             { title: 'Lower Body Strength', exercises: [
                { name: 'Angled Machine Leg Press', sets: 4, reps: '10', videoUrl: '' },
                { name: 'Machine Seated Leg Extension', sets: 3, reps: '15', videoUrl: '' },
                { name: 'Machine Seated Leg Curl', sets: 3, reps: '12', videoUrl: '' },
                { name: 'Machine Back Extension', sets: 3, reps: '15', videoUrl: '' }
            ]}
        ]
    }
};

// Check-in State
let selectedEnergy = null;
let selectedEquipment = null;

function openCheckInModal() {
    document.getElementById('checkin-modal').style.display = 'flex';
}

function selectEnergy(level) {
    selectedEnergy = level;
    document.querySelectorAll('[id^="btn-energy-"]').forEach(btn => btn.classList.remove('selected'));
    document.getElementById('btn-energy-' + level).classList.add('selected');
}

function selectEquipment(type) {
    selectedEquipment = type;
    document.querySelectorAll('[id^="btn-eq-"]').forEach(btn => btn.classList.remove('selected'));
    document.getElementById('btn-eq-' + type).classList.add('selected');
}

function submitCheckIn() {
    if(!selectedEnergy || !selectedEquipment) {
        alert("Please select both energy level and equipment access.");
        return;
    }
    const todayStr = new Date().toDateString();
    localStorage.setItem('daily_checkin_' + todayStr, JSON.stringify({
        energy: selectedEnergy,
        equipment: selectedEquipment
    }));
    document.getElementById('checkin-modal').style.display = 'none';
    renderMovementView();
}

function getExerciseVideoUrl(name) {
    return EXERCISE_VIDEOS[name] || '';
}

function renderMovementView() {
    // 1. Get Date Index
    const startDate = localStorage.getItem('pbb_start_date');
    let dayIndex = 0;
    if (startDate) {
        const start = new Date(startDate);
        const now = new Date();
        const diffTime = Math.abs(now - start);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        const currentDay = diffDays || 1;
        dayIndex = (currentDay - 1) % 7;
    }

    const todayStr = new Date().toDateString();
    const checkin = JSON.parse(localStorage.getItem('daily_checkin_' + todayStr));
    
    let suggestedId = 'yoga'; // Default
    if (checkin) {
        if (checkin.energy === 'low') suggestedId = 'yoga';
        else {
            if (checkin.equipment === 'gym') suggestedId = 'gym';
            else if (checkin.equipment === 'dumbbells') suggestedId = 'home';
            else suggestedId = 'bodyweight';
        }
    }

    const assets = {
        'yoga': { img: '/assets/somatic_yoga_hero.png', sub: 'Recovery', color: '#F59E0B' },
        'bodyweight': { img: '/assets/bodyweight_sculpt_hero.png', sub: 'No Equipment', color: '#ec4899' },
        'home': { img: '/assets/dumbbell_strength_hero.png', sub: 'Dumbbells', color: '#8b5cf6' },
        'gym': { img: '/assets/full_gym_hero.png', sub: 'Gym Access', color: '#10b981' }
    };

    // Render Hero
    const heroContainer = document.getElementById('movement-hero-container');
    const heroProg = WORKOUT_DB[suggestedId];
    const heroMeta = assets[suggestedId];
    const heroSched = heroProg.schedule[dayIndex % heroProg.schedule.length];

    heroContainer.innerHTML = `
    <div class="card" onclick="showWorkoutOverview('${suggestedId}')" style="cursor: pointer; overflow:hidden; border-radius:32px; box-shadow:0 25px 50px -12px rgba(0,0,0,0.25); border:none; position: relative; margin-bottom: 30px;">
        <div style="position: relative; height: 380px;">
             <img src="${heroMeta.img}" style="width:100%; height:100%; object-fit: cover;" onerror="this.src='https://placehold.co/600x800/png?text=${suggestedId}';">
             <div style="position: absolute; inset:0; background: linear-gradient(to top, rgba(0,0,0,1) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);"></div>
             
             <div style="position: absolute; top: 25px; left: 25px;">
                <span style="background: ${heroMeta.color}; color: white; padding: 8px 16px; border-radius: 50px; font-size: 0.8rem; font-weight: 800; text-transform: uppercase;">Best for Today</span>
             </div>

             <div style="position: absolute; bottom: 0; left: 0; width: 100%; padding: 30px;">
                 <div style="color: ${heroMeta.color}; font-weight: 800; font-size: 0.9rem; text-transform: uppercase; margin-bottom: 5px;">${heroProg.name}</div>
                 <h2 style="color: white; margin: 0 0 15px 0; font-size: 2.2rem; line-height: 1.1; font-family:'Playfair Display';">${heroSched.title}</h2>
                 <div style="display:flex; gap:15px; color:rgba(255,255,255,0.7); font-size:0.9rem; margin-bottom:20px;">
                    <span style="display:flex; align-items:center; gap:5px;"><svg style="width:16px; height:16px; fill:currentColor;" viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>${heroProg.estimatedTime} mins</span>
                    <span style="display:flex; align-items:center; gap:5px;"><svg style="width:16px; height:16px; fill:currentColor;" viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>${heroSched.exercises.length} exercises</span>
                 </div>
                 <button style="width: 100%; background: #FFC107; color: black; border: none; padding: 18px; border-radius: 50px; font-weight: 900; font-size: 1.1rem; box-shadow: 0 10px 20px rgba(255,193,7,0.3);">
                    START SESSION
                 </button>
             </div>
        </div>
    </div>`;

    const gridContainer = document.getElementById('movement-grid-container');
    gridContainer.innerHTML = ''; 
    
    Object.keys(WORKOUT_DB).forEach(key => {
        if (key === suggestedId) return;
        const prog = WORKOUT_DB[key];
        const meta = assets[key];
        const sched = prog.schedule[dayIndex % prog.schedule.length];

        const div = document.createElement('div');
        div.onclick = () => showWorkoutOverview(key);
        div.style.cssText = "cursor:pointer; position:relative; height:180px; border-radius:24px; overflow:hidden; box-shadow:0 8px 25px rgba(0,0,0,0.1);";
        div.innerHTML = `
            <img src="${meta.img}" style="width:100%; height:100%; object-fit: cover; position:absolute; inset:0;" onerror="this.src='https://placehold.co/300x200?text=${key}';">
            <div style="position: absolute; inset:0; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);"></div>
            <div style="position: absolute; bottom: 15px; left: 15px; color: white;">
                <div style="font-size: 0.75rem; font-weight: 800; opacity: 0.8;">${prog.name}</div>
                <div style="font-size: 1.2rem; font-weight: 800; line-height: 1.1;">${sched.title}</div>
            </div>
        `;
        gridContainer.appendChild(div);
    });
}

function showWorkoutOverview(id) {
    const program = WORKOUT_DB[id];
    const startDate = localStorage.getItem('pbb_start_date');
    let dayIndex = 0;
    if (startDate) {
        const start = new Date(startDate);
        const dayDiff = Math.ceil(Math.abs(new Date() - start) / (1000 * 60 * 60 * 24));
        dayIndex = (dayDiff || 1) - 1;
    }
    const workout = program.schedule[dayIndex % program.schedule.length];

    document.getElementById('overview-title').innerText = workout.title;
    document.getElementById('overview-header-title').innerText = program.name;
    document.getElementById('overview-meta').innerText = `${program.estimatedTime} mins  ${workout.exercises.length} Exercises`;
    document.getElementById('overview-instructions').innerText = program.description || '';
    
    // Equipment
    const eqCont = document.getElementById('overview-equipment');
    eqCont.innerHTML = '';
    program.equipment.forEach(e => {
        eqCont.innerHTML += `<span style="background:#f1f5f9; padding:8px 15px; border-radius:50px; font-size:0.85rem; font-weight:600; color:var(--text-main);">${e}</span>`;
    });

    // Exercises
    const exList = document.getElementById('overview-exercise-list');
    exList.innerHTML = '';
    workout.exercises.forEach(ex => {
        exList.innerHTML += `
            <div style="display:flex; align-items:center; gap:15px; margin-bottom:20px;">
                <div style="width:70px; height:70px; border-radius:12px; background:#f1f5f9; flex-shrink:0; overflow:hidden;">
                    <img src="https://placehold.co/100x100/png?text=Preview" style="width:100%; height:100%; object-fit:cover;">
                </div>
                <div style="flex:1;">
                    <div style="font-weight:700; font-size:1.05rem;">${ex.name}</div>
                    <div style="color:var(--text-muted); font-size:0.85rem;">${ex.sets} sets x ${ex.reps}</div>
                </div>
            </div>
        `;
    });

    document.getElementById('btn-start-now').onclick = () => startActiveWorkout(id);

    // Show View
    hideAllAppViews();
    document.getElementById('view-workout-overview').style.display = 'block';
    document.querySelector('.bottom-nav').style.display = 'none';
}

function hideAllAppViews() {
    const views = ['view-dashboard', 'view-meals', 'movement-tab', 'group', 'view-support', 'sleep', 'view-workout-success', 'view-profile', 'view-workout-overview', 'view-active-workout', 'view-coach-dashboard', 'view-workout-builder'];
    views.forEach(v => {
        const el = document.getElementById(v);
        if(el) {
            el.style.display = 'none';
            el.classList.remove('active');
        }
    });
}

function startActiveWorkout(id) {
    const program = WORKOUT_DB[id];
    const startDate = localStorage.getItem('pbb_start_date');
    let dayIndex = 0;
    if (startDate) {
        const start = new Date(startDate);
        const dayDiff = Math.ceil(Math.abs(new Date() - start) / (1000 * 60 * 60 * 24));
        dayIndex = (dayDiff || 1) - 1;
    }
    const workout = program.schedule[dayIndex % program.schedule.length];

    document.getElementById('workout-player-title').innerText = workout.title;
    document.getElementById('workout-player-goal').innerText = program.description;
    
    const list = document.getElementById('workout-exercises-list');
    list.innerHTML = '';

    workout.exercises.forEach((ex, idx) => {
        const card = document.createElement('div');
        card.style.cssText = "background:white; border-radius:24px; box-shadow:0 10px 30px rgba(0,0,0,0.05); margin-bottom:25px; overflow:hidden; border:1px solid #f1f5f9;";
        
        const isTimeBased = ex.reps.toLowerCase().includes('min') || ex.reps.toLowerCase().includes('s');
        let setsHtml = '';
        for(let s=1; s<=ex.sets; s++) {
            setsHtml += getSetRowHtml(ex.name, s, isTimeBased);
        }

        const videoUrl = getExerciseVideoUrl(ex.name);

        card.innerHTML = `
            <div style="padding:20px; display:flex; gap:15px; align-items:center;">
                <div onclick="openExerciseVideo('${videoUrl}', '${ex.name}')" style="width:60px; height:60px; border-radius:14px; overflow:hidden; flex-shrink:0; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.05); border:1px solid #e2e8f0;">
                    ${videoUrl.includes('youtube.com') || videoUrl.includes('youtu.be') ? 
                        `<img src="https://img.youtube.com/vi/${videoUrl.includes('embed/') ? videoUrl.split('embed/')[1].split('?')[0] : videoUrl.split('v=')[1]?.split('&')[0]}/0.jpg" style="width:100%; height:100%; object-fit:cover; opacity:0.8;">` : 
                        `<div style="width:100%; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; background:linear-gradient(135deg, #1e293b, #0f172a);">
                            <div style="width:24px; height:24px; background:white; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom:2px; box-shadow:0 4px 6px rgba(0,0,0,0.2);">
                                <svg viewBox="0 0 24 24" style="width:12px; height:12px; fill:black; margin-left:2px;"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                            <span style="color:rgba(255,255,255,0.9); font-size:0.55rem; font-weight:700; text-transform:uppercase;">Watch</span>
                        </div>`
                    }
                </div>
                <div style="flex:1;">
                    <h3 style="margin:0 0 4px 0; font-size:1.1rem; font-weight:700; color:var(--text-main); line-height:1.2;">${ex.name}</h3>
                    <p style="margin:0; font-size:0.8rem; color:var(--text-muted); line-height:1.3;">${ex.desc || ''}</p>
                </div>
            </div>
            
            <div style="display:grid; grid-template-columns: 30px 1fr 1fr 1fr 1fr; gap:12px; padding:0 15px 10px 15px; font-size:0.65rem; color:#94a3b8; font-weight:800; text-transform:uppercase; letter-spacing:0.5px; text-align:center;">
                <div>Set</div><div>Prev</div><div>Time</div><div>Reps</div><div>Kg</div>
            </div>
            
            <div class="sets-list-container">
                ${setsHtml}
            </div>

            <div style="padding:15px; border-top:1px solid #f8fafc;">
                <button onclick="addWorkoutSet(this, '${ex.name.replace(/'/g, "\\'")}', ${isTimeBased})" style="width:100%; background:transparent; border:2px dashed #e2e8f0; color:#94a3b8; font-weight:700; font-size:0.8rem; padding:12px; border-radius:12px; cursor:pointer;">+ ADD SET</button>
            </div>
        `;
        list.appendChild(card);
    });

    hideAllAppViews();
    document.getElementById('view-active-workout').style.display = 'block';
    startWorkoutTimer();
}

function getPreviousStats(name, set) {
    const history = JSON.parse(localStorage.getItem('workout_history') || '[]');
    // Filter history for this specific exercise
    const exerciseHistory = history.filter(h => h.exercise === name);
    
    // If no history at all, return 'New'
    if (exerciseHistory.length === 0) return 'New';

    // Find the entry for this specific set number in the MOST RECENT session
    // We assume history is chronological. We iterate backwards.
    // We need to group by session (date) effectively, or just look for the last occurrence of this set?
    // Implementation choice: Look for the last object matching exercise + set.
    // NOTE: This assumes one entry per set per session.
    
    for (let i = exerciseHistory.length - 1; i >= 0; i--) {
        const h = exerciseHistory[i];
        if (h.set == set) { // Use loose equality for '1' vs 1
             if (h.kg && h.kg !== '0' && h.kg !== '') return `${h.kg}kg x ${h.reps}`;
             return `${h.reps}`;
        }
    }
    
    return '-'; 
}

function getSetRowHtml(exName, setNum, isTimeBased) {
    const prev = getPreviousStats(exName, setNum) || '-';
    return `
        <div class="workout-set-row" style="display:grid; grid-template-columns: 30px 1fr 1fr 1fr 1fr; gap:12px; align-items:center; padding:12px 15px; border-top:1px solid #f8fafc;">
            <div style="font-weight:800; color:#94a3b8; font-size:0.85rem;">${setNum}</div>
            <div style="font-size:0.75rem; color:#cbd5e0; text-align:center;">${prev}</div>
            <div style="position:relative;">
                <input type="text" class="input-time" placeholder="-" style="width:100%; border:none; background:#f8fafc; border-radius:10px; padding:12px 5px; text-align:center; font-weight:700; color:var(--text-main); font-size:0.95rem;">
                ${isTimeBased ? '<svg viewBox="0 0 24 24" style="position:absolute; left:5px; top:50%; transform:translateY(-50%); width:14px; height:14px; fill:#94a3b8;"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>' : ''}
            </div>
            <input type="text" class="input-reps" placeholder="Reps" style="width:100%; border:none; background:#f8fafc; border-radius:10px; padding:12px 5px; text-align:center; font-weight:700; color:var(--text-main); font-size:0.95rem;">
            <input type="text" class="input-kg" placeholder="Kg" style="width:100%; border:none; background:#f8fafc; border-radius:10px; padding:12px 5px; text-align:center; font-weight:700; color:var(--text-main); font-size:0.95rem;">
        </div>
    `;
}

function addWorkoutSet(btn, exName, isTimeBased) {
    // Navigate up to the card container
    // Structure: Button -> Div -> Div (padding) -> Card
    const card = btn.closest('.card') || btn.parentElement.parentElement.parentElement;
    
    // Find the sets container within this card
    const container = card.querySelector('.sets-list-container');
    
    if (!container) {
        console.error("Could not find .sets-list-container");
        return;
    }

    const setNum = container.children.length + 1;
    
    // Create new div wrapper (since getSetRowHtml returns a string)
    const div = document.createElement('div');
    div.innerHTML = getSetRowHtml(exName, setNum, isTimeBased).trim();
    
    // Optional: Add simple animation
    const newRow = div.firstElementChild;
    newRow.style.opacity = '0';
    newRow.style.transform = 'translateY(-10px)';
    newRow.style.transition = 'all 0.3s ease';
    
    container.appendChild(newRow);
    
    // Trigger reflow for animation
    requestAnimationFrame(() => {
        newRow.style.opacity = '1';
        newRow.style.transform = 'translateY(0)';
    });
}

let workoutTimerInterval;
function startWorkoutTimer() {
    let sec = 0;
    const display = document.getElementById('workout-timer');
    clearInterval(workoutTimerInterval);
    workoutTimerInterval = setInterval(() => {
        sec++;
        const m = Math.floor(sec / 60).toString().padStart(2, '0');
        const s = (sec % 60).toString().padStart(2, '0');
        display.innerText = `${m}:${s}`;
    }, 1000);
}

function finishWorkout() {
    clearInterval(workoutTimerInterval);
    const duration = document.getElementById('workout-timer').innerText;
    document.getElementById('success-duration').innerText = duration;

    // Save logic
    const activeWorkout = document.getElementById('workout-exercises-list');
    const history = JSON.parse(localStorage.getItem('workout_history') || '[]');
    const date = new Date().toISOString();

    activeWorkout.querySelectorAll('div[style*="background:white"]').forEach(card => {
        const name = card.querySelector('h3').innerText;
        const container = card.querySelector('.sets-list-container');
        if(!container) return;
        
        container.querySelectorAll('.workout-set-row').forEach((row, rIdx) => {
            const time = row.querySelector('.input-time')?.value || '';
            const reps = row.querySelector('.input-reps')?.value || '';
            const kg = row.querySelector('.input-kg')?.value || '';
            
            if (time || reps || kg) {
                history.push({
                    date,
                    exercise: name,
                    set: rIdx + 1,
                    kg: kg || '0',
                    reps: reps || time,
                    duration
                });
            }
        });
    });

    localStorage.setItem('workout_history', JSON.stringify(history));

    hideAllAppViews();
    document.getElementById('view-workout-success').style.display = 'flex';
}

function quitWorkout() {
    if(confirm('Quit workout? Your progress won\'t be saved.')) {
        console.log("Quitting workout...");
        clearInterval(workoutTimerInterval);
        document.getElementById('view-active-workout').style.display = 'none'; // Force hide
        closeSuccessScreen();
    }
}

function closeSuccessScreen() {
    hideAllAppViews();
    document.getElementById('movement-tab').style.display = 'block';
    document.querySelector('.bottom-nav').style.display = 'flex';
    renderMovementView();
}</script>
<!-- Image Modal HTML -->
<div class="image-modal-overlay" id="imageModal" onclick="closeImageModal()">
<div class="close-modal-btn"></div>
<img alt="Full size meal" class="image-modal-content" id="modalImage" onclick="event.stopPropagation()" src=""/>
</div>
<script>
// Image Modal Logic
document.addEventListener('DOMContentLoaded', function() {
    const mealImages = document.querySelectorAll('.card-body img');
    mealImages.forEach(img => {
        img.addEventListener('click', function(e) {
            e.stopPropagation(); 
            openImageModal(this.src, this.alt);
        });
    });
});

function openImageModal(src, alt) {
    const modal = document.getElementById('imageModal');
    const img = document.getElementById('modalImage');
    img.src = src;
    img.alt = alt || 'Meal Image';
    modal.classList.add('active');
    document.body.style.overflow = 'hidden'; 
}

function closeImageModal() {
    const modal = document.getElementById('imageModal');
    modal.classList.remove('active');
    document.body.style.overflow = ''; 
    setTimeout(() => {
        document.getElementById('modalImage').src = '';
    }, 300); 
}

// Close on escape key
document.addEventListener('keydown', function(event) {
    if (event.key === "Escape") {
        closeImageModal();
    }
});

function showSupportTab(tab, btn) {
    // 1. Toggle Buttons
    const container = btn.parentElement;
    container.querySelectorAll('button').forEach(b => {
        b.classList.remove('active');
        b.style.background = 'transparent';
        b.style.color = '#718096';
    });
    btn.classList.add('active');
    btn.style.background = 'white';
    btn.style.color = 'var(--primary)';

    // 2. Toggle Content
    const chat = document.getElementById('support-chat');
    const comm = document.getElementById('support-community');
    
    if (tab === 'chat') {
        chat.style.display = 'flex';
        comm.style.display = 'none';
    } else {
        chat.style.display = 'none';
        comm.style.display = 'block';
        loadCommunityFeed(); // Refresh feed when opening
    }
}

// Consolidated Chat Logic (Old versions removed)


// Old chat logic removed.

// --- AI COMMUNITY CHAT LOGIC ---

const AI_MEMBERS = [
    { id: 'm1', name: 'Sarah J.', avatar: 'SJ', age: 42, bio: 'Perimenopause warrior, yoga lover, focusing on cortisol and calm.', color: '#EF4444' },
    { id: 'm2', name: 'Emma W.', avatar: 'EW', age: 48, bio: 'Busy professional navigating the menopause transition. Loves weights.', color: '#F97316' },
    { id: 'm3', name: 'Mia K.', avatar: 'MK', age: 53, bio: 'Post-menopause health enthusiast, focus on bone density and joy.', color: '#84CC16' },
    { id: 'm4', name: 'Sophie L.', avatar: 'SL', age: 36, bio: 'Early perimenopause symptoms, high stress job, trying to find balance.', color: '#06B6D4' },
    { id: 'm5', name: 'Isabella R.', avatar: 'IR', age: 45, bio: 'Mom of three dealing with hormonal shifts and frantic schedules.', color: '#8B5CF6' },
    { id: 'm6', name: 'Chloe M.', avatar: 'CM', age: 51, bio: 'Managing hot flashes with plant-based nutrition and cold plunges.', color: '#EC4899' },
    { id: 'm7', name: 'Lily H.', avatar: 'LH', age: 58, bio: 'Recovering from burnout, focus on sleep quality and evening routines.', color: '#10B981' },
    { id: 'm8', name: 'Grace B.', avatar: 'GB', age: 41, bio: 'Nutritionist dealing with her own brain fog and cycle changes.', color: '#F59E0B' },
    { id: 'm9', name: 'Amelia P.', avatar: 'AP', age: 62, bio: 'Mature plant-based wisdom. Helping younger women stay grounded.', color: '#3B82F6' },
    { id: 'm10', name: 'Zoe S.', avatar: 'ZS', age: 39, bio: 'Biohacker focusing on cycle tracking and stress-induced cortisol.', color: '#6366F1' },
    { id: 'm11', name: 'Ruby G.', avatar: 'RG', age: 47, bio: 'Mood swing management through gentle movement and nature walks.', color: '#D946EF' },
    { id: 'm12', name: 'Sienna V.', avatar: 'SV', age: 55, bio: 'Swimming through menopause. Focus on joint health and hydration.', color: '#14B8A6' },
    { id: 'm13', name: 'Ava D.', avatar: 'AD', age: 44, bio: 'Yoga teacher resetting her own hormones after years of overtraining.', color: '#FBBF24' },
    { id: 'm14', name: 'Charlotte O.', avatar: 'CO', age: 50, bio: 'Finding her spark again in her 50s. Creative and soulful.', color: '#F87171' },
    { id: 'm15', name: 'Harper F.', avatar: 'HF', age: 43, bio: 'Stress management focus. Learning to slow down to speed up.', color: '#A78BFA' },
    { id: 'm16', name: 'Ella N.', avatar: 'EN', age: 52, bio: 'Former athlete keeping lean and strong during the change.', color: '#34D399' },
    { id: 'm17', name: 'Evie T.', avatar: 'ET', age: 46, bio: 'Data lover tracking how plant-based eating affects her hot flashes.', color: '#60A5FA' },
    { id: 'm18', name: 'Scarlett Q.', avatar: 'SQ', age: 60, bio: 'Holistic chef focusing on anti-inflammatory meals for longevity.', color: '#F472B6' },
    { id: 'm19', name: 'Willow J.', avatar: 'WJ', age: 49, bio: 'Spiritual focus on the mid-life transition as a rebirth.', color: '#2DD4BF' },
    { id: 'm20', name: 'Layla B.', avatar: 'LB', age: 38, bio: 'Proactive about aging and hormonal health. Social and supportive.', color: '#FB923C' }
];

function loadCommunityFeed() {
    let messages = JSON.parse(localStorage.getItem('community_chat_history') || '[]');
    if(messages.length === 0) {
        const sysMsg = {
            id: 'sys_' + Date.now(),
            isSystem: true,
            text: `Community group started`,
            timestamp: Date.now()
        };
        messages.push(sysMsg);
        localStorage.setItem('community_chat_history', JSON.stringify(messages));
    }
    renderChat(messages);
}

function renderChat(messages) {
    const container = document.getElementById('community-chat-stream');
    if(!container) return;
    container.innerHTML = '';
    
    messages.forEach(msg => {
        const isMe = !msg.authorId || msg.authorId === 'current-user';
        const author = !isMe ? AI_MEMBERS.find(m => m.id === msg.authorId) : null;
        
        let avatarHtml = '';
        if(!isMe && author) {
             const imgNum = (author.id || 'm1').replace('m', '');
             const avatarSrc = `https://randomuser.me/api/portraits/women/${imgNum}.jpg`;
             avatarHtml = `<img src="${avatarSrc}" style="width:32px; height:32px; border-radius:50%; flex-shrink:0; align-self:flex-end; margin-bottom:5px;">`;
        }
        
        const bBg = isMe ? 'var(--chat-bg-user)' : 'var(--chat-bg-coach)';
        const bText = isMe ? 'var(--chat-text-user)' : 'var(--chat-text-coach)';
        const bRadius = isMe ? '18px 18px 0 18px' : '18px 18px 18px 0';
        const bBorder = isMe ? 'none' : '1px solid var(--chat-border-coach)';
        const alignStyle = isMe ? "justify-content: flex-end;" : "justify-content: flex-start;";

        const html = `
            <div style="display:flex; ${alignStyle} margin-bottom: 12px; gap: 8px;">
                ${(!isMe && author) ? avatarHtml : ''}
                <div style="display:flex; flex-direction:column; max-width:75%; ${isMe ? 'align-items:flex-end;' : 'align-items:flex-start;'}">
                    ${(!isMe && author) ? `<div style="font-size:0.7rem; color:var(--text-muted); margin-left:10px; margin-bottom:2px;">${author.name} (${author.age})</div>` : ''}
                    <div style="padding: 10px 15px; font-size: 0.95rem; line-height: 1.4; background: ${bBg}; color: ${bText}; border-radius: ${bRadius}; border: ${bBorder}; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                        ${msg.text}
                    </div>
                </div>
            </div>
        `;
        
        if (msg.isSystem) {
            container.innerHTML += `<div style="text-align:center; margin: 20px 0; color:#94a3b8; font-size:0.8rem; font-weight:600; text-transform:uppercase; letter-spacing:1px;">${msg.text}</div>`;
        } else {
            container.innerHTML += html;
        }
    });
    container.scrollTop = container.scrollHeight;
}

</script>

<!-- COACH DASHBOARD STYLES -->
<style>
    /* Coach Dashboard Specific Styles */
    #view-coach-dashboard {
        display: none; /* Hidden by default */
        position: fixed;
        inset: 0;
        background: #f8fafc;
        z-index: 10000;
        overflow-y: auto;
        font-family: 'Inter', sans-serif;
    }

    .coach-layout {
        display: grid;
        grid-template-columns: 250px 1fr;
        min-height: 100vh;
    }

    /* Sidebar */
    .coach-sidebar {
        background: #0f172a;
        color: white;
        padding: 20px;
        display: flex;
        flex-direction: column;
    }

    .coach-logo {
        font-family: 'Playfair Display', serif;
        font-size: 1.5rem;
        margin-bottom: 40px;
        color: var(--secondary);
    }

    .coach-nav-item {
        padding: 12px 15px;
        border-radius: 8px;
        margin-bottom: 5px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        color: #94a3b8;
        transition: all 0.2s;
    }

    .coach-nav-item:hover, .coach-nav-item.active {
        background: rgba(255,255,255,0.1);
        color: white;
    }

    /* Main Content */
    .coach-main {
        padding: 30px;
        overflow-y: auto;
    }

    .coach-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
    }

    .coach-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: #1e293b;
    }

    /* Dashboard Grid */
    .dashboard-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 25px;
    }

    .d-card {
        background: white;
        border-radius: 16px;
        padding: 20px;
        border: 1px solid #e2e8f0;
        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
        margin-bottom: 25px;
    }

    .d-card h3 {
        font-size: 1.1rem;
        margin-bottom: 15px;
        color: #334155;
        border-bottom: 1px solid #f1f5f9;
        padding-bottom: 10px;
    }

    /* Compliance Snapshots */
    .compliance-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
        gap: 10px;
    }
    
    .compliance-dot {
        width: 100%;
        aspect-ratio: 1;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: white;
        font-size: 0.9rem;
        cursor: pointer;
        position: relative;
    }
    .status-warning { background: #F59E0B; }
    .status-danger { background: #EF4444; }
    .status-good { background: #10B981; }

    /* Activity Feed */
    .activity-item {
        display: flex;
        gap: 15px;
        padding: 12px 0;
        border-bottom: 1px solid #f1f5f9;
    }
    .activity-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #f1f5f9;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Mobile Responsive adjustment for Coach View */
    @media (max-width: 768px) {
        .coach-layout { grid-template-columns: 1fr; }
        .coach-sidebar { display: none; } /* Add a mobile toggler later if needed, assume desktop for "Command Center" initially */
        .dashboard-grid { grid-template-columns: 1fr; }
    }
</style>

<!-- COACH DASHBOARD HTML -->
<div id="view-coach-dashboard">
    <div class="coach-layout">
        <!-- Sidebar -->
        <div class="coach-sidebar">
            <div class="coach-logo">Shannon (Coach)</div>
            <div class="coach-nav-item active" onclick="showCoachSection('overview')">
                <span>🏠</span> Overview
            </div>
            <div class="coach-nav-item" onclick="showCoachSection('clients')">
                <span>👥</span> Clients
            </div>
            <div class="coach-nav-item" onclick="showCoachSection('messages')">
                <span>💬</span> Messages <span class="badge" style="background:red; padding:2px 6px; border-radius:10px; font-size:0.7rem;">3</span>
            </div>
            <div class="coach-nav-item" onclick="showCoachSection('calendar')">
                <span>📅</span> User Calendar
            </div>
             <div style="margin-top:auto;">
                <div class="coach-nav-item" onclick="toggleCoachMode(false)">
                    <span>🚪</span> Exit Coach Mode
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="coach-main">
            <!-- SECTION: OVERVIEW -->
            <div id="coach-sec-overview">
                <div class="coach-header">
                    <div>
                        <div class="coach-title">Command Center</div>
                        <div style="color:#64748b;">Welcome back, Shannon. Here is what's happening today.</div>
                    </div>
                    <button class="app-btn" style="width: auto; padding: 10px 20px;">+ Quick Add</button>
                </div>

                <div class="dashboard-grid">
                    <!-- Left Col -->
                    <div>
                        <!-- Compliance -->
                        <div class="d-card">
                            <h3>Compliance Snapshots</h3>
                            <div class="compliance-grid" id="compliance-container">
                                <!-- Populated dynamically -->
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="d-card">
                            <h3>Recent Activity</h3>
                            <div id="activity-feed-container">
                                <!-- Populated dynamically -->
                            </div>
                        </div>
                    </div>

                    <!-- Right Col -->
                    <div>
                        <!-- Pending Requests -->
                        <div class="d-card">
                            <h3>Pending Requests (3)</h3>
                            <div class="activity-item">
                                <div class="activity-icon" style="background:#FEF3C7; color:#D97706;">??</div>
                                <div>
                                    <div style="font-weight:600;">Consultation Form</div>
                                    <div style="font-size:0.85rem; color:#64748b;">New Client Application</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon" style="background:#DBEAFE; color:#2563EB;">??</div>
                                <div>
                                    <div style="font-weight:600;">Payment Failed</div>
                                    <div style="font-size:0.85rem; color:#64748b;">Sarah J. - Subscription</div>
                                </div>
                            </div>
                        </div>

                        <!-- Daily Schedule -->
                        <div class="d-card">
                            <h3>Daily Schedule</h3>
                            <div class="activity-item">
                                <div style="font-weight:bold; color:var(--primary); width:50px;">09:00</div>
                                <div>Check-in Review</div>
                            </div>
                            <div class="activity-item">
                                <div style="font-weight:bold; color:var(--primary); width:50px;">14:30</div>
                                <div>Call with Jessica</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION: CLIENTS (Deep Dive) -->
            <div id="coach-sec-clients" style="display:none;">
                <div class="coach-header">
                    <div class="coach-title">Client Profiles</div>
                    <input type="text" placeholder="Search clients..." style="padding:10px; border-radius:8px; border:1px solid #ccc;">
                </div>
                <!-- Simple Client List for Selection -->
                <div class="d-card" id="client-list-view">
                    <h3>All Clients</h3>
                    <div id="coach-client-list"></div>
                </div>

                <!-- SINGLE CLIENT VIEW (Hidden by default) -->
                <div id="single-client-view" style="display:none;">
                    <button onclick="closeClientProfile()" style="margin-bottom:20px; background:none; border:none; color:#64748b; cursor:pointer;">? Back to List</button>
                    
                    <div class="d-card" style="display:flex; justify-content:space-between; align-items:center;">
                        <div style="display:flex; gap:20px; align-items:center;">
                            <div id="sc-avatar" style="width:60px; height:60px; background:var(--primary); border-radius:50%; color:white; display:flex; align-items:center; justify-content:center; font-size:1.5rem;">SJ</div>
                            <div>
                                <h2 id="sc-name" style="margin:0; font-size:1.5rem;">Sarah Jenkins</h2>
                                <div id="sc-status" style="color:#64748b;">Active  Wk 3  Cortisol Reset</div>
                            </div>
                        </div>
                        <div style="display:flex; gap:10px;">
                            <button class="app-btn" style="width:auto; background:var(--secondary);" onclick="openAsClient()">Open App as Client</button>
                            <button class="app-btn" style="width:auto;">Message</button>
                        </div>
                    </div>

                    <!-- Client Tabs -->
                    <div style="display:flex; gap:10px; margin-bottom:20px; border-bottom:1px solid #e2e8f0;">
                        <div class="coach-nav-item active" style="color:var(--primary); border-bottom:2px solid var(--primary); border-radius:0;">Dash</div>
                        <div class="coach-nav-item" style="color:#64748b;">Progress</div>
                        <div class="coach-nav-item" style="color:#64748b;">Training</div>
                        <div class="coach-nav-item" style="color:#64748b;">Nutrition</div>
                        <div class="coach-nav-item" style="color:#64748b;">Notes ??</div>
                    </div>

                    <div class="dashboard-grid">
                        <!-- Stats Tiles -->
                        <div style="grid-column: 1 / -1; display:grid; grid-template-columns: repeat(4, 1fr); gap:15px; margin-bottom:20px;">
                            <div class="d-card" style="margin:0; text-align:center;">
                                <div style="font-size:0.8rem; color:#64748b;">WEIGHT</div>
                                <div style="font-size:1.5rem; font-weight:bold;">64.5kg</div>
                                <div style="color:green; font-size:0.8rem;">? 0.5kg</div>
                            </div>
                            <div class="d-card" style="margin:0; text-align:center;">
                                <div style="font-size:0.8rem; color:#64748b;">BODY FAT</div>
                                <div style="font-size:1.5rem; font-weight:bold;">22%</div>
                                <div style="color:green; font-size:0.8rem;">? 1.2%</div>
                            </div>
                            <div class="d-card" style="margin:0; text-align:center;">
                                <div style="font-size:0.8rem; color:#64748b;">RHR</div>
                                <div style="font-size:1.5rem; font-weight:bold;">58</div>
                                <div style="color:green; font-size:0.8rem;">? 4 bpm</div>
                            </div>
                            <div class="d-card" style="margin:0; text-align:center;">
                                <div style="font-size:0.8rem; color:#64748b;">KCALS</div>
                                <div style="font-size:1.5rem; font-weight:bold;">1850</div>
                                <div style="color:orange; font-size:0.8rem;">Avg</div>
                            </div>
                        </div>

                        <!-- Left: Photos & Badges -->
                        <div class="d-card">
                            <h3>Progress Photos</h3>
                            <div style="display:flex; gap:10px;">
                                <div style="flex:1; background:#f1f5f9; aspect-ratio:3/4; display:flex; align-items:center; justify-content:center; border-radius:8px;">Front</div>
                                <div style="flex:1; background:#f1f5f9; aspect-ratio:3/4; display:flex; align-items:center; justify-content:center; border-radius:8px;">Side</div>
                            </div>
                        </div>

                        <!-- Right: Trainer Notes -->
                        <div class="d-card">
                            <h3>Trainer Notes ??</h3>
                            <textarea style="width:100%; height:150px; border:1px solid #e2e8f0; border-radius:8px; padding:10px;" placeholder="Private notes about this client..."></textarea>
                            <button class="app-btn" style="width:auto; margin-top:10px;">Save Note</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Other sections (Calendar, Messages) placeholders -->
            <div id="coach-sec-messages" style="display:none;">
                <div class="coach-header"><div class="coach-title">Messages</div></div>
                <div class="d-card">
                     <p>Message Center Implementation Pending...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// COACH MODE LOGIC

const MOCK_CLIENTS = [
    { id: 'c1', name: 'Sarah J.', status: 'good', avatar: 'SJ', lastAct: 'Completed Workout 2h ago' },
    { id: 'c2', name: 'Mike T.', status: 'warning', avatar: 'MT', lastAct: 'Missed check-in yesterday' },
    { id: 'c3', name: 'Emma W.', status: 'good', avatar: 'EW', lastAct: 'Logged macros' },
    { id: 'c4', name: 'John D.', status: 'danger', avatar: 'JD', lastAct: 'Inactive for 3 days' },
    { id: 'c5', name: 'Current User', status: 'good', avatar: 'ME', lastAct: 'Online now' } // Maps to real user
];

// Primary toggleCoachMode defined below in AI section


function initCoachDashboard() {
    renderComplianceGrid();
    renderActivityFeed();
    renderClientList();
}

function renderComplianceGrid() {
    const container = document.getElementById('compliance-container');
    container.innerHTML = MOCK_CLIENTS.map(c => `
        <div class="compliance-dot status-${c.status}" onclick="openClientProfile('${c.id}')">
            ${c.avatar}
        </div>
    `).join('');
}

function renderActivityFeed() {
    const container = document.getElementById('activity-feed-container');
    const activities = [
        { name: 'Sarah J.', action: 'completed Leg Day', time: '2h ago', icon: '🦵' },
        { name: 'Emma W.', action: 'logged lunch', time: '3h ago', icon: '🥗' },
        { name: 'Mike T.', action: 'uploaded progress photo', time: '5h ago', icon: '🥗' }
    ];
    container.innerHTML = activities.map(a => `
        <div class="activity-item">
            <div class="activity-icon">${a.icon}</div>
            <div>
                <div style="font-weight:600;">${a.name}</div>
                <div style="font-size:0.85rem; color:#64748b;">${a.action}  ${a.time}</div>
            </div>
        </div>
    `).join('');
}

function showCoachSection(secId) {
    // Hide all
    ['overview', 'clients', 'messages'].forEach(id => {
        const el = document.getElementById('coach-sec-' + id);
        if(el) el.style.display = 'none';
    });
    
    // Show selected
    document.getElementById('coach-sec-' + secId).style.display = 'block';
}

function renderClientList() {
    const container = document.getElementById('coach-client-list');
    container.innerHTML = MOCK_CLIENTS.map(c => `
        <div class="activity-item" style="cursor:pointer;" onclick="openClientProfile('${c.id}')">
            <div class="activity-icon" style="background:${c.status === 'danger' ? '#FEE2E2' : '#F1F5F9'}">${c.avatar}</div>
            <div style="flex:1;">
                <div style="font-weight:600;">${c.name}</div>
                <div style="font-size:0.85rem; color:#64748b;">${c.lastAct}</div>
            </div>
            <div>?</div>
        </div>
    `).join('');
}

function openClientProfile(clientId) {
    document.getElementById('client-list-view').style.display = 'none';
    document.getElementById('single-client-view').style.display = 'block';
    
    const client = MOCK_CLIENTS.find(c => c.id === clientId);
    document.getElementById('sc-name').innerText = client.name;
    document.getElementById('sc-avatar').innerText = client.avatar;
    
    // If it's the current user, we could potentially verify real data
    // For now, it is mock UI
}

function closeClientProfile() {
    document.getElementById('single-client-view').style.display = 'none';
    document.getElementById('client-list-view').style.display = 'block';
}

function openAsClient() {
    // Switch to normal dashboard view
    toggleCoachMode(false);
    // Ideally we would load the specific client's data into the view
    // For "Current User", it's already there.
    // For others, we'd need to mock swap the data, but for this task we'll just close the coach view
    // and show the "Current" view as a demo of the "Open" functionality.
}

</script>

<!-- CHECK-IN MODAL (Moved to root) -->
<div id="checkin-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:10005; align-items:center; justify-content:center; backdrop-filter:blur(5px);">
    <div style="background:white; width:90%; max-width:400px; border-radius:24px; padding:30px; position:relative; animation: slideUp 0.3s ease-out;">
        <h2 style="color:var(--primary); margin:0 0 10px 0; text-align:center;">Daily Check-in</h2>
        <p style="text-align:center; color:#64748b; margin-bottom:25px; font-size:0.95rem;">Let's customize your session for today.</p>

        <!-- Step 1: Energy -->
        <div style="margin-bottom:20px;">
            <label style="display:block; font-weight:600; margin-bottom:10px; color:var(--text-main);">How is your energy?</label>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                <button onclick="selectEnergy('high')" id="btn-energy-high" class="checkin-btn" style="padding:15px; border:2px solid #e2e8f0; border-radius:12px; background:white; cursor:pointer; transition:all 0.2s;">
                    <div style="font-size:1.5rem;">⚡</div>
                    <div style="font-weight:600; margin-top:5px;">High</div>
                </button>
                <button onclick="selectEnergy('low')" id="btn-energy-low" class="checkin-btn" style="padding:15px; border:2px solid #e2e8f0; border-radius:12px; background:white; cursor:pointer; transition:all 0.2s;">
                    <div style="font-size:1.5rem;">🪫</div>
                    <div style="font-weight:600; margin-top:5px;">Low</div>
                </button>
            </div>
        </div>

        <!-- Step 2: Equipment -->
        <div style="margin-bottom:30px;">
            <label style="display:block; font-weight:600; margin-bottom:10px; color:var(--text-main);">Equipment Access?</label>
            <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px;">
                <button onclick="selectEquipment('none')" id="btn-eq-none" class="checkin-btn" style="padding:10px; border:2px solid #e2e8f0; border-radius:12px; background:white; cursor:pointer;">
                    <span style="font-size:1.2rem;">🧘</span><br><span style="font-size:0.8rem; font-weight:600;">None</span>
                </button>
                <button onclick="selectEquipment('dumbbells')" id="btn-eq-dumbbells" class="checkin-btn" style="padding:10px; border:2px solid #e2e8f0; border-radius:12px; background:white; cursor:pointer;">
                    <span style="font-size:1.2rem;">🏋️</span><br><span style="font-size:0.8rem; font-weight:600;">Dumbbells</span>
                </button>
                <button onclick="selectEquipment('gym')" id="btn-eq-gym" class="checkin-btn" style="padding:10px; border:2px solid #e2e8f0; border-radius:12px; background:white; cursor:pointer;">
                    <span style="font-size:1.2rem;">🏢</span><br><span style="font-size:0.8rem; font-weight:600;">Gym</span>
                </button>
            </div>
        </div>

        <button onclick="submitCheckIn()" style="width:100%; background:var(--primary); color:white; border:none; padding:16px; border-radius:50px; font-weight:700; font-size:1rem; cursor:pointer;">Build My Workout</button>
    </div>
</div>

<!-- Onboarding Modal -->
<div class="onboarding-overlay" id="onboarding-overlay">
    <div class="onboarding-modal">
        <div class="onboarding-header">
            <h2 style="color: white; font-size: 1.8rem; margin-bottom: 10px;">Welcome to Your Switch</h2>
            <p style="margin: 0; opacity: 0.9;">Your 28-day cortisol recovery starts now.</p>
        </div>
        <div class="onboarding-content">
            <div class="onboarding-step">
                <div class="step-icon">👥</div>
                <div class="step-text">
                    <h4>Community Support</h4>
                    <p>Chat with your group daily to share wins and stay motivated.</p>
                </div>
            </div>
            <div class="onboarding-step">
                <div class="step-icon">💬</div>
                <div class="step-text">
                    <h4>Message Your Coach</h4>
                    <p>Get direct guidance and answers whenever you need help.</p>
                </div>
            </div>
            <div class="onboarding-step">
                <div class="step-icon">📸</div>
                <div class="step-text">
                    <h4>Track Your Meals</h4>
                    <p>Snap and upload photos of your meals each day to stay accountable.</p>
                </div>
            </div>
            <div class="onboarding-step">
                <div class="step-icon">📝</div>
                <div class="step-text">
                    <h4>Daily Reflections</h4>
                    <p>Fill out your reflections to process thoughts and feelings.</p>
                </div>
            </div>
            <div class="onboarding-step">
                <div class="step-icon">🛒</div>
                <div class="step-text">
                    <h4>Shopping List</h4>
                    <p>Access your weekly <strong>Shopping List</strong> in the Meal Plan tab.</p>
                </div>
            </div>
            <button class="onboarding-btn" onclick="completeOnboarding()">Let's Get Started</button>
        </div>
    </div>
</div>

<script>
    // Initialize Onboarding
    function initOnboarding() {
        // Check if user has seen onboarding
        const hasSeenOnboarding = localStorage.getItem('plantbased_onboarding_complete');
        
        if (!hasSeenOnboarding) {
            // Show modal with a slight delay for effect
            setTimeout(() => {
                const overlay = document.getElementById('onboarding-overlay');
                overlay.style.display = 'flex';
                // Trigger reflow
                overlay.offsetHeight;
                overlay.classList.add('active');
            }, 1000);
        }
    }

    function completeOnboarding() {
        const overlay = document.getElementById('onboarding-overlay');
        overlay.classList.remove('active');
        
        // Wait for animation
        setTimeout(() => {
            overlay.style.display = 'none';
            // Set flag in localStorage
            localStorage.setItem('plantbased_onboarding_complete', 'true');
        }, 400);
    }
    
    // Run initialization
    if(document.readyState === 'complete') {
        loadCommunityFeed();
        initOnboarding();
    } else {
        window.addEventListener('load', () => {
            loadCommunityFeed();
            initOnboarding();
        });
    }
</script>

<script>
// --- PWA INSTALL BANNER LOGIC ---
let deferredPrompt;
let installBannerDismissed = localStorage.getItem('pwa_banner_dismissed') === 'true';

// Detect if running as installed PWA
const isInstalledPWA = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;

// Only show on mobile devices
const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    
    // Show banner if: mobile + not installed + not dismissed
    if (isMobile && !isInstalledPWA && !installBannerDismissed) {
        setTimeout(() => {
            const banners = document.querySelectorAll('[id="pwa-install-banner"]');
            banners.forEach(banner => {
                if (banner) banner.style.display = 'block';
            });
        }, 2000); // Show after 2 seconds
    }
});

window.installPWA = async function() {
    if (!deferredPrompt) return;
    
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    
    if (outcome === 'accepted') {
        console.log('PWA installed');
    }
    
    deferredPrompt = null;
    const banners = document.querySelectorAll('[id="pwa-install-banner"]');
    banners.forEach(banner => {
        if (banner) banner.style.display = 'none';
    });
};

window.dismissInstall = function() {
    const banners = document.querySelectorAll('[id="pwa-install-banner"]');
    banners.forEach(banner => {
        if (banner) banner.style.display = 'none';
    });
    localStorage.setItem('pwa_banner_dismissed', 'true');
};
</script>

<script>
// --- AI COACH DRAFT MODE LOGIC & AUTHENTICATION ---
// Overrides and Extensions for the Coach Command Center

let isCoachMode = false;


function checkUserRole() {
    let email = sessionStorage.getItem('userEmail') || "shannonrhysbirch@gmail.com";
    if (email.includes('plantbased-balance.org')) {
        console.log("Coach Identity Detected: " + email);
        if(!isCoachMode) toggleCoachMode(true);
    } else {
        console.log("User Identity Detected: " + email);
        if(isCoachMode) toggleCoachMode(false);
    }
}

window.toggleCoachMode = function(show) {
    isCoachMode = show;
    const dash = document.getElementById('view-coach-dashboard');
    if (show) {
        if(dash) dash.style.display = 'block';
        if(typeof initCoachDashboard === 'function') initCoachDashboard();
        const returnBtn = document.getElementById('return-to-coach-btn');
        if(returnBtn) returnBtn.remove();
    } else {
        if(dash) dash.style.display = 'none';
    }
};

function gatherContext() {
    let dayNum = 1;
    const startStr = localStorage.getItem('pbb_start_date');
    if(startStr) {
         const start = new Date(startStr);
         if(!isNaN(start)) {
             const diff = new Date() - start;
             dayNum = Math.floor(diff / (1000 * 60 * 60 * 24)) + 1;
             if(dayNum < 1) dayNum = 1;
         }
    }

    return {
        name: localStorage.getItem('userName') || "Friend",
        profile: (sessionStorage.getItem('userResult') || 'CORTISOL').toUpperCase(),
        sleep: localStorage.getItem('sleep_quality') || 'Unknown',
        energy: localStorage.getItem('energy_level') || 'Unknown',
        challengeDay: dayNum
    };
}

window.triggerCoachResponse = async function(userMsg) {
    const container = document.getElementById('chat-messages-container');
    const typingDiv = document.createElement('div');
    typingDiv.id = 'coach-typing';
    typingDiv.style.cssText = "display: flex; align-items: center; margin-bottom: 20px; margin-left:10px;";
    typingDiv.innerHTML = `
        <div style="width: 8px; height: 8px; background: #94a3b8; border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both;"></div>
        <div style="width: 8px; height: 8px; background: #94a3b8; border-radius: 50%; margin: 0 4px; animation: bounce 1.4s infinite ease-in-out both 0.16s;"></div>
        <div style="width: 8px; height: 8px; background: #94a3b8; border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both 0.32s;"></div>
    `;
    if(container) {
        container.appendChild(typingDiv);
        container.scrollTop = container.scrollHeight;
    }

    const removeTypingIndicator = () => {
        const el = document.getElementById('coach-typing');
        if(el) el.remove();
    };

    let context = gatherContext();
    const history = getChatHistory();
    
    // Determine Conversation Status (New vs Continuing)
    let conversationStatus = 'new';
    if (history.length > 0) {
        const lastMsg = history[history.length - 1];
        const gap = Date.now() - lastMsg.timestamp;
        if (gap < (60 * 60 * 1000)) { // 1 hour threshold
            conversationStatus = 'continuing';
        }
    }

    // Determine how many messages are in the current buffer to avoid sending them twice
    // (since they were already pushed to history in submitCoachMessage)
    const messagesToSlice = Array.isArray(window._lastBufferedCount) ? window._lastBufferedCount.length : 0;
    const historyContext = history.slice(0, history.length - messagesToSlice);

    const payloadHistory = historyContext.map(m => ({ 
        role: m.role === 'user' ? 'user' : 'model', 
        text: m.text,
        timestamp: m.timestamp
    }));

    try {
        const response = await fetch('/.netlify/functions/ai-chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                mode: 'coach',
                message: userMsg,
                contextData: context,
                chatHistory: payloadHistory,
                conversationStatus: conversationStatus,
                currentDateTime: new Date().toLocaleString()
            })
        });

        const data = await response.json();
        removeTypingIndicator();

        if (!response.ok) throw new Error(data.error?.message || "Connection Issue");

        if (data.reply) {
            // Support for multi-message responses separated by '|||'
            const parts = data.reply.split(/\s*\|\|\|\s*/g).filter(s => s && s.trim());
            let delay = 0;
            parts.forEach((part) => {
                setTimeout(() => appendCoachMessage(part), delay);
                delay += 1000 + (part.length * 30); 
            });
        }
    } catch (err) {
        console.error("Coach Error", err);
        removeTypingIndicator();
        // Silent fail or very subtle hint - but never "AI Error"
    }
};

async function triggerAICommunityResponse(userMsg, chainCount = 0) {
    const lowMsg = userMsg.toLowerCase();
    
    // 1. Thread Persistence & Direct Address Logic
    let persona = null;
    const fullHistory = JSON.parse(localStorage.getItem('community_chat_history') || '[]');
    
    // A) Check for direct address
    for (const m of AI_MEMBERS) {
        const firstName = m.name.split(' ')[0].toLowerCase();
        if (lowMsg.includes(firstName)) {
            persona = m;
            break;
        }
    }
    
    // B) Thread persistence
    if (!persona && fullHistory.length > 0) {
        const lastMsg = fullHistory[fullHistory.length - 1];
        if (lastMsg.authorId && lastMsg.authorId !== 'current-user') {
            const timeSinceLast = Date.now() - lastMsg.timestamp;
            if (timeSinceLast < 10 * 60 * 1000) {
                persona = AI_MEMBERS.find(m => m.id === lastMsg.authorId);
            }
        }
    }
    
    if (!persona) {
        persona = AI_MEMBERS[Math.floor(Math.random() * AI_MEMBERS.length)];
    }

    setTimeout(async () => {
        try {
            const historyContext = fullHistory.slice(-20).map(m => ({
                role: m.authorId === 'current-user' ? 'user' : 'model',
                text: `${m.authorName || 'Member'}: ${m.text}`,
                timestamp: m.timestamp
            }));
            
            const response = await fetch('/.netlify/functions/ai-chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    mode: 'community',
                    message: userMsg,
                    memberPersona: persona,
                    chatHistory: historyContext,
                    currentDateTime: new Date().toLocaleString()
                })
            });
            const data = await response.json();
            if (data.reply) {
                const parts = data.reply.split(/\s*\|\|\|\s*/g).filter(s => s && s.trim());
                let totalDelay = 0;
                parts.forEach((part, idx) => {
                    const partDelay = 1200 + (part.length * 20);
                    setTimeout(() => {
                        const msgs = JSON.parse(localStorage.getItem('community_chat_history') || '[]');
                        msgs.push({ 
                            authorId: persona.id, 
                            authorName: persona.name, 
                            authorAvatar: (persona.id || 'm1').replace('m', ''), 
                            text: part, 
                            timestamp: Date.now() 
                        });
                        localStorage.setItem('community_chat_history', JSON.stringify(msgs));
                        if(typeof renderChat === 'function') renderChat(msgs);
                        
                        // If it's the last part, consider triggering a peer response or jump-in
                        if (idx === parts.length - 1) {
                            if (chainCount < 2 && Math.random() < 0.4) {
                                // Peer Response (AI to AI)
                                const peerPersona = AI_MEMBERS.filter(m => m.id !== persona.id)[Math.floor(Math.random() * (AI_MEMBERS.length - 1))];
                                setTimeout(() => triggerJumpInResponse(part, peerPersona, chainCount + 1), 3000 + Math.random() * 2000);
                            } else if (chainCount === 0 && Math.random() < 0.3) {
                                // Classic Jump-in
                                const jumpPersona = AI_MEMBERS.filter(m => m.id !== persona.id)[Math.floor(Math.random() * (AI_MEMBERS.length - 1))];
                                setTimeout(() => triggerJumpInResponse(userMsg, jumpPersona, chainCount + 1), 5000 + Math.random() * 2000);
                            }
                        }
                    }, totalDelay);
                    totalDelay += partDelay;
                });
            }
        } catch (e) { console.log("Comm skip", e); }
    }, 2000 + Math.random() * 2000);
}

async function triggerJumpInResponse(prevContext, persona, chainCount) {
    try {
        const fullHistory = JSON.parse(localStorage.getItem('community_chat_history') || '[]');
        const historyContext = fullHistory.slice(-20).map(m => ({
            role: m.authorId === 'current-user' ? 'user' : 'model',
            text: `${m.authorName || 'Member'}: ${m.text}`,
            timestamp: m.timestamp
        }));
        
        const response = await fetch('/.netlify/functions/ai-chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                mode: 'community',
                message: `(Respond to: "${prevContext}")`,
                memberPersona: persona,
                chatHistory: historyContext,
                currentDateTime: new Date().toLocaleString()
            })
        });
        const data = await response.json();
        if (data.reply) {
            const parts = data.reply.split(/\s*\|\|\|\s*/g).filter(s => s && s.trim());
            let totalDelay = 0;
            parts.forEach((part, idx) => {
                const partDelay = 1200 + (part.length * 20);
                setTimeout(() => {
                    const msgs = JSON.parse(localStorage.getItem('community_chat_history') || '[]');
                    msgs.push({ 
                        authorId: persona.id, 
                        authorName: persona.name, 
                        authorAvatar: (persona.id || 'm1').replace('m', ''), 
                        text: part, 
                        timestamp: Date.now() 
                    });
                    localStorage.setItem('community_chat_history', JSON.stringify(msgs));
                    if(typeof renderChat === 'function') renderChat(msgs);

                    // Chain limit check
                    if (idx === parts.length - 1 && chainCount < 2 && Math.random() < 0.3) {
                         const nextPersona = AI_MEMBERS.filter(m => m.id !== persona.id)[Math.floor(Math.random() * (AI_MEMBERS.length - 1))];
                         setTimeout(() => triggerJumpInResponse(part, nextPersona, chainCount + 1), 4000 + Math.random() * 2000);
                    }
                }, totalDelay);
                totalDelay += partDelay;
            });
        }
    } catch (e) { console.log("JumpIn skip", e); }
}

window.openAsClient = function() {
    toggleCoachMode(false);
    if(typeof switchAppTab === 'function') switchAppTab('dashboard');
    const btn = document.createElement('div');
    btn.id = 'return-to-coach-btn';
    btn.innerHTML = '⏎ Return to Coach View';
    btn.style.cssText = 'position:fixed; bottom:90px; right:20px; background:#1e293b; color:white; padding:12px 20px; border-radius:50px; font-weight:bold; box-shadow:0 10px 25px rgba(0,0,0,0.3); z-index:10000; cursor:pointer; font-size:0.9rem;';
    btn.onclick = () => toggleCoachMode(true);
    document.body.appendChild(btn);
};

window.submitCoachMessage = function() {
    const input = document.getElementById('coach-chat-input');
    if(!input) return;
    const text = input.value.trim();
    if (!text) return;
    
    const container = document.getElementById('chat-messages-container');
    if(container) {
        const msgDiv = document.createElement('div');
        msgDiv.style.cssText = "display: flex; flex-direction: column; align-items: flex-end; margin-bottom: 20px; align-self: flex-end; max-width: 85%; animation: fadeIn 0.3s ease;";
        msgDiv.innerHTML = `
            <div style="background: var(--chat-bg-user); padding: 15px 20px; border-radius: 16px 0 16px 16px; color: var(--chat-text-user); box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
                <p style="margin: 0; font-size: 0.95rem; line-height: 1.5; color: inherit;">${text}</p>
            </div>
            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 5px; margin-right: 2px;">You  Just now</div>
        `;
        container.appendChild(msgDiv);
        container.scrollTop = container.scrollHeight;
    }

    saveToHistory('user', text);
    input.value = '';

    // Message Buffering Logic
    if (!window._coachMessageBuffer) window._coachMessageBuffer = [];
    window._coachMessageBuffer.push(text);
    
    if (window._coachBufferTimeout) clearTimeout(window._coachBufferTimeout);
    
    window._coachBufferTimeout = setTimeout(() => {
        const combinedMsg = window._coachMessageBuffer.join(" ");
        window._lastBufferedCount = [...window._coachMessageBuffer]; // Store for context slicing
        window._coachMessageBuffer = [];
        triggerCoachResponse(combinedMsg);
    }, 2000); // 2 second buffer
};

function getChatHistory() { return JSON.parse(localStorage.getItem('shannon_chat_history') || '[]'); }
function saveToHistory(role, text) {
    const history = getChatHistory();
    history.push({ role, text, timestamp: Date.now() });
    if (history.length > 150) history.shift(); // Increased to 150
    localStorage.setItem('shannon_chat_history', JSON.stringify(history));
}

window.loadChatHistory = function() {
    const container = document.getElementById('chat-messages-container');
    if (!container) return;
    const history = getChatHistory();
    container.innerHTML = `<div style="display: flex; flex-direction: column; align-items: flex-start; margin-bottom: 20px; max-width: 85%;">
        <div style="background: var(--chat-bg-coach); padding: 15px 20px; border-radius: 0 16px 16px 16px; border: 1px solid var(--chat-border-coach); color: var(--chat-text-coach);">
        <p style="margin: 0; font-size: 0.95rem; line-height: 1.5;">Hey there! I'm Shannon, your reset coach. How's your progress tracking today?</p>
        </div>
        <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 5px; margin-left: 2px;">Shannon  Always here</div>
    </div>`;

    history.forEach(msg => {
        const isUser = msg.role === 'user';
        const msgDiv = document.createElement('div');
        msgDiv.style.cssText = `display: flex; flex-direction: column; align-items: ${isUser ? 'flex-end' : 'flex-start'}; margin-bottom: 20px; align-self: ${isUser ? 'flex-end' : 'flex-start'}; max-width: 85%;`;
        msgDiv.innerHTML = `
            <div style="background: ${isUser ? 'var(--chat-bg-user)' : 'var(--chat-bg-coach)'}; padding: 15px 20px; border-radius: ${isUser ? '16px 0 16px 16px' : '0 16px 16px 16px'}; border: ${isUser ? 'none' : '1px solid var(--chat-border-coach)'}; color: ${isUser ? 'var(--chat-text-user)' : 'var(--chat-text-coach)'}; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
                <p style="margin: 0; font-size: 0.95rem; line-height: 1.5; color: inherit;">${msg.text}</p>
            </div>
            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 5px;">${isUser ? 'You' : 'Shannon'}  ${new Date(msg.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
        `;
        container.appendChild(msgDiv);
    });
    container.scrollTop = container.scrollHeight;
};

window.appendCoachMessage = function(text) {
    const container = document.getElementById('chat-messages-container');
    if (!container) return;
    const msgDiv = document.createElement('div');
    msgDiv.style.cssText = "display: flex; flex-direction: column; align-items: flex-start; margin-bottom: 20px; max-width: 85%; animation: fadeIn 0.3s ease;";
    msgDiv.innerHTML = `
        <div style="background: var(--chat-bg-coach); padding: 15px 20px; border-radius: 0 16px 16px 16px; border: 1px solid var(--chat-border-coach); color: var(--chat-text-coach); box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
            <p style="margin: 0; font-size: 0.95rem; line-height: 1.5; color: inherit; white-space: pre-wrap;">${text}</p>
        </div>
        <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 5px; margin-left: 2px;">Shannon ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
    `;
    container.appendChild(msgDiv);
    container.scrollTop = container.scrollHeight;
    saveToHistory('model', text);
};

async function sendCommunityMessage() {
    const input = document.getElementById('community-chat-input');
    const text = input.value?.trim();
    if(!text) return;
    const messages = JSON.parse(localStorage.getItem('community_chat_history') || '[]');
    messages.push({ 
        authorId: 'current-user', 
        authorName: localStorage.getItem('userName') || 'Friend',
        text, 
        timestamp: Date.now() 
    });
    localStorage.setItem('community_chat_history', JSON.stringify(messages));
    input.value = '';
    renderChat(messages);
    triggerAICommunityResponse(text);
}

// --- THEME SYSTEM ---
// --- THEME SYSTEM ---
const APP_THEMES = {
    'default': { 
        name: 'Forest (Premium)', 
        colors: { 
            '--primary': '#064e3b', 
            '--primary-light': '#065f46', 
            '--secondary': '#b45309', 
            '--accent-green': '#ecfdf5', 
            '--bg': '#f7fdfa', 
            '--surface': '#ffffff', 
            '--text-main': '#064e3b', 
            '--text-muted': '#374151',
            '--chat-bg-user': '#064e3b',
            '--chat-text-user': '#ffffff',
            '--chat-bg-coach': '#f3f4f6',
            '--chat-text-coach': '#111827',
            '--chat-border-coach': '#e5e7eb'
        } 
    },
    'antigravity-dark': { 
        name: 'Antigravity Dark', 
        colors: { 
            '--primary': '#6366f1', 
            '--primary-light': '#818cf8', 
            '--secondary': '#22d3ee', 
            '--accent-green': '#1e1b4b', 
            '--bg': '#0f172a', 
            '--surface': '#1e293b', 
            '--text-main': '#f8fafc', 
            '--text-muted': '#94a3b8',
            '--chat-bg-user': '#6366f1',
            '--chat-text-user': '#ffffff',
            '--chat-bg-coach': '#334155',
            '--chat-text-coach': '#f8fafc',
            '--chat-border-coach': '#475569'
        } 
    },
    'antigravity-light': { 
        name: 'Antigravity Light', 
        colors: { 
            '--primary': '#4f46e5', 
            '--primary-light': '#6366f1', 
            '--secondary': '#0891b2', 
            '--accent-green': '#eff6ff', 
            '--bg': '#ffffff', 
            '--surface': '#f8fafc', 
            '--text-main': '#0f172a', 
            '--text-muted': '#64748b',
            '--chat-bg-user': '#4f46e5',
            '--chat-text-user': '#ffffff',
            '--chat-bg-coach': '#f1f5f9',
            '--chat-text-coach': '#0f172a',
            '--chat-border-coach': '#e2e8f0'
        } 
    },
    'ocean': { 
        name: 'Ocean Calm', 
        colors: { 
            '--primary': '#0369a1', 
            '--primary-light': '#0ea5e9', 
            '--secondary': '#db2777', 
            '--accent-green': '#f0f9ff', 
            '--bg': '#f0f9ff', 
            '--surface': '#ffffff', 
            '--text-main': '#082f49', 
            '--text-muted': '#64748b',
            '--chat-bg-user': '#0369a1',
            '--chat-text-user': '#ffffff',
            '--chat-bg-coach': '#f1f5f9',
            '--chat-text-coach': '#082f49',
            '--chat-border-coach': '#e0f2fe'
        } 
    },
    'sunset': { 
        name: 'Sunset Glow', 
        colors: { 
            '--primary': '#9d174d', 
            '--primary-light': '#be123c', 
            '--secondary': '#ea580c', 
            '--accent-green': '#fff1f2', 
            '--bg': '#fff1f2', 
            '--surface': '#ffffff', 
            '--text-main': '#500724', 
            '--text-muted': '#9d174d',
            '--chat-bg-user': '#9d174d',
            '--chat-text-user': '#ffffff',
            '--chat-bg-coach': '#fff5f5',
            '--chat-text-coach': '#500724',
            '--chat-border-coach': '#ffe4e6'
        } 
    }
};

function applyAppTheme(themeKey) {
    const theme = APP_THEMES[themeKey];
    if(!theme) return;
    for (const [key, value] of Object.entries(theme.colors)) { document.documentElement.style.setProperty(key, value); }
    localStorage.setItem('userThemePreference', themeKey);
    const selector = document.getElementById('theme-selector');
    if(selector) selector.value = themeKey;
}

// --- INITIALIZATION ---
document.addEventListener('DOMContentLoaded', () => {
    loadChatHistory();
    loadCommunityFeed();
    setTimeout(checkUserRole, 500);
    const savedTheme = localStorage.getItem('userThemePreference') || 'default';
    applyAppTheme(savedTheme);

    // Event Listeners
    document.getElementById('coach-chat-input')?.addEventListener('keypress', (e) => { if (e.key === 'Enter') submitCoachMessage(); });
    document.getElementById('community-chat-input')?.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendCommunityMessage(); });
});
</script>

<!-- VIDEO MODAL (Ensured Existence) -->
<!-- VIDEO MODAL (Improved) -->
<div id="video-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.95); z-index:10010; flex-direction:column; align-items:center; justify-content:center; backdrop-filter:blur(10px);">
    <div style="width:100%; max-width:900px; position:relative; padding: 20px;">
        <div style="background:black; width:100%; aspect-ratio:16/9; border-radius:16px; overflow:hidden; box-shadow:0 25px 50px -12px rgba(0,0,0,0.5);">
            <iframe id="video-frame" style="width:100%; height:100%; border:none;" allow="autoplay; fullscreen" allowfullscreen></iframe>
        </div>
        
        <div style="display:flex; justify-content:space-between; align-items:center; margin-top:20px;">
             <h3 id="video-modal-title" style="color:white; margin:0; font-size:1.1rem; font-weight:600;">Exercise Video</h3>
             <div style="display:flex; gap:10px;">
                  <button id="video-open-new-tab" onclick="openVideoNewTab()" style="background:rgba(255,255,255,0.1); color:white; border:1px solid rgba(255,255,255,0.2); padding:10px 20px; border-radius:50px; cursor:pointer; font-size:0.85rem; transition:all 0.2s;">
                      Open in New Tab
                  </button>
                  <button onclick="closeVideoModal()" style="background:white; color:black; border:none; padding:10px 25px; border-radius:50px; cursor:pointer; font-weight:700; font-size:0.85rem; box-shadow: 0 4px 12px rgba(255,255,255,0.2);">
                      Close
                  </button>
             </div>
        </div>
    </div>
</div>

<script src="exercise_videos.js"></script>
<script>
// Video Logic
let currentVideoUrl = '';

function findVideoMatch(name) {
    if(EXERCISE_VIDEOS[name]) return EXERCISE_VIDEOS[name];

    // Clean name logic: Remove common prefixes and trim
    const cleanName = name.replace(/(Dumbbell|Barbell|Body Weight|Band|Cable|Machine) /gi, '').trim();
    if(EXERCISE_VIDEOS[cleanName]) return EXERCISE_VIDEOS[cleanName];

    // Fuzzy Search (Simple Includes)
    const keys = Object.keys(EXERCISE_VIDEOS);
    
    // 1. Try to find a key that CONTAINS the clean name
    const partialMatch = keys.find(k => k.toLowerCase().includes(cleanName.toLowerCase()));
    if(partialMatch) return EXERCISE_VIDEOS[partialMatch];
    
    // 2. Try to find a key that is CONTAINED BY the clean name
    const reverseMatch = keys.find(k => cleanName.toLowerCase().includes(k.toLowerCase()));
    if(reverseMatch) return EXERCISE_VIDEOS[reverseMatch];

    return '';
}

function openExerciseVideo(url, title) {
    console.log("Opening video for:", title);
    
    // 1. Resolve URL if missing
    if (!url) {
        url = findVideoMatch(title);
        if(!url) {
            console.log("No video found for:", title);
            alert("Video coming soon for: " + title);
            return;
        }
        console.log("Found match:", url);
    }

    let embedUrl = url;
    let viewUrl = url;

    // 2. Robust Embed Transformations
    if (url.includes('drive.google.com')) {
        let fileId = null;
        if (url.includes('/file/d/')) {
            fileId = url.split('/file/d/')[1].split('/')[0];
        } else if (url.includes('id=')) {
            fileId = url.split('id=')[1].split('&')[0];
        }

        if (fileId) {
            embedUrl = `https://drive.google.com/file/d/${fileId}/preview`;
            viewUrl = `https://drive.google.com/file/d/${fileId}/view`;
        } else {
            // Fallback: Ensure /preview is used if no ID extraction but still Drive
            if (!url.includes('/preview')) {
                 if (url.includes('/view')) embedUrl = url.replace('/view', '/preview');
                 else embedUrl = url.replace(/\/$/, '') + '/preview';
            }
        }
    } else if (url.includes('watch?v=')) {
        const v = url.split('watch?v=')[1].split('&')[0];
        embedUrl = `https://www.youtube.com/embed/${v}?autoplay=1`;
        viewUrl = `https://www.youtube.com/watch?v=${v}`;
    } else if (url.includes('youtu.be/')) {
        const v = url.split('youtu.be/')[1].split('?')[0];
        embedUrl = `https://www.youtube.com/embed/${v}?autoplay=1`;
        viewUrl = `https://www.youtube.com/watch?v=${v}`;
    }

    // 3. Setup Modal State
    currentVideoUrl = viewUrl; 
    const modal = document.getElementById('video-modal');
    const frame = document.getElementById('video-frame');
    const titleEl = document.getElementById('video-modal-title');
    
    if(titleEl) titleEl.innerText = title;
    
    // Reset first to stop old video
    frame.src = ''; 
    modal.style.display = 'flex'; 
    
    // Add error handling
    frame.onerror = function() {
        console.error('Failed to load video:', embedUrl);
        alert('Unable to load video. Opening in new tab.');
        window.open(viewUrl, '_blank');
        closeVideoModal();
    };

    // Small delay to ensure display:flex is rendered before loading iframe
    setTimeout(() => {
        frame.src = embedUrl;
    }, 100);
}

function openVideoNewTab() {
    if(currentVideoUrl) window.open(currentVideoUrl, '_blank');
}

function closeVideoModal() {
    const modal = document.getElementById('video-modal');
    const frame = document.getElementById('video-frame');
    modal.style.display = 'none';
    frame.src = ''; // Stop video
}

// Close on background click
document.getElementById('video-modal').addEventListener('click', function(e) {
    if (e.target === this) closeVideoModal();
});
</script>
<div id="coach-floating-bubble" onclick="openCoachChat()" style="position: fixed; bottom: 130px; right: 20px; z-index: 9999; cursor: pointer; transition: transform 0.2s;">
    <div style="width: 56px; height: 56px; border-radius: 50%; background: #f1f5f9 url('https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80') no-repeat center/cover; border: 3px solid white; box-shadow: 0 4px 15px rgba(0,0,0,0.15);"></div>
    <div id="coach-bubble-dot" style="position: absolute; bottom: 2px; right: 2px; width: 14px; height: 14px; background: #22c55e; border: 2px solid white; border-radius: 50%;"></div>
</div>

<script>
// --- COACH CHAT ENHANCEMENTS ---

// 1. Office Hours Config (Brisbane Time)
const COACH_CONFIG = {
    timezone: 'Australia/Brisbane',
    startHour: 7,    // 7 AM
    endHour: 20,     // 8 PM
    endMin: 30       // :30
};

function getCoachState() {
    try {
        const now = new Date();
        const bneTimeStr = now.toLocaleString("en-US", {timeZone: COACH_CONFIG.timezone});
        const bneTime = new Date(bneTimeStr);
        
        const totalMins = bneTime.getHours() * 60 + bneTime.getMinutes();
        const startMins = COACH_CONFIG.startHour * 60;
        const endMins = COACH_CONFIG.endHour * 60 + COACH_CONFIG.endMin;
        
        const isOnline = totalMins >= startMins && totalMins < endMins;
        return { isOnline, totalMins };
    } catch(e) {
        return { isOnline: true }; // Fail-safe
    }
}

function updateCoachUI() {
    const { isOnline } = getCoachState();
    const headerStatus = document.getElementById('coach-header-status-text');
    const bubbleDot = document.getElementById('coach-bubble-dot');
    
    // Check Bubble Visibility (Hide if Support view is open)
    const supportView = document.getElementById('view-support');
    const bubble = document.getElementById('coach-floating-bubble');
    if(bubble && supportView) {
        const isSupportOpen = supportView.style.display !== 'none';
        bubble.style.display = isSupportOpen ? 'none' : 'block';
    }
    
    const color = isOnline ? '#22c55e' : '#94a3b8'; // Green vs Slate
    const text = isOnline ? 'Active Now' : 'Offline (Back 7am)';
    
    if(headerStatus) {
        headerStatus.innerText = text;
        headerStatus.style.color = isOnline ? 'var(--primary)' : '#64748b'; 
    }
    if(bubbleDot) {
        bubbleDot.style.background = color;
    }
}

// 2. Override Trigger for Offline Logic
const _originalTriggerCoach = window.triggerCoachResponse;

window.triggerCoachResponse = async function(userMsg) {
    const { isOnline } = getCoachState();
    
    if (!isOnline) {
        // Coach is Offline
        const container = document.getElementById('chat-messages-container');
        if(container) {
            const typing = document.createElement('div');
            typing.id = 'coach-typing-indicator';
            typing.style.cssText = "display: flex; align-items: center; margin-bottom: 20px; margin-left:10px;";
            typing.innerHTML = `<div style="font-size:0.8rem; color:#94a3b8; font-style:italic;">Coach is offline...</div>`;
            container.appendChild(typing);
            container.scrollTop = container.scrollHeight;
            
            await new Promise(r => setTimeout(r, 1200));
            typing.remove();
        }
        
        appendCoachMessage("I've officially clocked off for the night! 🌙 \n\nI'll be back online at 7am Brisbane time to review your message properly. Get some rest and chat soon!");
        return;
    }
    
    // Online: Pass through
    if(_originalTriggerCoach) await _originalTriggerCoach(userMsg);
};

// 3. Daily Greeting
function checkCoachGreeting() {
    const { isOnline } = getCoachState();
    if(!isOnline) return;
    
    const lastDate = localStorage.getItem('coach_last_greet_date');
    const now = new Date();
    const bneTimeStr = now.toLocaleString("en-US", {timeZone: COACH_CONFIG.timezone});
    const todayStr = new Date(bneTimeStr).toDateString();
    
    if (lastDate !== todayStr) {
        // New Day
        let dayNum = 1;
        const startStr = localStorage.getItem('pbb_start_date');
        if(startStr) {
             const start = new Date(startStr);
             if(!isNaN(start)) {
                 const diff = new Date() - start;
                 dayNum = Math.floor(diff / (1000 * 60 * 60 * 24)) + 1;
                 if(dayNum < 1) dayNum = 1;
             }
        }
        
        setTimeout(() => {
            appendCoachMessage(`Good morning Shannon! Day ${dayNum} of 28. \n\nHow are you feeling today? Ready to hit your targets?`);
            localStorage.setItem('coach_last_greet_date', todayStr);
        }, 1500);
    }
}

// 4. Bubble Interaction
function openCoachChat() {
    switchAppTab('support');
    const btns = document.querySelectorAll('#view-support .sub-nav .sub-btn');
    if(btns.length > 0 && typeof showSupportTab === 'function') {
        showSupportTab('chat', btns[0]);
    }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    updateCoachUI();
    setInterval(updateCoachUI, 1000); // Check every second for visibility toggle
    setTimeout(checkCoachGreeting, 2000);
});

// Immediate
updateCoachUI();
</script>
<!-- WORKOUT BUILDER VIEW -->
<div id="view-workout-builder" class="app-view" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:2000; overflow-y:auto; padding-bottom: 100px;">
    <div style="position: sticky; top: 0; z-index: 100; background: white; padding: 15px 20px; border-bottom: 1px solid #f1f5f9; display: flex; align-items: center; justify-content: space-between;">
        <div style="font-weight: 700; font-size: 1.2rem;">Build Workout</div>
        <div onclick="switchAppTab('movement-tab')" style="cursor:pointer; color:var(--text-muted); font-weight:600;">Close</div>
    </div>

    <div style="padding: 20px;">
        <div style="position:relative; margin-bottom: 20px;">
            <input type="text" id="builder-search" placeholder="Search 1800+ exercises..." onkeyup="filterExerciseLibrary(this.value)" 
                   style="width:100%; padding:15px 15px 15px 45px; border-radius:16px; border:1px solid #e2e8f0; font-size:1rem; background: #f8fafc;">
            <svg viewBox="0 0 24 24" style="width:20px; height:20px; fill:#94a3b8; position:absolute; left:15px; top:50%; transform:translateY(-50%);"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
        </div>
        
        <div id="builder-library-list" style="display:flex; flex-direction:column; gap:10px;">
            <!-- Dynamic Content -->
        </div>
    </div>
    
    <div id="builder-floating-action" style="position:fixed; bottom:20px; left:0; width:100%; padding:20px; display:none; z-index: 101;">
        <button onclick="startCustomBuilderWorkout()" style="width:100%; background:var(--primary); color:white; padding:18px; border-radius:50px; font-weight:800; border:none; box-shadow:0 10px 25px rgba(4,106,56,0.3); font-size: 1.1rem;">
            START SESSION (<span id="builder-count">0</span>)
        </button>
    </div>
</div>
</body>
</html>



