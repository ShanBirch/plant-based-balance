
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;family=Playfair+Display:ital,wght
@0,400;0,600;0,700;1,400&amp;display=swap" rel="stylesheet"/>
  <link href="manifest.json" rel="manifest"/>
  <script>
      navigator.serviceWorker.register('sw.js')
        .then(reg => console.log('SW Registered!', reg))
>       .catch(err => console.log('SW Failed:', err));
    }
  </script>
          --bg: #f9f9f7;
          --surface: #ffffff;
>         --text-main: #1a202c;
          --text-muted: #718096;
          
          font-family: 'Inter', sans-serif; 
          background: var(--bg);
>         color: var(--text-main); 
          margin: 0; 
          padding-bottom: calc(var(--nav-height) + 20px); /* Space for bottom nav */
          box-shadow: 0 2px 10px rgba(0,0,0,0.03);
      }
>     .app-logo { font-family: 'Playfair Display'; font-weight: 700; font-size: 1.25rem; color: var(--primary); }
      /* Profile View Styles */
      .profile-header {
          margin-bottom: 25px;
      }
>     .profile-photo-container {
          position: relative;
          width: 120px;
      }
      .profile-name-large {
>         font-family: 'Playfair Display';
          font-size: 1.8rem;
          margin-bottom: 5px;
          color: var(--primary);
      }
>     .profile-email {
          color: var(--text-muted);
          font-size: 0.95rem;
      }
>     .profile-details-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          margin-bottom: 30px;
      }
>     .detail-item {
          background: white;
          padding: 15px;
          text-align: center;
      }
>     .detail-label {
          font-size: 0.75rem;
          color: var(--text-muted);
          margin-bottom: 5px;
      }
>     .detail-val {
          font-weight: 700;
          color: var(--primary);
          border: 1px solid #cbd5e1;
          background: white;
>         color: var(--text-main);
          font-weight: 600;
          cursor: pointer;
      }
      .welcome-text { opacity: 0.9; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; color: white; }
>     .user-name { font-family: 'Playfair Display'; font-size: 2rem; margin: 5px 0 15px 0; }
      
      .stats-row { display: flex; gap: 15px; margin-top: 20px; }
  
      h1, h2, h3, h4 { 
>         font-family: 'Playfair Display', serif; 
          color: var(--primary);
          margin-top: 0;
      h2 { font-size: 1.75rem; color: var(--primary-light); }
      
>     /* Layout Container */
>     .container { 
          max-width: 100%; 
          margin: 0 auto; 
      
      .meal-title {
>         font-family: 'Playfair Display', serif;
          font-weight: 600;
          font-size: 1.25rem;
      /* Tables */
      table { width: 100%; border-collapse: separate; border-spacing: 0; margin: 20px 0; font-size: 0.95rem; border: 
1px solid #eee; border-radius: 12px; overflow: hidden; }
>     th { background: var(--primary); color: white; padding: 15px; text-align: left; font-weight: 500; font-family: 
'Playfair Display'; letter-spacing: 0.5px; }
      td { border-bottom: 1px solid #eee; padding: 12px 15px; color: #444; }
      tr:last-child td { border-bottom: none; }
          border-radius: 8px;
          box-shadow: 0 20px 50px rgba(0,0,0,0.5);
>         object-fit: contain;
          transform: scale(0.95);
          transition: transform 0.3s ease;
          padding-left: 35px; /* Space for checkbox */
          line-height: 1.4;
>         color: var(--text-main);
          cursor: pointer;
          transition: color 0.2s;
          align-items: center;
          justify-content: center;
>         font-family: 'Playfair Display', serif;
          font-weight: 700;
          font-size: 1.2rem;
  </head>
  <body>
> <div class="container">
  <!-- DASHBOARD VIEW (HOME) -->
  <div id="view-dashboard" class="app-view">
      <div class="dashboard-welcome">
          <div style="display:flex; justify-content:space-between; align-items:center;">
>              <span id="daily-progress-counter" class="welcome-text" style="color: var(--secondary); font-weight: 
700;">Day 1 of 28</span>
               <div class="profile-icon" onclick="switchAppTab('profile', this)">S</div> <!-- Placeholder User Initial 
-->
          </div>
>         <h1 class="user-name">Hello, Shannon</h1>
      </div>
  
          <h3 style="margin-bottom: 15px;">Today's Priority</h3>
          <!-- Quick Action Card -->
>          <div class="card" onclick="switchMainTab('meals');" style="cursor: pointer;">
              <div class="card-body" style="max-height: none; padding: 25px; opacity: 1; display: flex; align-items: 
center; gap: 20px;">
                  <div style="background: var(--accent-green); width: 60px; height: 60px; border-radius: 50%; display: 
flex; align-items: center; justify-content: center; font-size: 1.8rem;">🥣</div>
           <!-- Your Workout Actions -->
           <h3 style="margin: 30px 0 15px 0;">Your Workout</h3>
>          <div class="card" onclick="switchMainTab('movement');" style="cursor: pointer; border-left: 5px solid 
var(--secondary);">
              <div class="card-body" style="max-height: none; padding: 25px; opacity: 1; display: flex; align-items: 
center; gap: 20px;">
                  <div style="background: var(--accent-green); width: 60px; height: 60px; border-radius: 50%; display: 
flex; align-items: center; justify-content: center; font-size: 1.8rem;">🧘‍♀️</div>
           </div>
  
>         <h3 style="margin: 30px 0 15px 0;">Coaching Insight</h3>
           <div class="card">
                <div class="card-body" style="max-height: none; padding: 20px; opacity: 1;">
>                   <p id="daily-coaching-tip" style="margin:0;"><strong>Biology Tip:</strong> Eating within 30 
minutes of waking stops the morning cortisol spike. Have you had your breakfast?</p>
                </div>
           </div>
  </div>
  
> <!-- MEALS VIEW (Contains Week Tabs) -->
  <div id="view-meals" class="app-view" style="display:none;">
      <div class="app-header">
      </div>
  
>     <!-- Container for Week Content -->
>     <div id="meals-content-container">
          <!-- Today's Meals View -->
          <div class="view-section active" id="today">
              <!-- DYNAMIC SYMPTOM SECTION -->
              <div id="dynamic-symptom-section" style="display: none; border-bottom: 2px dashed #e2e8f0; 
margin-bottom: 30px; padding-bottom: 30px;">
>                 <h3 style="color: var(--secondary); font-size: 1.1rem; text-transform: uppercase; letter-spacing: 
1px; margin-bottom: 20px;">Your Personalized Focus Areas</h3>
>                 <div id="symptom-content-container"></div>
              </div>
>             <!-- Brain Consistency Box -->
               <div class="card" style="background: #f4f6f8; border-left: 4px solid var(--primary); margin-bottom: 
30px;">
                  <div class="card-body" style="max-height: none; padding: 30px; opacity: 1;">
                      <h3 style="display:flex; align-items:center; gap:10px;">🛡️ Consistency is Safety</h3>
>                     <p>Your brain constantly scans for threats. Erratic eating signals "famine", causing your brain 
to hoard fat stores and spike anxiety. <strong>We feed on a rhythm to lower adrenaline.</strong> By eating at the same 
times daily, we signal 'safety', allowing your body to relax and burn fat.</p>
                  </div>
              </div>
              <!-- 4 Golden Rules -->
              <h2 style="margin: 0 0 20px 0; text-align: center;">The 4 Golden Rules</h2>
>             <div id="golden-rules-container" style="display: grid; grid-template-columns: repeat(auto-fit, 
minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
                  <div class="card" style="margin:0;">
                      <div class="card-header" style="background:var(--secondary); color:white;"><div 
class="meal-title" style="color:white;">1. Carbs at Night</div></div>
                      <div class="card-header" style="background:var(--secondary); color:white;"><div 
class="meal-title" style="color:white;">4. 4-Hour Rhythm</div></div>
                      <div class="card-body" style="max-height:none; opacity:1; padding:20px;">
>                         <p><strong>Never go >4 hours without food.</strong> Frequent protein feedings assure your 
ancient brain that you are safe from starvation.</p>
                      </div>
                  </div>
                       <div>
                          <h3 style="color:var(--secondary);">Medicinal Power: The Sweet Potato</h3>
>                         <p><strong>Why simple carbs?</strong> When eaten at night, the strategic insulin release 
helps lower cortisol and drives Tryptophan into the brain to create <strong>Serotonin</strong>. It is your 
biochemistry hack for sleep and calm.</p>
                      </div>
                  </div>
      <div class="card-body">
      <div style="display: grid; grid-template-columns: 1fr; gap: 20px; margin-bottom: 30px;">
>     <!-- Movement Pairing (Gold Bg) -->
      <div style="background: #fffdf0; padding: 20px; border-radius: 12px; border: 1px solid #efe5c0;">
>     <h4 style="color: #9e7f28; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;">Movement 
Pairing</h4>
>     <p style="font-size: 0.95rem;">Pair this with <strong>low impact</strong> strength training or walking. Avoid 
HIIT if you are feeling wired/tired.</p>
      </div>
      <!-- Batch Cooking (Sage Bg) -->
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
      <div>
>         <h3>01 Daily Flow</h3>
          <p><strong>Morning:</strong> Hydration tonic.<br/><strong>Breakfast:</strong> Protein 
rich.<br/><strong>Lunch:</strong> Macro balanced.<br/><strong>Snack:</strong> Functional.<br/><strong>Dinner:</strong> 
Grounding.</p>
      </div>
      <div>
          <h3>03 Protein Anchor</h3>
>         <p>At least 25g per main meal. Add one scoop (20g) plant protein if satiety dips.</p>
      </div>
      <div>
          <div style="margin-bottom: 20px;">
              <h4 style="color: var(--primary);">Strategic Carb Timing</h4>
>             <p>We include specific slow-releasing carbohydrates in the evening (like sweet potatoes). This naturally 
lowers cortisol levels and boosts serotonin production, helping you wind down and improving sleep quality—the 
foundation of hormone repair.</p>
          </div>
          <div style="margin-bottom: 20px;">
                          <div class="card" style="margin:0;"><div class="card-header" 
style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">2. No 
Fasting</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Eat within <strong>30 
minutes</strong> of waking. Fasting spikes cortisol and keeps your body in emergency storage mode.</p></div></div>
                          <div class="card" style="margin:0;"><div class="card-header" 
style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">3. 
Magnesium</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Prioritize 
magnesium-rich foods (Spinach, Pumpkin Seeds, Dark Choc) to physically relax the nervous system.</p></div></div>
>                         <div class="card" style="margin:0;"><div class="card-header" 
style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">4. 4-Hour 
Rhythm</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p><strong>Never go >4 
hours without food.</strong> Frequent protein feedings assure your ancient brain that you are safe from 
starvation.</p></div></div>
                      `,
                      spotlight: `
                          <img src="protocols/cortisol/images/sweet_potato_spotlight.png" style="width:150px; 
height:150px; object-fit:cover; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1);">
>                         <div><h3 style="color:var(--secondary);">Medicinal Power: The Sweet 
Potato</h3><p><strong>Why simple carbs?</strong> When eaten at night, the strategic insulin release helps lower 
cortisol and drives Tryptophan into the brain to create <strong>Serotonin</strong>. It is your biochemistry hack for 
sleep and calm.</p></div>
                      `,
                      whyWorks: `
                          <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Calming Your 
Adrenals</h4><p>This plan specifically excludes stimulants and high-glycemic spikes that trigger cortisol release. By 
stabilizing your blood sugar with complex carbs and protein, we tell your body it is "safe," allowing your adrenal 
glands to rest and recover.</p></div>
>                         <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Strategic Carb 
Timing</h4><p>We include specific slow-releasing carbohydrates in the evening (like sweet potatoes). This naturally 
lowers cortisol levels and boosts serotonin production, helping you wind down and improving sleep quality—the 
foundation of hormone repair.</p></div>
                          <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Magnesium-Rich 
Ingredients</h4><p>High-stress burns through magnesium. This menu is packed with magnesium-rich foods like leafy 
greens, seeds, and cacao to actively replenish your stores, relaxing your nervous system and reducing 
anxiety.</p></div>
                          <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Anti-Inflammatory 
fats</h4><p>Healthy fats from avocados, nuts, and seeds provide the raw materials for hormone production while damping 
down the systemic inflammation caused by chronic stress.</p></div>
                      subtitle: "<strong>The \"Dominance\" Profile.</strong> Heavy cycles, bloating, and mood swings. 
This plan amplifies fiber and liver support to safely flush excess hormones.",
                      goldenRules: `
>                         <div class="card" style="margin:0;"><div class="card-header" 
style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">1. Cruciferous 
Daily</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Eat Broccoli, Kale, or 
Brussels Sprouts <strong>daily</strong>. They contain compounds (DIM) that active the liver's detox 
pathways.</p></div></div>
                          <div class="card" style="margin:0;"><div class="card-header" 
style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">2. Raw Carrot 
Salad</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Eat your raw carrot salad 
<strong>every day</strong>. Its unique fiber acts like a sponge for endotoxins and excess estrogen.</p></div></div>
                          <div class="card" style="margin:0;"><div class="card-header" 
style="background:var(--secondary); color:white;"><div class="meal-title" style="color:white;">3. 
Hydration</div></div><div class="card-body" style="max-height:none; opacity:1; padding:20px;"><p>Drink <strong>3 
Liters</strong> of water. Your kidneys are a major detox organ; keep them flushed to reduce bloating.</p></div></div>
                      spotlight: `
                          <img src="protocols/estrogen/images/raw_carrot_salad_spotlight.png" style="width:150px; 
height:150px; object-fit:cover; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1);">
>                          <div><h3 style="color:var(--secondary);">Medicinal Power: Raw Carrot 
Salad</h3><p><strong>Not just a side dish.</strong> Raw carrots contain a unique fiber that binds to estrogen in the 
intestine, preventing reabsorption. Paired with coconut oil and vinegar, it is a powerful daily detox tool.</p></div>
                      `,
                      whyWorks: `
>                         <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Supporting Liver 
Detoxification</h4><p>Your liver is responsible for clearing excess estrogen. This plan is rich in cruciferous 
vegetables (broccoli, kale, cauliflower) containing Indole-3-Carbinol, a compound that directly supports the liver's 
ability to safely metabolize and excrete used hormones.</p></div>
                          <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Fiber "Estrogen 
Trap"</h4><p>Once the liver processes estrogen, it needs to be eliminated. The high soluble fiber content in this plan 
(from oats, beans, flax) acts like a sponge in your gut, binding to this "old" estrogen and ensuring it leaves your 
body instead of being reabsorbed.</p></div>
>                         <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Phytoestrogen 
Modulation</h4><p>We use specific plant foods like flaxseeds and legumes that contain phytoestrogens. These smart 
compounds help balance your levels—providing a weak estrogenic effect if you're low, but competing with potent 
estrogens if you're high, creating a smoother ride.</p></div>
                          <div style="margin-bottom: 20px;"><h4 style="color: var(--primary);">Gut Microbiome 
Support</h4><p>A healthy gut minimizes the enzyme beta-glucuronidase, which can recycle bad estrogen. This diverse, 
plant-based menu feeds the beneficial bacteria needed to keep this enzyme in check.</p></div>
                      `,
  
                  // Golden Rules
>                 const rulesContainer = document.getElementById('golden-rules-container');
>                 if(rulesContainer) rulesContainer.innerHTML = content.goldenRules;
  
                  // Spotlight
                      fix: "We use the 'Flora-Flush' sequence. By rotating specific enzyme-active plants, we clear the 
digestive backlog and flatten the 'Endo-Belly' in days."
                  },
>                 joint_pain: {
                      title: 'SYMPTOM: JOINTS & INFLAMMATION',
                      wrong: "Estrogen is nature's anti-inflammatory. As it drops, your joints lose hydration and 
fascia becomes sticky, causing that 'stiff and achy' feeling.",
                      title: 'SYMPTOM: MOOD & IRRITABILITY',
                      wrong: "Estrogen protects your serotonin receptors. When it fluctuates, your emotional 'buffer' 
disappears, leading to sudden rage or weepiness.",
>                     fix: "The 'Neuro-Buffering' Protocol. We use amino-acid rich plant pairings to stabilize your 
dopamine and serotonin pathways, giving you your patience back."
                  },
>                 hair_skin: {
>                     title: 'SYMPTOM: HAIR & SKIN CHANGES',
>                     wrong: "As estrogen drops, your relative testosterone levels become dominant, attacking hair 
follicles and causing 'crepey' or dry skin.",
                      fix: "The 'Follicle-Fortress' Strategy. We block DHT naturally using specific plant sterols and 
re-hydrate the dermal layers with essential fatty acids."
                  },
                      title: 'SYMPTOM: HOT FLASHES & SWEATS',
                      wrong: "Your hypothalamus is misreading low estrogen as 'overheating,' triggering a false 
panic-cooldown response that results in sweats.",
>                     fix: "The 'Thermostat Reset.' We use cooling phytoestrogens and evening primrose timing to 'lie' 
to your brain's thermostat and keep your core temperature stable."
                  },
                  libido: {
                  anxiety: {
                      title: 'SYMPTOM: ANXIETY & DREAD',
>                     wrong: "Progesterone is your brain's natural 'chill-pill.' When it crashes, your GABA receptors 
are left unprotected, causing spikes of dread.",
                      fix: "The 'GABA-Guard' Sequence. We use magnesium-rich plant chelation and specific breathing 
windows to manually override the panic response."
                  },
>                 weight_gain: {
>                     title: 'SYMPTOM: UNEXPECTED WEIGHT GAIN',
                      wrong: "Your body is in 'Storage Mode.' It's hoarding fat to protect your bones and produce 
emergency estrogen, making standard dieting useless.",
                      fix: "The 'Metabolic Flip.' We switch your body from 'Storage' to 'Fuel' mode by hitting 
specific insulin triggers and using anti-inflammatory fats."
  
              // 3. Render Logic
>             const container = document.getElementById('symptom-content-container');
              const wrapper = document.getElementById('dynamic-symptom-section');
              
              if (activeSymptoms.length > 0) {
                  wrapper.style.display = 'block';
>                 container.innerHTML = activeSymptoms.map(s => `
                      <div style="margin-bottom: 20px; background: #f8fafc; padding: 20px; border-radius: 12px; 
border: 1px solid #e2e8f0;">
                          <h4 style="color: #48864B; margin: 0 0 10px 0; font-size: 0.9rem;">${s.title}</h4>
                  // Map symptoms to keywords/meal types
                  const mappings = {
>                     'mood': { type: 'BREAKFAST', badge: '⚡ Brain-Fat Focus', color: '#fef3c7', text: '#92400e' },
                      'bloating': { type: 'DINNER', badge: '🌱 Flora-Flush', color: '#dcfce7', text: '#166534' },
>                     'joint_pain': { type: 'SMOOTHIE', badge: '💧 Structural Hydration', color: '#dbeafe', text: 
'#1e40af' },
                      'anxiety': { type: 'SNACK', badge: '🧘 GABA-Guard', color: '#f3e8ff', text: '#6b21a8' },
>                     'weight_gain': { type: 'LUNCH', badge: '🔥 Metabolic Spark', color: '#ffe4e6', text: '#9f1239' }
                  };
  
      })();
  
>     // --- NEW: Coach & Photo Logic ---
      window.addEventListener('DOMContentLoaded', () => {
          injectMealPhotoUploads();
                       
                       uploadDiv.innerHTML = `
>                         <h4 style="color:var(--secondary); font-size:0.85rem; margin:0 0 10px 0; 
text-transform:uppercase; letter-spacing:0.5px;">📸 Daily Meal Log</h4>
                          <div style="display:flex; gap:15px; align-items:center;">
                              <label style="cursor:pointer; background:var(--accent-green); padding:6px 12px; 
border-radius:6px; font-size:0.85rem; color:#2d4a3e; font-weight:600; display:flex; align-items:center; gap:6px; 
transition:all 0.2s;">
              const reader = new FileReader();
              reader.onload = function(e) {
>                 const container = input.closest('.meal-upload-section');
>                 const img = container.querySelector('img');
                  img.src = e.target.result;
>                 container.querySelector('.preview-area').style.display = 'block';
>                 container.querySelector('.status-text').textContent = 'Saved in your log';
                  try {
                      localStorage.setItem(id, e.target.result);
      }
  
>     // 3. Render Workout List (Trainerize Style)
      function renderWorkoutList() {
>         const container = document.getElementById('workout-list');
>         if(!container) return;
          
          if(myWorkout.length === 0) {
>             container.innerHTML = `<div style="text-align:center; padding:40px; color:#94a3b8;">No exercises added. 
Go to Library to add some!</div>`;
              return;
          }
  
>         container.innerHTML = myWorkout.map((ex, index) => `
              <div class="card" style="margin-bottom:20px; border:1px solid #e2e8f0; overflow:hidden; box-shadow:0 2px 
5px rgba(0,0,0,0.05);">
                  <!-- Header -->
              };
  
>             const response = await fetch(url, options);
>             const result = await response.json();
              
              if(Array.isArray(result)) {
          grid.innerHTML = list.map(item => `
              <div class="card" style="margin:0; text-align:center; padding:10px; cursor:pointer; transition:all 
0.2s;" onclick="addToWorkout('${item.name.replace(/'/g, "\\'")}', '${item.gifUrl}')">
>                 <img src="${item.gifUrl}" style="width:100%; height:120px; object-fit:contain; 
mix-blend-mode:multiply; margin-bottom:10px;">
                  <h5 style="margin:0 0 5px 0; font-size:0.85rem; color:var(--primary);">${item.name}</h5>
                  <small style="color:#64748b; text-transform:uppercase; font-size:0.7rem;">${item.bodyPart || 
item.target}</small>
          if(!txt) return;
  
>         // Add user msg to ALL containers
          addMessage(txt, 'user');
          
          // Clear inputs
          document.querySelectorAll('input[type="text"]').forEach(el => {
>              if(el.id === 'chat-input' || el.classList.contains('chat-input-field')) el.value = '';
          });
          
          saveChatToStorage(txt, 'user');
  
>         // Simulate AI Pending
          setTimeout(() => {
          }, 1000);
      
      function addMessage(text, sender) {
>         document.querySelectorAll('.chat-history-container').forEach(container => {
              const div = document.createElement('div');
              const isUser = sender === 'user';
              `;
              
>             container.appendChild(div);
>             container.scrollTop = container.scrollHeight;
          });
      }
      // Journal History
      function loadJournalHistory() {
>         const journalContainer = document.getElementById('journal-history');
>         if (!journalContainer) return;
>         journalContainer.innerHTML = ''; // Clear previous entries
  
          const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                          <p style="margin: 0; font-size: 0.9rem; color: #4a5568;">${savedReflection}</p>
                      `;
>                     journalContainer.appendChild(entryDiv);
                  }
              });
  
          if (!hasEntries) {
>             journalContainer.innerHTML = '<p style="font-style: italic; color: var(--text-muted);">No journal 
entries yet. Start writing your daily reflections!</p>';
          }
      }
  
      // --- COMMUNITY GROUP LOGIC ---
>     const personas = [
          { name: "Maria", age: 42, color: "#BFDBFE", role: "Busy Mom" },
          { name: "Linda", age: 55, color: "#DDD6FE", role: "Optimist" },
          
          for(let i=0; i<count; i++) {
>             const persona = personas[Math.floor(Math.random() * personas.length)];
              const response = responses[Math.floor(Math.random() * responses.length)];
              
                  text: response,
                  sender: 'bot',
>                 persona: persona,
                  arriveAt: Date.now() + delay
              });
  
          const now = Date.now();
>         const remaining = [];
          let changed = false;
  
              if (msg.arriveAt <= now) {
                  // Time to deliver!
>                 addGroupMessage(msg.text, msg.sender, msg.persona);
>                 saveGroupToStorage(msg.text, msg.sender, msg.persona);
                  changed = true;
                  
                  // Play a subtle sound? (Optional, skipping for now)
              } else {
>                 remaining.push(msg);
              }
          });


