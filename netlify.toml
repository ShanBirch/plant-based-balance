[build]
  publish = "."
  functions = "netlify/functions"

# Edge Function Mappings
[[edge_functions]]
  function = "stripe-webhook"
  path = "/.netlify/functions/stripe-webhook"

[[edge_functions]]
  function = "create-subscription"
  path = "/.netlify/functions/create-subscription"

[[edge_functions]]
  function = "sales-bot"
  path = "/.netlify/functions/sales-bot"

[[edge_functions]]
  function = "track-lead"
  path = "/.netlify/functions/track-lead"

[[edge_functions]]
  function = "create-checkout-session"
  path = "/.netlify/functions/create-checkout-session"

[[edge_functions]]
  function = "track-purchase"
  path = "/.netlify/functions/track-purchase"

[[edge_functions]]
  function = "ai_chat"
  path = "/.netlify/functions/ai-chat"

# Ensure we redirect legacy URLs
[[redirects]]
  from = "/quiz"
  to = "/quiz.html"
  status = 200

[[redirects]]
  from = "/plantbasedswitch"
  to = "/plantbasedswitch.html"
  status = 200
  
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  force = false # Only if not exists
